<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>uniconv</title><link rel="stylesheet" type="text/css" href="https://netatalk.sourceforge.io/css/netatalk.css" /><meta name="generator" content="DocBook XSL Stylesheets V1.78.0" /><link rel="home" href="index.html" title="Netatalk 3.0 Manual" /><link rel="up" href="man-pages.html" title="Chapter 5. Manual Pages" /><link rel="prev" href="netatalkconfig.1.html" title="netatalk-config" /><link rel="next" href="manual-index.html" title="Index" /></head><body>
    <div xmlns="" id="header">
        <div id="logo"></div>
        <div id="menlinks">
          <a href="/" title="Return to Netatalk home">[main]</a>
          <a href="http://netatalk.sourceforge.net/wiki/" title="Netatalk Wiki">[wiki]</a>
          <a href="/3.0/htmldocs" title="Netatalk Manual">[documentation]</a>
          <a href="http://sourceforge.net/project/showfiles.php?group_id=8642" title="Download Netatalk from sourceforge">[downloads]</a>
          <a href="/support.php" title="Support">[support]</a>
          <a href="/links.php" title="Netatalk related links">[links]</a>
          <img src="/gfx/end.gif" alt="" width="125" height="7" />
        </div>
    </div>
<div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">uniconv</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="netatalkconfig.1.html">Prev</a> </td><th width="60%" align="center">Chapter 5. Manual Pages</th><td width="20%" align="right"> <a accesskey="n" href="manual-index.html">Next</a></td></tr></table><hr /></div><div class="refentry"><a id="uniconv.1"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>uniconv — convert Netatalk volume encoding</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="cmdsynopsis"><p><code class="command">uniconv<a id="idp139639148864688" class="indexterm"></a></code>  [-ndv]  -c <em class="replaceable"><code>cnidbackend</code></em>   -f <em class="replaceable"><code>fromcode</code></em>   -t <em class="replaceable"><code>tocode</code></em>  [-m <em class="replaceable"><code>maccode</code></em>]  <em class="replaceable"><code>volumepath</code></em> </p></div></div><div class="refsect1"><a id="idp139639148872768"></a><h2>Description</h2><p><span class="command"><strong>uniconv</strong></span> converts the volume encoding of
    <em class="replaceable"><code>volumepath</code></em> from the <em class="replaceable"><code>fromcode</code></em>
    to the <em class="replaceable"><code>tocode</code></em> encoding.</p></div><div class="refsect1"><a id="idp139639148875904"></a><h2>Options</h2><div class="variablelist"><dl class="variablelist"><dt><span class="term">-c</span></dt><dd><p>CNID backend used on this volume, usually cdb or dbd. Should
          match the backend selected with afpd for this volume. If not
          specified, the default CNID backend "@DEFAULT_CNID_SCHEME@" is
          used</p></dd><dt><span class="term">-d</span></dt><dd><p>don't HEX encode leading dots (:2e), equivalent to
          <code class="option">use dots = yes</code> in <span class="citerefentry"><span class="refentrytitle">afp.conf</span>(5)</span></p></dd><dt><span class="term">-f</span></dt><dd><p>encoding to convert from, use ASCII for HEX encoded volumes</p></dd><dt><span class="term">-h</span></dt><dd><p>display help</p></dd><dt><span class="term">-m</span></dt><dd><p>Macintosh client codepage, required for HEX encoded volumes.
          Defaults to "MAC_ROMAN"</p></dd><dt><span class="term">-n</span></dt><dd><p>"dry run", don't do any real changes</p></dd><dt><span class="term">-t</span></dt><dd><p>volume encoding to convert to, e.g. UTF8</p></dd><dt><span class="term">-v</span></dt><dd><p>verbose output, use twice for maximum logging.</p></dd><dt><span class="term">-V</span></dt><dd><p>print version and exit</p></dd></dl></div><p></p></div><div class="refsect1"><a id="idp139639148894576"></a><h2>WARNING</h2><p>Setting the wrong options might render your data unusable!!! Make
    sure you know what you are doing. Always backup your data first.</p><p>It is <span class="bold"><strong>*strongly*</strong></span> recommended to do
    a "dry run" first and to check the output for conversion errors.</p><p><span class="citerefentry"><span class="refentrytitle">afpd</span>(8)</span>
    should <span class="emphasis"><em>not</em></span> be running while you change the volume
    encoding. Remember to change <code class="option">unix charset</code> or
    <code class="option">vol charset</code> in
    <span class="citerefentry"><span class="refentrytitle">afp.conf</span>(5)</span>
    to the new codepage, before restarting afpd.</p><p>In case of <span class="bold"><strong>MacChineseTraditional</strong></span>,
    <span class="bold"><strong>MacJapanese</strong></span> or
    <span class="bold"><strong>MacKorean</strong></span>,
    uniconv cannot be used.</p><p><span class="bold"><strong>USE AT YOUR OWN RISK!!!</strong></span></p></div><div class="refsect1"><a id="idp139639148904048"></a><h2>Selectable charsets</h2><p>Netatalk provides internal support for UTF-8 (pre- and decomposed)
    and HEX. If you want to use other charsets, they must be provided by
    <span class="citerefentry"><span class="refentrytitle">iconv</span>(1)</span></p><p><span class="command"><strong>uniconv</strong></span> also knows iso-8859.adapted, an old style
    1.x NLS widely used. This is only intended for upgrading old volumes,
    <span class="citerefentry"><span class="refentrytitle">afpd</span>(8)</span>
    cannot handle iso-8859.adapted anymore.</p></div><div class="refsect1"><a id="idp139639148908224"></a><h2>CNID background</h2><p>The CNID backends maintains name to ID mappings. If you change a
    filename outside afpd(8) (shell, samba), the CNID db, i.e. the DIDNAME
    index, gets inconsistent. Netatalk tries to recover from such
    inconsistencies as gracefully as possible. The mechanisms to resolve such
    inconsistencies may fail sometimes, though, as this is not an easy task to
    accomplish. I.e. if several names in the path to the file or directory
    have changed, things may go wrong.</p><p>If you change a lot of filenames at once, chances are higher that
    the afpds fallback mechanisms fail, i.e. files will be assigned new IDs,
    even though the file hasn't changed. <span class="command"><strong>uniconv</strong></span>
    therefore updates the CNID entry for each file/directory directly after it
    changes the name to avoid inconsistencies. The two supported backends for
    volumes, dbd and cdb, use the same CNID db format. Therefore, you
    <span class="emphasis"><em>could</em></span> use <span class="command"><strong>uniconv</strong></span> with cdb and
    <span class="command"><strong>afpd</strong></span> with dbd later.</p><p><span class="bold"><strong>Warning</strong></span>: There must not be two
    processes opening the CNID database using different backends at once! If a
    volume is still opened with dbd (cnid_metad/cnid_dbd) and you start
    <span class="command"><strong>uniconv</strong></span> with cdb, the result will be a corrupted CNID
    database, as the two backends use different locking schemes. You might run
    into additional problems, e.g. if dbd is compiled with transactions, cdb
    will not update the transaction logs.</p><p>In general, it is recommended to use the same backend for
    <span class="command"><strong>uniconv</strong></span> you are using with
    <span class="citerefentry"><span class="refentrytitle">afpd</span>(8)</span>.</p></div><div class="refsect1"><a id="idp139639148917536"></a><h2>Examples</h2><p>convert 1.x CAP encoded volume to UTF-8, clients used MacRoman
    codepage, cnidscheme is dbd:</p><pre class="screen"><code class="prompt">example%</code><strong class="userinput"><code> uniconv -c dbd -f ASCII -t UTF8 -m MAC_ROMAN /path/to/share</code></strong></pre><p>convert iso8859-1 volume to UTF-8, cnidscheme is cdb:</p><pre class="screen"><code class="prompt">example%</code><strong class="userinput"><code> uniconv -c cdb -f ISO-8859-1 -t UTF8 -m MAC_ROMAN /path/to/share</code></strong></pre><p>convert 1.x volume using iso8859-1 adapted NLS to HEX encoding:</p><pre class="screen"><code class="prompt">example%</code><strong class="userinput"><code> uniconv -f ISO-8859-ADAPTED -t ASCII -m MAC_ROMAN/path/to/share</code></strong></pre><p>convert UTF-8 volume to HEX, for MacCyrillic clients:</p><pre class="screen"><code class="prompt">example%</code><strong class="userinput"><code> uniconv -f UTF8 -t ASCII -m MAC_CYRILLIC /path/to/share</code></strong></pre></div><div class="refsect1"><a id="idp139639148926960"></a><h2>See also</h2><p><span class="citerefentry"><span class="refentrytitle">afp.conf</span>(5)</span>,<span class="citerefentry"><span class="refentrytitle">afpd</span>(8)</span>,<span class="citerefentry"><span class="refentrytitle">iconv</span>(1)</span>,<span class="citerefentry"><span class="refentrytitle">cnid_metad</span>(8)</span>,<span class="citerefentry"><span class="refentrytitle">cnid_dbd</span>(8)</span></p></div></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="netatalkconfig.1.html">Prev</a> </td><td width="20%" align="center"><a accesskey="u" href="man-pages.html">Up</a></td><td width="40%" align="right"> <a accesskey="n" href="manual-index.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top">netatalk-config </td><td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td><td width="40%" align="right" valign="top"> Index</td></tr></table></div></body></html>