<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Chapter 2. Installation</title><link rel="stylesheet" href="https://netatalk.sourceforge.io/css/netatalk.css" type="text/css" /><meta name="generator" content="DocBook XSL Stylesheets V1.74.3" /><link rel="home" href="index.html" title="Netatalk 2.1 Manual" /><link rel="up" href="index.html" title="Netatalk 2.1 Manual" /><link rel="prev" href="intro.html" title="Chapter 1. Introduction to Netatalk" /><link rel="next" href="configuration.html" title="Chapter 3. Setting up Netatalk" /></head><body>
    <div xmlns="" id="header">
        <div id="logo"></div>
        <div id="menlinks">
            <a href="/" title="Return to Netatalk home">[main]</a>
            <a href="https://github.com/Netatalk/netatalk/wiki" title="Wiki">[wiki]</a>
            <a href="/2.1/htmldocs" title="Netatalk Manual">[documentation]</a>
            <a href="http://sourceforge.net/project/showfiles.php?group_id=8642" title="Download Netatalk from sourceforge">[downloads]</a>
            <a href="/links.php" title="Netatalk related links">[links]</a>
            <a href="/mailing_lists.php" title="Netatalk related mailing lists">[mailing lists]</a>
            <img src="/gfx/end.gif" alt="" width="125" height="7" />
        </div>
    </div>
<div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">Chapter 2. Installation</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="intro.html">Prev</a> </td><th width="60%" align="center"> </th><td width="20%" align="right"> <a accesskey="n" href="configuration.html">Next</a></td></tr></table><hr /></div><div class="chapter" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title"><a id="installation"></a>Chapter 2. Installation</h2></div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="sect1"><a href="installation.html#id2215394">How to obtain Netatalk</a></span></dt><dd><dl><dt><span class="sect2"><a href="installation.html#id2215509">Binary packages</a></span></dt><dt><span class="sect2"><a href="installation.html#id2213606">Source packages</a></span></dt></dl></dd><dt><span class="sect1"><a href="installation.html#id2213811">Compiling Netatalk</a></span></dt><dd><dl><dt><span class="sect2"><a href="installation.html#id2213816">Prerequisites</a></span></dt><dt><span class="sect2"><a href="installation.html#compiling-netatalk">Compiling Netatalk</a></span></dt><dt><span class="sect2"><a href="installation.html#build-bdb">Compiling a new Berkeley DB for Netatalk</a></span></dt></dl></dd></dl></div><div class="warning" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Warning</h3><p>If you have previously used an older version of Netatalk, please
    read the chapter about <a class="link" href="upgrade.html" title="Chapter 4. Upgrading from Netatalk 1.x">upgrading</a> first
    !!!</p></div><p></p><div class="sect1" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="id2215394"></a>How to obtain Netatalk</h2></div></div></div><p>Please have a look at the netatalk page on sourceforge for the most
    recent informations on this issue.</p><p><a class="ulink" href="http://sourceforge.net/projects/netatalk/" target="_top">http://sourceforge.net/projects/netatalk/</a></p><div class="sect2" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="id2215509"></a>Binary packages</h3></div></div></div><p>Binary packages of Netatalk are included in some Linux and UNIX
      distributions. You might want to have a look at the usual locations, too
      (<a class="ulink" href="http://rpmfind.net/" target="_top">http://rpmfind.net/</a>, <a class="ulink" href="http://packages.debian.org/" target="_top">http://packages.debian.org/</a>,
      <a class="ulink" href="http://www.blastwave.org/" target="_top">http://www.blastwave.org/</a>
      <a class="ulink" href="http://www.freebsd.org/ports/index.html" target="_top">http://www.freebsd.org/ports/index.html</a>,
      etc.)<a id="id2213570" class="indexterm"></a><a id="id2213581" class="indexterm"></a><a id="id2213593" class="indexterm"></a></p></div><div class="sect2" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="id2213606"></a>Source packages</h3></div></div></div><div class="sect3" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="id2213612"></a>Tarballs</h4></div></div></div><p>Prepacked tarballs in .tar.gz and tar.bz2 format are available
        on the netatalk page on sourceforge</p></div><div class="sect3" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="id2213623"></a>Read-only Git</h4></div></div></div><p>Downloading the Git repository can be done quickly and
        easily.</p><div class="orderedlist"><ol type="1"><li><p>Make sure you have Git installed. <span class="command"><strong>which
            git</strong></span> should produce a path to git.</p><pre class="screen"><code class="prompt">$&gt;</code> <strong class="userinput"><code>which git</code></strong>
<code class="computeroutput">/usr/bin/git</code></pre></li><li><p>If you don't have one make a source directory.
            <span class="command"><strong>cd</strong></span> to this directory.</p><pre class="screen"><code class="prompt">$&gt;</code> <strong class="userinput"><code>mkdir /path/to/new/source/dir</code></strong>
<code class="prompt">$&gt;</code> <strong class="userinput"><code>cd /path/to/new/source/dir</code></strong></pre></li><li><p>Now get the source:</p><pre class="screen"><code class="prompt">$&gt;</code> <strong class="userinput"><code>git clone git://netatalk.git.sourceforge.net/gitroot/netatalk/netatalk
</code></strong><code class="computeroutput">Initialized empty Git repository in /path/to/new/source/dir/netatalk/.git/
remote: Counting objects: 2503, done.
...
</code></pre><p>This will create a local directory called "netatalk"
            containing a complete and fresh copy of the whole Netatalk source
            from the Git repository.</p></li><li><p>In order to keep your repository copy updated, occasionally
            run:</p><pre class="screen"><code class="prompt">$&gt;</code> <strong class="userinput"><code>git pull</code></strong></pre></li><li><p>Now <span class="command"><strong>cd</strong></span> to the netatalk directory and run
            <span class="command"><strong>./bootstrap</strong></span>. This will create the
            <code class="filename">configure</code> script required in the next
            step.</p><pre class="screen"><code class="prompt">$&gt;</code> <strong class="userinput"><code>./bootstrap</code></strong></pre></li></ol></div><p></p></div></div></div><div class="sect1" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="id2213811"></a>Compiling Netatalk</h2></div></div></div><div class="sect2" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="id2213816"></a>Prerequisites</h3></div></div></div><div class="sect3" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="id2213822"></a>System requirements</h4></div></div></div><p>Your system needs to meet the following requirements:</p><div class="itemizedlist"><ul type="disc"><li><p>A C compiler, Netatalk compiles fine with gcc &gt;
            2.7.95</p></li></ul></div><p>To be able to compile with AFP3 support, your system has to
        support large files (&gt;2GB).</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>On linux systems glibc &gt; 2.2 is required.</p></div><p></p></div><div class="sect3" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="id2213856"></a>Required third party software</h4></div></div></div><p>Netatalk makes use of sleepycats' Berkeley DB<a id="id2213864" class="indexterm"></a>. At the time of writing, the following versions are
        supported:</p><div class="itemizedlist"><ul type="disc"><li><p>mimimum 4.6.x</p></li></ul></div><p>In case Berkeley DB is not installed on your system, please
        download it from:</p><p><a class="ulink" href="http://www.oracle.com/database/berkeley-db/index.html" target="_top">http://www.oracle.com/database/berkeley-db/index.html</a></p><p>and follow the <a class="link" href="installation.html#build-bdb" title="Compiling a new Berkeley DB for Netatalk">installation
        instructions</a>.</p></div><div class="sect3" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="id2213910"></a>Optional third party software</h4></div></div></div><p>Netatalk can use the following third party software to enhance
        it's functionality.</p><div class="itemizedlist"><ul type="disc"><li><p>OpenSSL or libgcrypt (recommended)</p><p>Required for encrypted passwords. Without it, the password
            will be sent over the network in clear text. OpenSSL is needed for
            the older DHCAST128, libgcrypt is needed for DHX2.</p><p>OpenSSL can be downloaded from: <a class="ulink" href="http://www.openssl.org/" target="_top">http://www.openssl.org/</a>.</p><p>libgcrypt can be downloaded from: <a class="ulink" href="http://directory.fsf.org/project/libgcrypt/" target="_top">http://directory.fsf.org/project/libgcrypt/</a>.</p></li><li><p>TCP wrappers</p><p>Wietse Venema's network logger, also known as TCPD or
            LOG_TCP.</p><p>Security options are: access control per host, domain and/or
            service; detection of host name spoofing or host address spoofing;
            booby traps to implement an early-warning system.</p><p>TCP Wrappers can be downloaded from: <a class="ulink" href="ftp://ftp.porcupine.org/pub/security" target="_top">ftp://ftp.porcupine.org/pub/security</a>/</p></li><li><p>PAM<a id="id2213980" class="indexterm"></a></p><p>PAM provides a flexible mechanism for authenticating users.
            PAM was invented by SUN<a id="id2213996" class="indexterm"></a> Microsystems. Linux-PAM is a suite of shared
            libraries that enable the local system administrator to choose how
            applications authenticate users.</p><p>You can get the Linux PAM documentation and sources from
            <a class="ulink" href="http://www.kernel.org/pub/linux/libs/pam/" target="_top">http://www.kernel.org/pub/linux/libs/pam/</a>.</p></li><li><p>OpenSLP</p><p>SLP<a id="id2214029" class="indexterm"></a> (Service Location Protocol) is an IETF<a id="id2214042" class="indexterm"></a> standards track protocol that provides a framework
            to allow networking applications to discover the existence,
            location, and configuration of networked services in enterprise
            networks.</p><p>Mac OS X 10.4 and earlier uses it to locate AFP servers,
            even though 10.2 and later prefer Bonjour.</p><p>You can download OpenSLP from: <a class="ulink" href="http://www.openslp.org/" target="_top">http://www.openslp.org/</a>.</p></li><li><p>iconv</p><p>iconv provides conversion routines for many character
            encodings. Netatalk uses it to provide charsets it does not have
            built in conversions for, like ISO-8859-1. On glibc systems,
            Netatalk can use the glibc provided iconv implementation.
            Otherwise you can use the GNU libiconv implementation.</p><p>You can download GNU libiconv from: <a href="/cgi-bin/olink?sysid" class="olink"><a class="ulink" href="http://www.gnu.org/software/libiconv/" target="_top">http://www.gnu.org/software/libiconv/</a></a>.</p></li></ul></div></div></div><div class="sect2" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="compiling-netatalk"></a>Compiling<a id="id2255486" class="indexterm"></a> Netatalk</h3></div></div></div><div class="sect3" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="id2255499"></a>Configuring the build</h4></div></div></div><p>To build the binaries, first run the program
        <span class="command"><strong>./configure</strong></span> in the source directory. This should
        automatically configure Netatalk for your operating system. If you
        have unusual needs, then you may wish to run</p><pre class="screen">$&gt; <strong class="userinput"><code>./configure --help</code></strong></pre><p>to see what special options you can enable.</p><p>The most used configure options are:</p><div class="itemizedlist"><ul type="disc"><li><p>--enable-[redhat/suse/cobalt/netbsd/fhs]</p><p>This option helps netatalk to determine where to install the
            start scripts.</p></li><li><p><code class="option">--with-bdb</code>=<em class="replaceable"><code>/path/to/bdb/installation/</code></em></p><p>In case you installed Berkeley DB in a non-standard
            location, you will <span class="emphasis"><em>have</em></span> to give the install
            location to netatalk, using this switch.</p></li></ul></div><p>Now run configure with any options you need</p><pre class="screen"><code class="prompt">$&gt;</code> <strong class="userinput"><code>./configure [arguments] [--with-bdb=/bdb/install/path]</code></strong></pre><p>Configure will end up in an overview showing the settings the
        Netatalk Makefiles have been created with.</p><p>If this step fails please visit the <a class="ulink" href="http://netatalk.sourceforge.net/wiki/index.php/Troubleshooting" target="_top">troubleshooting
        guide</a>.</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>With recent RedHat releases, Berkeley DB links to libpthread.
          Netatalk does not link to libpthread, so detection of Berkeley DB
          fails when running configure. It's recommended to <a class="link" href="installation.html#build-bdb" title="Compiling a new Berkeley DB for Netatalk">(re)compile Berkeley DB</a> with
          <code class="option">--with-mutex="x86/gcc-assembly"</code> (on x86 platforms)
          to disable the use of libpthread. Alternatively you could use</p><pre class="screen"><code class="prompt">$&gt;</code><strong class="userinput"><code> LIBS="-lpthread" ./configure [arguments]</code></strong></pre><p>to trick Netatalk into linking to libpthread. However, this is
          not recommended, as there have been some trouble reports indicating
          that linking to libpthread badly damages performance.</p></div><p>Next, running</p><pre class="screen"><code class="prompt">$&gt;</code> <strong class="userinput"><code>make</code></strong></pre><p>should produce the Netatalk binaries (this step can take several
        minutes to complete).</p><p>When the process finished you can use</p><pre class="screen"><code class="prompt">$&gt;</code> <strong class="userinput"><code>make install</code></strong></pre><p>to install the binaries and documentation (must be done as
        "root" when using default locations).</p></div></div><div class="sect2" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="build-bdb"></a>Compiling a new Berkeley DB for Netatalk</h3></div></div></div><p>Netatalk 2.1 requires Berkeley DB version 4.6 or newer. Even if
      you already have a supported version of Berkeley DB installed on your
      system, there are several reasons, why you might still want to consider
      building a new version for Netatalk.</p><p>Many linux distributions provide a precompiled Berkeley DB
      version. This is usually nice, but also has one major drawback: If you
      update your system to a newer release, the installed version of Berkeley
      DB may change. This can lead to a number of problems, starting with
      strange behaviour of Netatalk, unreadable CNID Databases. Most likely
      Netatalk(afpd) won't start anymore, so you'll have to recompile
      Netatalk.</p><p>For instructions compiling Berkeley DB, you should generally refer
      to the documentation provided by Sleepycat. The following information is
      meant to help you avoid problems, users experienced in the past.</p><p>In case you are building on a recent RedHat release, please use
      <code class="option">--with-mutex="x86/gcc-assembly"</code> on x86 platforms to
      prevent Berkeley DB from linking against libpthread.</p><div class="sect3" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="id2255704"></a>Using a statically linked Berkeley DB</h4></div></div></div><p>To link Netatalk statically to Berkeley DB, you have to disable
        shared libraries when building Berkeley DB. If shared libraries exist,
        Netatalk will always link to them, even if a static version exists in
        the same location.</p><pre class="screen"><code class="prompt">root#</code> <strong class="userinput"><code>cd build_unix</code></strong>
<code class="prompt">root#</code> <strong class="userinput"><code>../dist/configure --prefix=/install/path --disable-shared</code></strong>
<code class="prompt">root#</code> <strong class="userinput"><code>make</code></strong>
<code class="prompt">root#</code> <strong class="userinput"><code>make install</code></strong></pre><p>You should now continue with <a class="link" href="installation.html#compiling-netatalk" title="Compiling Netatalk">building Netatalk</a>.</p></div><div class="sect3" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="id2255769"></a>Using a dynamically linked Berkeley DB</h4></div></div></div><p>Building a shared version of Berkeley DB is rather
        straightforward. However, especially under Linux, some care needs to
        be taken. Underlying system libraries, i.e. libnss_db, might be using
        Berkeley DB as well. As these libraries have likely been build with
        another, i.e. older, version of Berkeley DB, linking afpd to a newer
        version can lead to unexpected results.</p><p>You need to configure Berkeley DB with the
        <code class="option">--with-uniquename</code> configure switch to avoid these
        kind of problems. This insures your new version will not interfere
        with another installation of Berkeley DB on your system.</p><pre class="screen"><code class="prompt">root#</code> <strong class="userinput"><code>cd build_unix</code></strong>
<code class="prompt">root#</code> <strong class="userinput"><code>../dist/configure --prefix=/install/path --with-uniquename</code></strong>
<code class="prompt">root#</code> <strong class="userinput"><code>make</code></strong>
<code class="prompt">root#</code> <strong class="userinput"><code>make install</code></strong></pre><p>If you select an install path other than
        <code class="filename">/usr/local</code>, you will have to configure your
        linker to look for libraries in this directory.</p><p>On many operating systems, this is done by adding a new entry to
        <code class="filename">/etc/ld.so.conf</code>.</p><pre class="screen"><code class="prompt">root#</code> <strong class="userinput"><code>echo /install/path/lib &gt;/etc/ld.so.conf</code></strong>
<code class="prompt">root#</code> <strong class="userinput"><code>ldconfig</code></strong></pre><p>You should now continue with <a class="link" href="installation.html#compiling-netatalk" title="Compiling Netatalk">building Netatalk</a>.</p></div></div></div></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="intro.html">Prev</a> </td><td width="20%" align="center"> </td><td width="40%" align="right"> <a accesskey="n" href="configuration.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top">Chapter 1. Introduction to Netatalk </td><td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td><td width="40%" align="right" valign="top"> Chapter 3. Setting up Netatalk</td></tr></table></div></body></html>
