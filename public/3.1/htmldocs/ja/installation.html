<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <title>第2章 インストール</title>
    <link rel="stylesheet" type="text/css" href="https://netatalk.io/css/netatalk.css" />
    <meta name="generator" content="DocBook XSL Stylesheets Vsnapshot" />
    <link rel="home" href="index.html" title="Netatalk マニュアル" />
    <link rel="up" href="index.html" title="Netatalk マニュアル" />
    <link rel="prev" href="intro.html" title="第1章 序説" />
    <link rel="next" href="configuration.html" title="第3章 Netatalk のセットアップ" />
  </head>
  <body>
    <div xmlns="" id="header">
        <div id="logo"></div>
        <div id="menlinks">
          <a href="/" title="Return to Netatalk home">[main]</a>
          <a href="/docs" title="Netatalk Wiki">[wiki]</a>
          <a href="/documentation.html" title="Netatalk Manual">[documentation]</a>
          <a href="/download.html" title="Download Netatalk">[downloads]</a>
          <a href="/support.html" title="Support">[support]</a>
          <a href="/links.html" title="Netatalk related links">[links]</a>
          <img src="/gfx/end.gif" alt="" width="125" height="7" />
        </div>
    </div>
    <div xmlns="" class="navheader" align="center">Netatalk 3.1.18</div>
<div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">第2章 インストール</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="intro.html">戻る</a> </td><th width="60%" align="center"> </th><td width="20%" align="right"> <a accesskey="n" href="configuration.html">次へ</a></td></tr></table><hr /></div><div class="chapter"><div class="titlepage"><div><div><h1 class="title"><a id="installation"></a>第2章 インストール</h1></div><div><div class="author"><h3 class="author"><span class="firstname">Eiichirou</span> <span class="surname">UDA（日本語訳）</span></h3></div></div><div><p class="pubdate">2016 年 7 月 26 日（訳）</p></div></div></div><div class="toc"><p><strong>目次</strong></p><dl class="toc"><dt><span class="sect1"><a href="installation.html#id-1.5.4">Netatalk の入手の仕方</a></span></dt><dd><dl><dt><span class="sect2"><a href="installation.html#id-1.5.4.4">バイナリーパッケージ</a></span></dt><dt><span class="sect2"><a href="installation.html#id-1.5.4.5">ソースパッケージ</a></span></dt></dl></dd><dt><span class="sect1"><a href="installation.html#id-1.5.5">Netatalk のコンパイル</a></span></dt><dd><dl><dt><span class="sect2"><a href="installation.html#id-1.5.5.2">前提条件</a></span></dt><dt><span class="sect2"><a href="installation.html#compiling-netatalk">Netatalk のコンパイル</a></span></dt></dl></dd></dl></div><div class="warning" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">警告</h3><p>Netatalk 3 は他バージョンと共存できないので，以前に Netatalk の古いバージョンを使ったことがあるなら，
    “<a class="link" href="upgrade.html" title="第4章 Netatalk 2 からのアップグレード">Netatalk 2 からのアップグレード</a>”の章をまず読んでいただきたい！！！</p></div><div class="sect1"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="id-1.5.4"></a>Netatalk の入手の仕方</h2></div></div></div><p>この件の最新の情報は GitHub の netatalk のページを一読いただきたい。</p><p><a class="ulink" href="https://github.com/Netatalk/netatalk" target="_top">https://github.com/Netatalk/netatalk</a></p><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a id="id-1.5.4.4"></a>バイナリーパッケージ</h3></div></div></div><p>Netatalk のバイナリーパッケージは，いくつかの Linux，Unix
      ディストリビューションに含まれている．通常の配布元も見たいだろうと思う。</p><p>Ubuntu パッケージ：<a class="ulink" href="https://launchpad.net/ubuntu" target="_top">https://launchpad.net/ubuntu
      </a></p><p>Debian パッケージ：<a class="ulink" href="https://www.debian.org/distrib/packages" target="_top">http://www.debian.org/
      </a></p><p>様々な RPM パッケージ：<a class="ulink" href="http://rpmfind.net/" target="_top">http://rpmfind.net/</a></p><p>Fedora/RHEL パッケージ：<a class="ulink" href="http://koji.fedoraproject.org/koji/search" target="_top">http://koji.fedoraproject.org/koji/search
      </a></p><p>Gentoo パッケージ：<a class="ulink" href="http://packages.gentoo.org/" target="_top">http://packages.gentoo.org/
      </a></p><p>openSUSE パッケージ：<a class="ulink" href="http://software.opensuse.org/" target="_top">http://software.opensuse.org/
      </a></p><p>Solaris パッケージ：<a class="ulink" href="http://www.opencsw.org/packages/CSWnetatalk/" target="_top">http://www.opencsw.org/</a></p><p>FreeBSD ポート：<a class="ulink" href="http://www.freebsd.org/ports/index.html" target="_top">http://www.freebsd.org/ports/index.html
      </a></p><p>NetBSD pkgsrc: <a class="ulink" href="http://pkgsrc.se/search.php" target="_top">http://pkgsrc.se/search.php
      </a></p><p>OpenBSD ports:<a class="ulink" href="https://openports.pl" target="_top">https://openports.pl
      </a></p><p>などである．<a id="id-1.5.4.4.13.1" class="indexterm"></a><a id="id-1.5.4.4.13.2" class="indexterm"></a><a id="id-1.5.4.4.13.3" class="indexterm"></a></p></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a id="id-1.5.4.5"></a>ソースパッケージ</h3></div></div></div><div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a id="id-1.5.4.5.2"></a>Tarball</h4></div></div></div><p>Netatalk のソースを tar で固めた .tar.xz および .tar.bz2 形式のものが <a class="ulink" href="https://github.com/Netatalk/netatalk" target="_top">GitHub の netatalk のページ</a>にある．</p></div><div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a id="id-1.5.4.5.3"></a>Git</h4></div></div></div><p>Git レポジトリ のダウンロードは迅速で容易である：</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>Git がインストールしてあることを確認する．<span class="command"><strong>which
            git</strong></span> は git のパスを示してくれるはずである．</p><pre class="screen"><code class="prompt">$</code> <strong class="userinput"><code>which git</code></strong>
<code class="computeroutput">/usr/bin/git</code></pre></li><li class="listitem"><p>ソースを取得してみよう．</p><pre class="screen"><code class="prompt">$</code> <strong class="userinput"><code>git clone https://github.com/Netatalk/netatalk.git netatalk-code
</code></strong><code class="computeroutput">Initialized empty Git repository in /path/to/new/source/dir/netatalk/.git/
remote: Counting objects: 2503, done.
...
</code></pre><p>上記で Git リポジトリから，Netatalk のソース全体の完全でまっさらのコピーを含む
            <code class="filename">netatalk-code</code> という名前のローカルディレクトリが作成される．</p></li><li class="listitem"><p>レポジトリのコピーを最新の状態にしておきたい場合，適宜以下を実行する．</p><pre class="screen"><code class="prompt">$</code> <strong class="userinput"><code>git pull</code></strong></pre></li><li class="listitem"><p>netatalk-code ディレクトリに <span class="command"><strong>cd</strong></span> して，
            <span class="command"><strong>./bootstrap</strong></span>を実行する．これで次の段階で必要となる
            <code class="filename">configure</code> スクリプトが作成される．</p><pre class="screen"><code class="prompt">$</code> <strong class="userinput"><code>./bootstrap</code></strong></pre></li></ol></div><p>さらなる情報については<a class="ulink" href="https://netatalk.io/docs/Developer-Notes" target="_top">Developer Notes ページ</a>
        も参照のこと．</p></div></div></div><div class="sect1"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="id-1.5.5"></a>Netatalk のコンパイル</h2></div></div></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a id="id-1.5.5.2"></a>前提条件</h3></div></div></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">注記</h3><p>お使いのOSには下記ソフトウェアのバイナリーパッケージが提供される可能性が高い．</p><p>パッケージマネージャで検索すれば見つけられるだろう．</p></div><div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a id="id-1.5.5.2.3"></a>必要なサードパーティソフトウェア</h4></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Berkeley DB<a id="id-1.5.5.2.3.2.1.1.1" class="indexterm"></a>.</p><p>書き込みの時に最低でもバージョン 4.6 が必要となる．</p><p>推奨バージョンは 5.3 である Sleepycat ライセンスで提供された最終リリースである．</p></li><li class="listitem"><p>Libgcrypt</p><p>OS X 10.7 とそれ以降で必須となった DHX2 のために <a class="ulink" href="http://directory.fsf.org/wiki/Libgcrypt" target="_top">
            Libgcrypt</a> が必要である．</p></li></ul></div></div><div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a id="id-1.5.5.2.4"></a>任意のサードパーティソフトウェア</h4></div></div></div><p>Netatalk はその機能性を拡充するために以下のサードパーティソフトウェアを使用することができる．</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Spotlight<a id="id-1.5.5.2.4.3.1.1.1" class="indexterm"></a> サポートのための Tracker</p><p>Netatalk はメタデータのバックエンドとして
            <a class="ulink" href="https://tracker.gnome.org" target="_top">Tracker</a> 
            を使用する．最近の Linux ディストリビューションには，Tracker のバージョン 0.7 以来使用可能な
            libtracker-sparql が提供されている．</p></li><li class="listitem"><p>Bonjour（Zeroconf としても知られる）のための mDNSresponderPOSIX または Avahi</p><p>サービス探索のために Mac OS X 10.2 及び以降のものは 
            Bonjour（Zeroconf としても知られる）を使用する．</p><p>Avahi は DBUS サポートのもとで (
            <strong class="userinput"><code>--enable-dbus</code></strong>) ビルドされなければならない．</p></li><li class="listitem"><p>TCP wrappers</p><p>TCPD または LOG_TCP としても知られる Wietse Venema のネットワークロガー．</p><p>セキュリティオプションは：
            ホストごとドメインごとかつ／ないしはサービスごとのアクセス制御；
            ホスト名のなりすましあるいはホストアドレスのなりすまし検出；
            早期警告システムを実装するブービートラップ；である．</p></li><li class="listitem"><p>PAM<a id="id-1.5.5.2.4.3.4.1.1" class="indexterm"></a></p><p>PAM はユーザー認証の柔軟な機構を実現する．PAM は SUN<a id="id-1.5.5.2.4.3.4.2.1" class="indexterm"></a> Microsystems によって作り出された．
            Linux-PAM はアプリケーションがどのようにユーザーを認証するのかを選択できるようなローカルシステム管理を実現する共有ライブラリーのセットである．</p></li><li class="listitem"><p>iconv</p><p>iconv はたくさんの文字エンコーディングの変換ルーチンを提供する．Netatalk 
            は iconv を使用して内蔵されていない ISO-8859-1 のようなキャラクターセット変換を実現する．
            glibc システムでは glibc の提供する iconv 実装を使うことができる．さもなくば GNU libiconv
            実装を使うことができる．</p></li></ul></div></div></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a id="compiling-netatalk"></a>Netatalk のコンパイル<a id="id-1.5.5.3.1.1" class="indexterm"></a></h3></div></div></div><div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a id="id-1.5.5.3.2"></a>ビルドの設定をする</h4></div></div></div><p>バイナリーをビルドするには最初にソースのディレクトリで 
        <span class="command"><strong>./configure</strong></span> プログラムを実行する．これによって Netatalk 
        がターゲットのオペレーティングシステム向けに自動的に設定されるはずである．
        もし普通とは違う要求がある場合，以下を実行すれば特殊なオプションで有効化できるものを見ることができる．</p><pre class="screen"><code class="prompt">$</code> <strong class="userinput"><code>./configure --help</code></strong></pre><p>最も頻繁に使用されるオプションは：</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><code class="option">--with-init-style</code>=redhat-sysv|redhat-systemd|suse-sysv|suse-systemd|gentoo-openrc|gentoo-systemd|netbsd|debian-sysv|debian-systemd|solaris|openrc|systemd|macos-launchd</p><p>このオプションがスタートアップスクリプトをどこにインストールするかの助けになる．</p></li><li class="listitem"><p><code class="option">--with-bdb</code>=<em class="replaceable"><code>/path/to/bdb/installation/</code></em></p><p>Berkeley DB を標準的な場所以外にインストールした場合，このオプションを使って netatalk 
            に Berkeley DB をインストールした場所（訳注：すなわち 
            <em class="replaceable"><code>/path/to/bdb/installation/</code></em>
            ）を指示<span class="emphasis"><em>しなければならない</em></span>．</p></li><li class="listitem"><p><code class="option">--with-ssl-dir</code>=<em class="replaceable"><code>/path/to/ssl/installation/</code></em></p><p>OpenSSL または LibreSSL を標準以外の場所にインストールした場合，
            このオプションを指定<span class="emphasis"><em>しなければならない</em></span>．</p></li></ul></div><p>そして必要なあらゆるオプションを含めて configure を実行する．</p><pre class="screen"><code class="prompt">$</code> <strong class="userinput"><code>./configure [arguments]</code></strong></pre><p>Netatalk の Makefile 作成に使われた設定の概要を表示して configure は終了する．</p></div><div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a id="spotlight-compile"></a>Spotlight<a id="id-1.5.5.3.3.1.1" class="indexterm"></a></h4></div></div></div><p>Netatalk はメタデータのバックエンドに Gnome 
        <a class="ulink" href="https://projects.gnome.org/tracker/" target="_top">Tracker</a> を用いる．少なくとも最初に
        <a class="ulink" href="https://gnome.pages.gitlab.gnome.org/tracker/docs/developer/" target="_top">SPARQL</a> 
        をサポートしたバージョン 0.7 以降が必要である．</p><p>まだインストールしていなければ <span class="emphasis"><em>tracker</em></span> パッケージと 
        <span class="emphasis"><em>tracker-devel</em></span> パッケージをインストールする．Solaris では 
        <a class="ulink" href="http://www.opencsw.org/" target="_top">OpenCSW</a> をインストールした後に OpenCSW 
        の不安定版レポジトリーにある Tracker のパッケージをインストールする．</p><p>Tracker のパッケージは pkg-config 経由で見つかる．デフォルトのバージョン 0.12 
        より新しいバージョンがインストールされている場合もあるので，
        末尾のバージョン番号も渡す必要があるかもしれない．すなわち</p><pre class="screen"><code class="prompt">$</code> <strong class="userinput"><code>pkg-config --list-all | grep tracker
        </code></strong>tracker-sparql-3.0             tracker-sparql-3.0 - Tracker : A SPARQL triple store library</pre><p>であれば：</p><pre class="screen"><code class="prompt">$</code> <strong class="userinput"><code>./configure --with-tracker-pkgconfig-version=3.0 ...</code></strong></pre><p>とする．</p><p>もし Solaris と OpenCSW 由来の Tracker を使っていれば，PKG_CONFIG_PATH 
        環境変数を設定し，--with-tracker-prefix configure オプションを加え，
        LDFLAGS="-R/opt/csw/lib" を加える必要がある．</p><pre class="screen">PKG_CONFIG_PATH=/opt/csw/lib/pkgconfig LDFLAGS="-R/opt/csw/lib" ./configure --with-tracker-prefix=/opt/csw --with-tracker-pkgconfig-version=0.16 ...</pre><p>Tracker ライブラリーが見つけられているかどうか，configure の出力を確認する：</p><pre class="screen">checking for TRACKER... yes
        checking for TRACKER_MINER... yes
        ...
        Configure summary:
        ...
          AFP:
            Spotlight: yes
        ...</pre></div><div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a id="id-1.5.5.3.4"></a>コンパイルとインストール</h4></div></div></div><p>次に以下を実行</p><pre class="screen"><code class="prompt">$</code> <strong class="userinput"><code>make</code></strong></pre><p>すると Netatalk のバイナリーを生成するはずである．（この段階は完了するのに数分かかる）</p><p>この過程が終了すれば，以下のコマンドを使って</p><pre class="screen"><code class="prompt">$</code> <strong class="userinput"><code>make install</code></strong></pre><p>ドキュメントとバイナリーのインストール（デフォルトの場所を使う場合は 
        "root" として行わなければならない）ができる．</p></div></div></div></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="intro.html">戻る</a> </td><td width="20%" align="center"> </td><td width="40%" align="right"> <a accesskey="n" href="configuration.html">次へ</a></td></tr><tr><td width="40%" align="left" valign="top">第1章 序説 </td><td width="20%" align="center"><a accesskey="h" href="index.html">ホーム</a></td><td width="40%" align="right" valign="top"> 第3章 Netatalk のセットアップ</td></tr></table></div></body>
</html>
