<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>uniconv</title><link rel="stylesheet" type="text/css" href="/css/netatalk.css" /><meta name="generator" content="DocBook XSL Stylesheets Vsnapshot" /><link rel="home" href="index.html" title="Netatalk 3.1 マニュアル" /><link rel="up" href="man-pages.html" title="第5章 マニュアルページ" /><link rel="prev" href="netatalkconfig.1.html" title="netatalk-config" /><link rel="next" href="manual-index.html" title="索引" /></head><body>
    <div xmlns="" id="header">
        <div id="logo"></div>
        <div id="menlinks">
          <a href="/" title="Return to Netatalk home">[main]</a>
          <a href="/docs" title="Netatalk Wiki">[wiki]</a>
          <a href="/documentation.html" title="Netatalk Manual">[documentation]</a>
          <a href="/download.html" title="Download Netatalk">[downloads]</a>
          <a href="/support.html" title="Support">[support]</a>
          <a href="/links.html" title="Netatalk related links">[links]</a>
          <img src="/gfx/end.gif" alt="" width="125" height="7" />
        </div>
    </div>
<div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">uniconv</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="netatalkconfig.1.html">戻る</a> </td><th width="60%" align="center">第5章 マニュアルページ</th><td width="20%" align="right"> <a accesskey="n" href="manual-index.html">次へ</a></td></tr></table><hr /></div><div class="refentry"><a id="uniconv.1"></a><div class="titlepage"></div><div class="refnamediv"><h2>名前</h2><p>uniconv — Netatalkボリュームのエンコーディングを変換する</p></div><div class="refsynopsisdiv"><h2>概要</h2><div class="cmdsynopsis"><p><code class="command">uniconv</code>  [-ndv]  -c <em class="replaceable"><code>cnidbackend</code></em>   -f <em class="replaceable"><code>fromcode</code></em>   -t <em class="replaceable"><code>tocode</code></em>  [-m <em class="replaceable"><code>maccode</code></em>]  <em class="replaceable"><code>volumepath</code></em> </p></div></div><div class="refsect1"><a id="idm5326"></a><h2>説明</h2><p><span class="command"><strong>uniconv</strong></span>は<em class="replaceable"><code>volumepath</code></em>ボリュームのエンコーディングを<em class="replaceable"><code>fromcode</code></em>から<em class="replaceable"><code>tocode</code></em>へ変換する。</p></div><div class="refsect1"><a id="idm5333"></a><h2>オプション</h2><div class="variablelist"><dl class="variablelist"><dt><span class="term">-c</span></dt><dd><p>このボリュームで使うCNIDバックエンド。一般的にはcdbかdbdである。afpdがこのボリュームのために選んだバックエンドと一致させるべきである。これを指定しない場合、デフォルトのCNIDバックエンド"@DEFAULT_CNID_SCHEME@"が使われる。</p></dd><dt><span class="term">-d</span></dt><dd><p>先頭のドットをHEXエンコード(:2e)しない。<span class="citerefentry"><span class="refentrytitle">afp.conf</span>(5)</span>で<code class="option">use dots = yes</code>を使うのに相当する。</p></dd><dt><span class="term">-f</span></dt><dd><p>変換前のエンコーディング。HEXエンコーディングのボリュームではASCIIを指定する。</p></dd><dt><span class="term">-h</span></dt><dd><p>ヘルプを表示する</p></dd><dt><span class="term">-m</span></dt><dd><p>Macintoshクライアントのコードページ。HEXエンコードのボリュームの場合に必要である。デフォルトは"MAC_ROMAN"</p></dd><dt><span class="term">-n</span></dt><dd><p>「予行演習」であり、実際には何も変更しない。</p></dd><dt><span class="term">-t</span></dt><dd><p>変換後のボリュームエンコーディング。例えばUTF8</p></dd><dt><span class="term">-v</span></dt><dd><p>詳細を出力する。最大限のログを出力するには二度指定する。</p></dd><dt><span class="term">-V</span></dt><dd><p>バージョンを表示してから終了する</p></dd></dl></div><p></p></div><div class="refsect1"><a id="idm5377"></a><h2>警告</h2><p>間違ったオプションを設定するとあなたのデータが使用不能になるかもしれない!!! 自分が何をしようとしているか自覚してください。必ず最初にあなたのデータをバックアップしてください。</p><p>「予行演習」を最初に行い、変換エラーの出力をチェックすることを<span class="bold"><strong>*強く*</strong></span>お勧めします。</p><p>ボリュームエンコーディングを変更している間は<span class="citerefentry"><span class="refentrytitle">afpd</span>(8)</span>を走らせるべき<span class="emphasis"><em>ではない</em></span>。afpdを再起動する前に<span class="citerefentry"><span class="refentrytitle">afp.conf</span>(5)</span>の<code class="option">unix charset</code>や<code class="option">vol charset</code>を新しいコードページに変更するのを忘れるな。</p><p><span class="bold"><strong>MacChineseTraditional</strong></span>や<span class="bold"><strong>MacJapanese</strong></span>や<span class="bold"><strong>MacKorean</strong></span>の場合はuniconvは使えません。</p><p><span class="bold"><strong>自己責任で使ってください!!!</strong></span></p></div><div class="refsect1"><a id="idm5398"></a><h2>選択可能な文字セット</h2><p>Netatalkは(合成済と分解済の)UTF-8とHEXを内部サポートで提供する。もしそれ以外の文字セットを使いたいなら、<span class="citerefentry"><span class="refentrytitle">iconv</span>(1)</span>がそれを提供しなければならない。</p><p><span class="command"><strong>uniconv</strong></span>は旧式の1.x NLSで広く使われたiso-8859.adaptedも識別する。これは古いボリュームからアップグレードすることだけを意図したものであり、<span class="citerefentry"><span class="refentrytitle">afpd</span>(8)</span>はもはやiso-8859.adaptedを扱うことができません。</p></div><div class="refsect1"><a id="idm5409"></a><h2>CNIDの背景</h2><p>CNIDバックエンドは名前のIDへのマッピングを維持する。ファイル名をafpd(8)の外(シェルやsmaba)で変更した場合、CNIDデータベース、つまりDIDNAMEインデックスが一致しなくなる。Netatalkは可能な限り華麗にそのような矛盾から回復しようと試みる。これを達成する仕事は簡単ではないので、この矛盾を解決するメカニズムは時々失敗するかもしれない。つまり、ファイルやディレクトリへのパスの途中の名前が幾つか変更されたら、事態は悪化するだろう。</p><p>一気に多くのファイル名を変更した場合、afpdのフォールバックメカニズムが失敗する可能性がより高くなる。つまり、ファイルが変更されていないのに新しいIDが割り当てられるかもしれない。従って<span class="command"><strong>uniconv</strong></span>は矛盾を避けるために名前を変更した後にそれぞれのファイル/ディレクトリのCNIDエントリを直ちに更新する。ボリュームのための2つのバックエンド、つまりdbdとcdbは同じCNIDデータベースフォーマットを使う。したがって、cdbと共に<span class="command"><strong>uniconv</strong></span>を使い、その後でdbdと共に<span class="command"><strong>afpd</strong></span>を<span class="emphasis"><em>使ってもよい。</em></span></p><p><span class="bold"><strong>警告</strong></span>: 二つのプロセスが一度に異なるバックエンドを使ってCNIDデータベースを開いてはならない! 一つのボリュームをdbd (cnid_metad/cnid_dbd)を使って開いたまま、<span class="command"><strong>uniconv</strong></span>がcdbを使って起動すると、CNIDデータベースが壊れる結果になるだろう。何故なら二つのバックエンドは異なるロック方法を使うからである。あなたは更なる問題に出くわすかもしれない。つまりdbdがトランザクションありでコンパイルされている場合、cdbはトランザクションのログをアップデートしない。</p><p>通常、<span class="citerefentry"><span class="refentrytitle">afpd</span>(8)</span>で使っているのと同じバックエンドを<span class="command"><strong>uniconv</strong></span>で使うのが推奨されます。</p></div><div class="refsect1"><a id="idm5425"></a><h2>例</h2><p>1.x CAPエンコードボリュームをUTF-8に変換。クライアントはMacRomanコードページを使っていた。CNIDスキームはdbd:</p><pre class="screen"><code class="prompt">example%</code><strong class="userinput"><code> uniconv -c dbd -f ASCII -t UTF8 -m MAC_ROMAN /path/to/share</code></strong></pre><p>iso8859-1ボリュームをUTF-8に変換。CNIDスキームはcdb:</p><pre class="screen"><code class="prompt">example%</code><strong class="userinput"><code> uniconv -c cdb -f ISO-8859-1 -t UTF8 -m MAC_ROMAN /path/to/share</code></strong></pre><p>iso8859-1 adapted NLSを使った1.xボリュームをHEXエンコーディングに変換:</p><pre class="screen"><code class="prompt">example%</code><strong class="userinput"><code> uniconv -f ISO-8859-ADAPTED -t ASCII -m MAC_ROMAN/path/to/share</code></strong></pre><p>UTF-8ボリュームをHEXに変換。MacCyrillicクライアント向け:</p><pre class="screen"><code class="prompt">example%</code><strong class="userinput"><code> uniconv -f UTF8 -t ASCII -m MAC_CYRILLIC /path/to/share</code></strong></pre></div><div class="refsect1"><a id="idm5443"></a><h2>参照</h2><p><span class="citerefentry"><span class="refentrytitle">afp.conf</span>(5)</span>,<span class="citerefentry"><span class="refentrytitle">afpd</span>(8)</span>,<span class="citerefentry"><span class="refentrytitle">iconv</span>(1)</span>,<span class="citerefentry"><span class="refentrytitle">cnid_metad</span>(8)</span>,<span class="citerefentry"><span class="refentrytitle">cnid_dbd</span>(8)</span></p></div></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="netatalkconfig.1.html">戻る</a> </td><td width="20%" align="center"><a accesskey="u" href="man-pages.html">上に戻る</a></td><td width="40%" align="right"> <a accesskey="n" href="manual-index.html">次へ</a></td></tr><tr><td width="40%" align="left" valign="top">netatalk-config </td><td width="20%" align="center"><a accesskey="h" href="index.html">ホーム</a></td><td width="40%" align="right" valign="top"> 索引</td></tr></table></div></body></html>