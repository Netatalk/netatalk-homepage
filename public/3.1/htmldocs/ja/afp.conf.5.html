<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <title>afp.conf</title>
    <link rel="stylesheet" type="text/css" href="https://netatalk.io/css/netatalk.css" />
    <meta name="generator" content="DocBook XSL Stylesheets Vsnapshot" />
    <link rel="home" href="index.html" title="Netatalk マニュアル" />
    <link rel="up" href="man-pages.html" title="第5章 マニュアルページ" />
    <link rel="prev" href="ad.1.html" title="ad" />
    <link rel="next" href="afp_signature.conf.5.html" title="afp_signature.conf" />
  </head>
  <body>
    <div xmlns="" id="header">
        <div id="logo"></div>
        <div id="menlinks">
          <a href="/" title="Return to Netatalk home">[main]</a>
          <a href="/docs" title="Netatalk Wiki">[wiki]</a>
          <a href="/documentation.html" title="Netatalk Manual">[documentation]</a>
          <a href="/download.html" title="Download Netatalk">[downloads]</a>
          <a href="/support.html" title="Support">[support]</a>
          <a href="/links.html" title="Netatalk related links">[links]</a>
          <img src="/gfx/end.gif" alt="" width="125" height="7" />
        </div>
    </div>
    <div xmlns="" class="navheader" align="center">Netatalk 3.1.18</div>
<div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">afp.conf</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="ad.1.html">戻る</a> </td><th width="60%" align="center">第5章 マニュアルページ</th><td width="20%" align="right"> <a accesskey="n" href="afp_signature.conf.5.html">次へ</a></td></tr></table><hr /></div><div class="refentry"><a id="afp.conf.5"></a><div class="titlepage"></div><div class="refnamediv"><h2>名前</h2><p>afp.conf — Netatalkの設定ファイル</p></div><div class="refsect1"><a id="id-1.8.4.3"></a><h2>概要</h2><p><code class="filename">afp.conf</code>は<span class="bold"><strong>Netatalk</strong></span> AFPファイルサーバの設定ファイルである。</p><p>全てのAFP固有の設定とAFPボリュームの定義がこのファイルを通して行われる。</p></div><div class="refsect1"><a id="FILEFORMATSECT"></a><h2>ファイルの書式</h2><p>ファイルはセクションとパラメータから構成される。セクションはブラケット[各括弧]で囲まれたセクション名に始まり、次のセクションが始まるまで続く。セクションには次のような書式のパラメータが含まれている:
    </p><pre class="programlisting">
    <em class="replaceable"><code>name</code></em> = <em class="replaceable"><code>value </code></em>
    </pre><p>このファイルは行を基本とする。それぞれの行は改行文字で終端し、コメント、セクション名、パラメータのうちどれかを表す。</p><p>セクション名とパラメータ名は大文字と小文字の区別がある。</p><p>パラメータに最初に現れる等号だけは重要な意味を持つ。最初の等号の前後にある空白は破棄される。セクション名とパラメータ名の前、後、途中にある空白は意味を持たない。パラメータ値の前後の空白は破棄される。パラメータ値の途中の空白はそのま維持される。</p><p>セミコロン(<span class="quote">「<span class="quote">;</span>」</span>)やハッシュ文字(<span class="quote">「<span class="quote">#</span>」</span>)で始まるいかなる行も、空白だけの行と同様に無視される。</p><p><span class="quote">「<span class="quote"> <code class="literal">\</code> </span>」</span>で終わるいかなる行も、通例のUNIX方式で次の行に続くことを意味する。</p><p>パラメータにおいて等号の後ろに続く値は、文字列(引用符は必要ない)または真偽値である。真偽値はyes/no、1/0、true/falseで表現する。大文字と小文字の区別は真偽値では意味を持たないが、文字列では保存される。「file perm」のようないくつかの項目は数値を表す。</p><p>「<code class="option">include =　<em class="replaceable"><code>path</code></em></code>」というパラメータは、設定ファイルの中にもう一つの設定ファイルを組み込むことを可能にする。そのファイルはまるでその場所に書き込まれたように、そっくりそのまま組み込まれる。入れ子になった組み込みはサポートされない。</p></div><div class="refsect1"><a id="id-1.8.4.5"></a><h2>セクションの説明</h2><p>設定ファイル中のそれぞれのセクション([Global]セクション以外)は共有リソース(<span class="quote">「<span class="quote">volume</span>」</span>として知られる)を記述する。セクション名はボリュームの名前であり、セクション内のパラメータはボリューム属性とオプションを定義する。</p><p>[Global]と[Homes]という二つの特殊なセクションがあるが、これについては下の方の<span class="emphasis"><em>特殊なセクション</em></span>で説明する。以下の解説は通常のセクションに適用される。</p><p>一つのボリュームは、アクセスを許可するディレクトリ設定と、そのサービスにおいてユーザに与えるアクセス権設定で成り立つ。ボリュームに対して<code class="option">path</code>オプションを使って共有ディレクトリを指定しなければならない。</p><p><code class="option">path</code>オプションのないボリュームセクションは、他のボリュームセクションから<code class="option">vol preset</code>オプション経由で呼び出され、ボリュームのデフォルト値を決める<span class="emphasis"><em>ボリュームプリセット</em></span>と見なされる。プリセット<span class="emphasis"><em>と</em></span>ボリュームセクションの両方で指定されたオプションについては、ボリュームオプション設定がプリセットオプションを完全に上書きする。</p><p>サーバが許可したアクセス権は、ホストシステムの特定のUNIXユーザまたはゲストユーザのアクセス権でマスクされる。サーバはホストシステムの許可以上の許可をしない。</p><p>以下のセクションの例は、一つのAFPボリュームを定義している。ユーザはパス<code class="filename">/foo/bar</code>への完全なアクセス権を持つ。 <code class="literal">baz</code>という共有名でアクセスできる:
    </p><pre class="programlisting"> [baz]
    path = /foo/bar </pre></div><div class="refsect1"><a id="id-1.8.4.6"></a><h2>特殊なセクション</h2><div class="refsect2"><a id="id-1.8.4.6.2"></a><h3>[Global]セクション</h3><p>このセクションのパラメータはサーバ全体に適用される。以下で(G)の印がついているパラメータはこのセクションで設定しなければならない。</p></div><div class="refsect2"><a id="id-1.8.4.6.3"></a><h3>[Homes]セクション</h3><p>このセクションはUNIXサーバ側のユーザのホームディレクトリを共有できるようにする。オプションの<code class="option">path</code>パラメータを指定すると、ユーザのホームディレクトリ全体ではなく、サブディレクトリ<code class="option">path</code>が共有される。<code class="option">basedir regex</code>オプションを定義する必要がある。これはホームディレクトリの親ディレクトリにマッチする正規表現である。(H)の印がついているパラメータはこのボリュームセクション用である。オプションパラメータ<code class="option">home name</code>はAFPボリューム名を変更するのに使うものであり、デフォルトは<span class="emphasis"><em>$u's home</em></span>である。下の「変数置換」の項を見よ。</p><p>以下の例でこれを解説する。全てのユーザのホームディレクトリは<code class="filename">/home</code>の下にある:
      </p><pre class="programlisting"> [Homes]
      path = afp-data
      basedir regex = /home</pre><p>
      ユーザ<span class="emphasis"><em>john</em></span>について、<code class="filename">/home/john/afp-data</code>というパスがAFPホームボリュームになる。</p><p><code class="option">basedir regex</code>ががシンボリックリンクを含む場合、正規化した絶対パスを設定してください。<code class="filename">/home</code>が<code class="filename">/usr/home</code>にリンクしているとき:
      </p><pre class="programlisting"> [Homes]
      basedir regex = /usr/home</pre></div></div><div class="refsect1"><a id="id-1.8.4.7"></a><h2>パラメータ</h2><p>パラメータはセクション固有の属性を定義する。</p><p>いくつかのパラメータは[Global]セクションに固有のものである(たとえば<span class="emphasis"><em>log type</em></span>)。それ以外は全てボリュームセクションのみに許される。(<span class="emphasis"><em>G</em></span>)はパラメータが[Global]セクション固有であることを示す。(<span class="emphasis"><em>V</em></span>)はボリューム固有のセクションで指定できることを示す。</p></div><div class="refsect1"><a id="id-1.8.4.8"></a><h2>変数置換</h2><p>ボリューム名で変数を使うことができる。パスでの変数の利用は$uに限られる。</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>不明な変数を指定した場合、それは変換されない。</p></li><li class="listitem"><p>既知の変数を指定したが変数が値を持たない場合、それは無視される。</p></li></ol></div><p>置換に使われる変数は以下のとおり:</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">$b</span></dt><dd><p>ベース名</p></dd><dt><span class="term">$c</span></dt><dd><p>クライアントのIPアドレス</p></dd><dt><span class="term">$d</span></dt><dd><p>サーバ上のボリュームパス名</p></dd><dt><span class="term">$f</span></dt><dd><p>フルネーム (passwdファイルのGECOSフィールドの内容)</p></dd><dt><span class="term">$g</span></dt><dd><p>グループ名</p></dd><dt><span class="term">$h</span></dt><dd><p>ホスト名</p></dd><dt><span class="term">$i</span></dt><dd><p>クライアントのIPアドレス。ポート番号なし</p></dd><dt><span class="term">$s</span></dt><dd><p>サーバ名 (ホスト名になることができる)</p></dd><dt><span class="term">$u</span></dt><dd><p>ユーザ名 (ゲストの場合、ゲストとして動作しているユーザ名)</p></dd><dt><span class="term">$v</span></dt><dd><p>ボリューム名</p></dd><dt><span class="term">$$</span></dt><dd><p>ドル記号($)を表示する</p></dd></dl></div></div><div class="refsect1"><a id="id-1.8.4.9"></a><h2>グローバルパラメータの説明</h2><div class="refsect2"><a id="id-1.8.4.9.2"></a><h3>認証オプション</h3><div class="variablelist"><dl class="variablelist"><dt><span class="term">ad domain = <em class="parameter"><code>DOMAIN</code></em>
          <span class="type">(G)</span></span></dt><dd><p>認証時にユーザ名に@DOMAINを追加する。Active Directory環境で有用。さもなくば、完全な文字列user@domainで参加するユーザを要求するだろう。</p></dd><dt><span class="term">admin auth user = <em class="parameter"><code>user</code></em>
          <span class="type">(G)</span></span></dt><dd><p>例えば"<code class="option">admin auth user = root</code>"を指定すると、通常ユーザのログインが失敗したときにafpdは必ず指定した<code class="option">admin auth user</code>として認証を試みる。これが成功した場合、元の接続ユーザとして通常のセッションが確立される。言い換えると、あなたが<code class="option">admin auth user</code>のパスワードを知っている場合、如何なる他のユーザとしてでも認証できる。</p></dd><dt><span class="term">admin group = <em class="replaceable"><code>group</code></em>
          <span class="type">(G)</span></span></dt><dd><p>信頼できるグループのユーザがログインしたときスーパユーザとして見えるようにする。このオプションはデフォルトで無効である。</p></dd><dt><span class="term">force user = <em class="replaceable"><code>USER</code></em>
          <span class="type">(G)</span></span></dt><dd><p>このサーバに接続する全ユーザへ、デフォルトユーザとして割り当てるUNIXユーザ名を指定する。これは共有ファイルに役立つ。間違ってセキュリティ問題を引き起こすような使い方が可能なので、それにも注意して利用すべきである。</p></dd><dt><span class="term">force group = <em class="replaceable"><code>GROUP</code></em>
          <span class="type">(G)</span></span></dt><dd><p>このサーバに接続する全ユーザへ、デフォルトプライマリグループとして割り当てるUNIXグループ名を指定する。</p></dd><dt><span class="term">k5 keytab = <em class="replaceable"><code>path</code></em>
          <span class="type">(G)</span>, </span><span class="term">k5 service = <em class="replaceable"><code>service</code></em>
          <span class="type">(G)</span>, </span><span class="term">k5 realm = <em class="replaceable"><code>realm</code></em>
          <span class="type">(G)</span></span></dt><dd><p>サーバがKerberos 5認証UAMをサポートする場合、これらが必要である。</p></dd><dt><span class="term">nt domain = <em class="parameter"><code>DOMAIN</code></em>
          <span class="type">(G)</span>, </span><span class="term">nt separator = <em class="parameter"><code>SEPARATOR</code></em>
          <span class="type">(G)</span></span></dt><dd><p>例えばwinbind認証で利用し、有効かつ動作中のUAM認証を通して、ログイン時のユーザ名の前に両方の文字列を付けたもので認証を試みる。</p></dd><dt><span class="term">save password = <em class="replaceable"><code>BOOLEAN</code></em> (デフォルト:
          <span class="emphasis"><em>yes</em></span>) <span class="type">(G)</span></span></dt><dd><p>パスワードをローカルに保存するクライアントの機能を有効または無効にする。</p></dd><dt><span class="term">set password = <em class="replaceable"><code>BOOLEAN</code></em> (デフォルト:
          <span class="emphasis"><em>no</em></span>) <span class="type">(G)</span></span></dt><dd><p>chooserや「サーバへ接続」のダイアログを通してパスワードの変更をするクライアントの機能を有効または無効にする。</p></dd><dt><span class="term">uam list = <em class="replaceable"><code>uam list</code></em>
          <span class="type">(G)</span></span></dt><dd><p>スペースまたはカンマで区切られたUAMの一覧。(デフォルトは「uams_dhx.so uams_dhx2.so」)</p><p>最も一般的に使われるUAMは以下の通り:</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">uams_guest.so</span></dt><dd><p>ゲストログインを許可する</p></dd><dt><span class="term">uams_clrtxt.so</span></dt><dd><p>(uams_pam.soまたはuams_passwd.so) 暗号化なしで転送されたパスワードによるログインを許可する。(時代遅れ)</p></dd><dt><span class="term">uams_randnum.so</span></dt><dd><p>認証のための乱数および双方向乱数交換を許可する (パスワードを含んだファイル、つまり/opt/homebrew/etc/afppasswdファイルか"<code class="option">passwd file</code>"で指定したファイルのどちらかが必要)。詳細は
                  <span class="citerefentry"><span class="refentrytitle">afppasswd</span>(1)</span>を見よ。(時代遅れ)</p></dd><dt><span class="term">uams_dhx.so</span></dt><dd><p>(uams_dhx_pam.soまたはuams_dhx_passwd.so) 認証のためのDiffie-Hellman交換(DHX)を許可する。</p></dd><dt><span class="term">uams_dhx2.so</span></dt><dd><p>(uams_dhx2_pam.soまたはuams_dhx2_passwd.so) 認証のためのDiffie-Hellman交換2(DHX2)を許可する。</p></dd><dt><span class="term">uam_gss.so</span></dt><dd><p>認証のためのKerberos Vを許可する。(オプション)</p></dd></dl></div></dd><dt><span class="term">uam path = <em class="replaceable"><code>path</code></em>
          <span class="type">(G)</span></span></dt><dd><p>このサーバのためのUAMのデフォルトパスを設定する(デフォルトは/opt/homebrew/lib/netatalk)。</p></dd></dl></div></div><div class="refsect2"><a id="id-1.8.4.9.3"></a><h3>文字セットオプション</h3><p>OS XでAppleはAFP3プロトコルを導入した。大きな変更の一つは、AFP3は分解済UTF-8 (UTF8-MAC)としてエンコードされたUnicode名を用いることである。以前のAFP及びOSバージョンはMacRomanやMacCentralEuropeといった文字セットを用いた。</p><p>AFP3と古いクライアントに同時に応対できるように、<span class="command"><strong>afpd</strong></span>はUTF-8とMac文字セットの間の変換ができる必要がある。OS Xですら部分的にMac文字セットに依存している。AFP3以前のクライアントが使うコードページを<span class="command"><strong>afpd</strong></span>が検出する方法はないので、あなたは<code class="option">mac charset</code>オプションを使ってそれを指定しなけらばならない。デフォルトはMacRomanであり、多くの西欧ユーザにとって良いであろう。</p><p><span class="command"><strong>afpd</strong></span>はUNIXオペレーティングシステムとも相互に作用する必要があるので、UTF8-MAC/Mac文字セットからUNIX文字セットへ変換できる必要がある。デフォルトで<span class="command"><strong>afpd</strong></span>は<span class="emphasis"><em>UTF8</em></span>を用いる。<code class="option">unix charset</code>オプションを使ってUNIX文字セットを設定できる。<span class="command"><strong>afpd</strong></span>のための設定ファイルで拡張文字セットを使う場合、端末が<code class="option">unix charset</code>に一致することを確認してください。</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">mac charset = <em class="parameter"><code>CHARSET</code></em>
          <span class="type">(G)/(V)</span></span></dt><dd><p>Macクライアントの文字セット、例えば<span class="emphasis"><em>MAC_ROMAN</em></span>を指定する。これは文字列やファイル名をOS9やClassic環境のクライアントコードページに変換するために用いられる。すなわち認証やAFPメッセージ(SIGUSR2 messaging)である。これはボリュームの<code class="option">mac charset</code>のデフォルトにもなる。デフォルトは<span class="emphasis"><em>MAC_ROMAN</em></span>。</p></dd><dt><span class="term">unix charset = <em class="parameter"><code>CHARSET</code></em>
          <span class="type">(G)</span></span></dt><dd><p>サーバのunix文字セット、例えば<span class="emphasis"><em>ISO-8859-15</em></span>や<span class="emphasis"><em>EUC-JP</em></span>を指定する。これは文字列をシステムロケールとの間で変換するのに使われる。すなわち認証やサーバメッセージやボリューム名である。LOCALEが設定された場合、システムロケールが使われる。デフォルトはUTF8。</p></dd><dt><span class="term">vol charset = <em class="parameter"><code>CHARSET</code></em>
          <span class="type">(G)/(V)</span></span></dt><dd><p>ボリュームのファイルシステムのエンコーディングを指定する。デフォルトでは<code class="option">unix charset</code>と同じである。</p></dd></dl></div></div><div class="refsect2"><a id="id-1.8.4.9.4"></a><h3>パスワードオプション</h3><div class="variablelist"><dl class="variablelist"><dt><span class="term">passwd file = <em class="parameter"><code>path</code></em>
          <span class="type">(G)</span></span></dt><dd><p>このサーバの乱数UAMパスワードファイルのパスを設定する (デフォルトは/opt/homebrew/etc/afppasswd)。</p></dd><dt><span class="term">passwd minlen = <em class="parameter"><code>number</code></em>
          <span class="type">(G)</span></span></dt><dd><p>UAMが最小パスワード長をサポートする場合、それを設定する。</p></dd></dl></div></div><div class="refsect2"><a id="id-1.8.4.9.5"></a><h3>ネットワークオプション</h3><div class="variablelist"><dl class="variablelist"><dt><span class="term">advertise ssh = <em class="replaceable"><code>BOOLEAN</code></em> (デフォルト:
          <span class="emphasis"><em>no</em></span>) <span class="type">(G)</span></span></dt><dd><p>古いMac OS Xクライアント(10.3.3から10.4)にSSHでトンネルしたAFP接続を魔法のように自動的に確立させる。このオプションを設定した場合、クライアントのFPGetSrvrInfo要求へのサーバの返答は追加エントリを含む。これはクライアントの設定と<span class="citerefentry"><span class="refentrytitle">sshd</span>(8)</span>が正しく設定されて動作するサーバ上で実行中であるかに依存する。</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">注記</h3><p>SSHを介した全体を暗号化するAFP接続はサーバの負荷を著しく増加させるので、このオプションの設定は推奨しない。一方、バージョン10.3.4より前のMacOS Xにおけるこの機能のAppleクライアント側の実装はセキュリティ欠陥があった。</p></div></dd><dt><span class="term">afp interfaces = <em class="replaceable"><code>name [name ...]</code></em>
            <span class="type">(G)</span></span></dt><dd><p>サーバがリッスンするネットワークインターフェースを指定する。デフォルトではシステムの最初のIPアドレスを宣伝するが、入ってくる如何なる要求もリッスンする。</p></dd><dt><span class="term">afp listen = <em class="replaceable"><code>ip address[:port] [ip address[:port]
          ...]</code></em> <span class="type">(G)</span></span></dt><dd><p>サーバが宣伝<span class="bold"><strong>および</strong></span>リッスンするIPアドレスを指定する。デフォルトではシステムの最初のIPアドレスを宣伝するが、入ってくる如何なる要求もリッスンする。ネットワークアドレスはIPv4のドット付き10進数フォーマットやIPv6の16進数フォーマットのどちらでも指定してよい。</p><p>IPv6 address + portの組み合わせは角かっこを使ったフォーマット[IPv6]:portのURLを使わなければならない。</p></dd><dt><span class="term">afp port = <em class="replaceable"><code>port number</code></em>
          <span class="type">(G)</span></span></dt><dd><p>異なるTCPポートをAFPに使わせる。デフォルトは548である。<code class="option">afp listen</code>オプションで何も指定しなかった場合も適用されたデフォルトポートを設定する。</p></dd><dt><span class="term">cnid listen = <em class="replaceable"><code>ip address[:port] [ip
          address[:port] ...]</code></em> <span class="type">(G)</span></span></dt><dd><p>CNIDサーバがリッスンするIPアドレスを指定する。デフォルトは<span class="bold"><strong>localhost:4700</strong></span>である。</p></dd><dt><span class="term">disconnect time = <em class="replaceable"><code>number</code></em>
          <span class="type">(G)</span></span></dt><dd><p>ドロップする前に、切断されたAFPセッションを<em class="parameter"><code>number</code></em>時間維持する。デフォルトは24時間である。</p></dd><dt><span class="term">dsireadbuf = <em class="replaceable"><code>number</code></em>
          <span class="type">(G)</span></span></dt><dd><p>DSI/TCP先読みバッファのサイズを決定する係数。デフォルトは12である。これにDSI server quantum (デフォルトは1MiB)をかけるとバッファサイズになる。この値を増やすと速いローカルネットワークでのボリュームからボリュームへのコピーのスループットが増えるかもしれない。 <span class="emphasis"><em>注記</em></span>: このバッファはafpdの子プロセス毎に割り当てられるので、大きな値を指定すると大量のメモリが食われる (バッファサイズ * クライアント数)。</p></dd><dt><span class="term">fqdn = <em class="replaceable"><code>name[:port]</code></em>
          <span class="type">(G)</span></span></dt><dd><p>完全修飾ドメイン名をオプションのポート番号と共に指定する。サーバがこれを解決できない場合は破棄される。AppleShare clients 3.8.3以前はこのオプションを評価しない。このオプションはデフォルトで無効である。これによりクライアント側は名前解決を二段階踏むことになるので注意して使ってください。afpdはこのname:portの組み合わせを宣伝しますが自動的にはリッスンしないことにも注意してください。</p></dd><dt><span class="term">hostname = <em class="replaceable"><code>name</code></em>
          <span class="type">(G)</span></span></dt><dd><p>宣伝用のIPアドレスを決定するため、ホスト名の呼出結果の代わりにこれを用いる。従って、このホスト名から宣伝用IPアドレスが解決されるようになる。これはリスニングには使われないし、<code class="option">afp listen</code>によっても上書きされてしまう。</p></dd><dt><span class="term">max connections = <em class="replaceable"><code>number</code></em>
          <span class="type">(G)</span></span></dt><dd><p>同時にサーバに接続できるクライアントの最大数を設定する(デフォルトは200)。</p></dd><dt><span class="term">server quantum = <em class="replaceable"><code>number</code></em>
          <span class="type">(G)</span></span></dt><dd><p>これはDSI server quantumを指定する。デフォルト値は0x100000 (1MiB)である。最大値は0xFFFFFFFFFであり最小値は32000である。範囲外の値を指定した場合、デフォルト値が設定される。自分が何をしようとしているか確信がない限り、この値を変更しないでください。</p></dd><dt><span class="term">sleep time = <em class="replaceable"><code>number</code></em>
          <span class="type">(G)</span></span></dt><dd><p>スリープモードにおいてクライアントを切断する前に、スリープ中のAFPセッションを<em class="parameter"><code>number</code></em>時間維持する。デフォルトは10時間である。</p></dd><dt><span class="term">tcprcvbuf = <em class="replaceable"><code>number</code></em>
          <span class="type">(G)</span></span></dt><dd><p>setsockopt()を使ってTCP受信バッファの設定を試みる。しばしばOSはこの値を設定しようとするアプリケーションの資格を制限します。</p></dd><dt><span class="term">tcpsndbuf = <em class="replaceable"><code>number</code></em>
          <span class="type">(G)</span></span></dt><dd><p>setsockopt()を使ってTCP送信バッファの設定を試みる。しばしばOSはこの値を設定しようとするアプリケーションの資格を制限します。</p></dd><dt><span class="term">recvfile = <em class="replaceable"><code>BOOLEAN</code></em> (デフォルト:
          <span class="emphasis"><em>no</em></span>) <span class="type">(G)</span></span></dt><dd><p>データ受信のためにLinuxのsplice()を使うかどうか。</p></dd><dt><span class="term">splice size = <em class="replaceable"><code>number</code></em> (デフォルト:
          <span class="emphasis"><em>64k</em></span>) <span class="type">(G)</span></span></dt><dd><p>spliceする最大バイト数。</p></dd><dt><span class="term">use sendfile = <em class="replaceable"><code>BOOLEAN</code></em> (デフォルト:
          <span class="emphasis"><em>yes</em></span>) <span class="type">(G)</span></span></dt><dd><p>クライアントにファイルデータを送るためにsendfile<a id="id-1.8.4.9.5.2.17.2.1.1" class="indexterm"></a>システムコールを使うかどうか。</p></dd><dt><span class="term">zeroconf = <em class="replaceable"><code>BOOLEAN</code></em> (デフォルト:
          <span class="emphasis"><em>yes</em></span>) <span class="type">(G)</span></span></dt><dd><p>AvahiまたはmDNSResponder込みでコンパイル済の場合、自動的なZeroconf<a id="id-1.8.4.9.5.2.18.2.1.1" class="indexterm"></a>サービス登録を使うかどうか。</p></dd></dl></div></div><div class="refsect2"><a id="id-1.8.4.9.6"></a><h3>雑多なオプション</h3><div class="variablelist"><dl class="variablelist"><dt><span class="term">afp read locks = <em class="replaceable"><code>BOOLEAN</code></em> (デフォルト:
          <span class="emphasis"><em>no</em></span>) <span class="type">(G)</span></span></dt><dd><p>FPReadコールにおいてバイト領域リードロックを適用するかどうか。AFPの仕様はこれを義務付けるが、実際のところこれはUNIXの動作に合致しないし、パフォーマンスを抑え込む。</p></dd><dt><span class="term">afpstats = <em class="replaceable"><code>BOOLEAN</code></em> (デフォルト:
          <span class="emphasis"><em>no</em></span>) <span class="type">(G)</span></span></dt><dd><p>dbusを介してAFPランタイム統計 (接続ユーザ、開いてるボリューム) を提供するかどうか。</p></dd><dt><span class="term">basedir regex = <em class="replaceable"><code>regex</code></em>
          <span class="type">(H)</span></span></dt><dd><p>ユーザホームの親ディレクトリにマッチする正規表現。<code class="option">basedir regex</code>がシンボリックリンクを含む場合、正規化した絶対パスを設定しなければならない。簡単なケースだとこれは単に一つのパスである。つまり<code class="option">basedir regex = /home</code>である。</p></dd><dt><span class="term">chmod request = <em class="replaceable"><code>preserve (デフォルト) | ignore | simple</code></em>
          <span class="type">(G)/(V)</span></span></dt><dd><p>ACLに対応する高度なパーミッション制御。</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p> <code class="option">ignore</code> - UNIXのchmod()要求を完全に無視する。新規作成を上書きして親ディレクトリのACL継承に完全コントロールさせるためにこのオプションを使う。</p></li><li class="listitem"><p>
                <code class="option">preserve</code> - 名前付きユーザとグループのためのZFS ACEやPOSIX ACLグループマスクを維持する
		      </p></li><li class="listitem"><p>
		<code class="option">simple</code> -  いかなる追加の手順も踏まず、単に要求通りにchmod()する
		      </p></li></ul></div></dd><dt><span class="term">close vol = <em class="replaceable"><code>BOOLEAN</code></em> (デフォルト:
          <span class="emphasis"><em>no</em></span>) <span class="type">(G)</span></span></dt><dd><p>ボリュームが設定から削除され、その設定が再読み込みされたとき、クライアントが既に開いているボリュームを可能な限り閉じるかどうか。</p></dd><dt><span class="term">cnid mysql host = <em class="replaceable"><code>MySQL server address</code></em>
          <span class="type">(G)</span></span></dt><dd><p>mysql CNIDバックエンド利用時のMySQLサーバの名前またはアドレス。</p></dd><dt><span class="term">cnid mysql user = <em class="replaceable"><code>MySQL user</code></em>
          <span class="type">(G)</span></span></dt><dd><p>MySQLサーバ認証のためのユーザ名。</p></dd><dt><span class="term">cnid mysql pw = <em class="replaceable"><code>password</code></em>
          <span class="type">(G)</span></span></dt><dd><p>MySQLサーバのためのパスワード。</p></dd><dt><span class="term">cnid mysql db = <em class="replaceable"><code>database name</code></em>
          <span class="type">(G)</span></span></dt><dd><p>指定ユーザが完全アクセス権を持つための存続しているデータベースの名前。</p></dd><dt><span class="term">cnid server = <em class="replaceable"><code>ipaddress[:port]</code></em>
          <span class="type">(G)/(V)</span></span></dt><dd><p>cnid_metadサーバのIPアドレスとポート番号を指定する。CNID dbdバックエンドのために必要。デフォルトはlocalhost:4700。ネットワークアドレスはIPv4のドット分割10進数フォーマットでもよいし、IPv6の16進数フォーマットでもよい。</p></dd><dt><span class="term">dbus daemon = <em class="parameter"><code>path</code></em>
          <span class="type">(G)</span></span></dt><dd><p>Spotlight機能が使用するdbus-daemon実行ファイルのパスを設定する。デフォルト値 <code class="filename">["/opt/homebrew/bin/dbus-daemon"]</code> はnetatalkのビルド時に決定される。</p></dd><dt><span class="term">dircachesize = <em class="replaceable"><code>number</code></em>
          <span class="type">(G)</span></span></dt><dd><p>ディレクトリキャッシュにおける最大エントリ数。キャッシュはディレクトリとファイルを格納する。これはディレクトリのフルパスと、ディレクトリ一覧を大幅にスピードアップするCNIDをキャッシュするために使われる。</p><p>デフォルトサイズは8192、最大サイズは131072。与えられた値は最も近い2の累乗に丸められる。それぞれのエントリは約100バイトを消費し、これは大きな値とは言えないが、それぞれの接続ユーザ毎のafpd子プロセスがキャッシュを持つことを念頭に置いてください。</p></dd><dt><span class="term">extmap file = <em class="parameter"><code>path</code></em>
          <span class="type">(G)</span></span></dt><dd><p>ファイル拡張子とタイプ/クリエータのマッピングを定義するファイルのパスを設定する。(デフォルトは/opt/homebrew/etc/extmap.confである)</p></dd><dt><span class="term">force xattr with sticky bit =
          <em class="replaceable"><code>BOOLEAN</code></em> (デフォルト:
          <span class="emphasis"><em>no</em></span>) <span class="type">(G/V)</span></span></dt><dd><p>ディレクトリへの書き込み権限があったとしても、スティッキービット設定を使ってメタデータ(拡張属性)を書き込むことに失敗するかもしれない。なぜなら、スティッキービットが設定されている場合、所有者だけが拡張属性への書き込みを許されるからである。</p><p>このオプションを有効にするとNetatalkはroot権限でメタデータ(拡張属性)を書き込む。</p></dd><dt><span class="term">guest account = <em class="replaceable"><code>name</code></em>
          <span class="type">(G)</span></span></dt><dd><p>ゲストが利用するユーザ名を指定する (デフォルトは nobody である)。
            本ユーザ名はシステム上の有効なユーザーである必要がある。</p></dd><dt><span class="term">home name = <em class="replaceable"><code>name</code></em>
          <span class="type">(H)</span></span></dt><dd><p>AFPユーザのホームのボリューム名。デフォルトは<span class="emphasis"><em>$u's home</em></span>である。
            ボリューム名の文字列に"<span class="emphasis"><em>$u</em></span>"は必須である。</p></dd><dt><span class="term">ignored attributes = <em class="replaceable"><code>all | nowrite | nodelete | norename</code></em>
          <span class="type">(G)/(V)</span></span></dt><dd><p>サーバが無視すべきファイルとディレクトリの属性を設定する。<code class="option">all</code>はオプション全部という意味である。</p><p>OS Xにおいて、Finderがファイル/ディレクトリのロックを設定する場合、またはターミナルでBSD uchgフラグを設定する場合、3つの属性が全て使われる。従って、Finderロック/BSD uchgフラグを無視する目的で<span class="emphasis"><em>ignored attributes = all</em></span>の設定を追加してください。</p></dd><dt><span class="term">login message = <em class="replaceable"><code>message</code></em>
          <span class="type">(G)/(V)</span></span></dt><dd><p>クライアントがサーバにログオンしたときに表示されるメッセージを設定する。メッセージは<code class="option">unix charset</code>で書く。拡張文字が使える。</p></dd><dt><span class="term">mimic model = <em class="replaceable"><code>model</code></em>
          <span class="type">(G)</span></span></dt><dd><p>クライアント上に表示されるアイコンモデルを指定する。デフォルトではオフになっている。netatalkがZeroconfをサポートしなければならないことに注意してください。例: RackMac (same as Xserve), PowerBook, PowerMac,
            Macmini, iMac, MacBook, MacBookPro, MacBookAir, MacPro,
            AppleTV1,1, AirPort.</p></dd><dt><span class="term">signature = &lt;text&gt; <span class="type">(G)</span></span></dt><dd><p>サーバシグネチャを指定する。最大長は16文字である。このオプションは障害隔離などを提供するクラスタ環境において有用である。デフォルトでは、afpdは自動的にシグネチャを(乱数を元に)生成し、それを<code class="filename">/var/local/netatalk/afp_signature.conf</code>に保存する。asip-status(1)も見よ。</p></dd><dt><span class="term">solaris share reservations =
          <em class="replaceable"><code>BOOLEAN</code></em> (デフォルト:
          <span class="emphasis"><em>yes</em></span>) <span class="type">(G)</span></span></dt><dd><p>Solarisの共有予約を利用する。Solaris CIFSサーバもこれを利用するので、ロックを統一したマルチプロトコルサーバを形成する。</p></dd><dt><span class="term">sparql results limit =
          <em class="replaceable"><code>NUMBER</code></em> (デフォルト:
          <span class="emphasis"><em>無制限</em></span>) <span class="type">(G)</span></span></dt><dd><p>SPARQLクエリを介したTrackerからのクエリ結果の数に制限を課す。</p></dd><dt><span class="term">spotlight =
          <em class="replaceable"><code>BOOLEAN</code></em> (デフォルト:
          <span class="emphasis"><em>no</em></span>) <span class="type">(G)/(V)</span></span></dt><dd><p>Spotlight検索を有効にするかどうか。注記: 一度グローバルオプションで有効にすると、有効でないボリュームは全く検索できない。<span class="emphasis"><em>dbus daemon</em></span>オプションも見よ。</p></dd><dt><span class="term">spotlight attributes =
          <em class="replaceable"><code>カンマで分割した文字列</code></em> (デフォルト:
          <span class="emphasis"><em>空</em></span>) <span class="type">(G)</span></span></dt><dd><p>Spotlight検索で使うことを許された属性のリスト。デフォルトでは全ての属性を検索できるが、文字列を渡せば属性をその文字列の要素に制限できる。 例:
	    </p><pre class="programlisting">spotlight attributes = *,kMDItemTextContent</pre></dd><dt><span class="term">spotlight expr =
          <em class="replaceable"><code>BOOLEAN</code></em> (デフォルト:
          <span class="emphasis"><em>yes</em></span>) <span class="type">(G)</span></span></dt><dd><p>検索において論理式の使用を認めるかどうか。</p></dd><dt><span class="term">start dbus =
          <em class="replaceable"><code>BOOLEAN</code></em> (デフォルト:
          <span class="emphasis"><em>yes</em></span>) <span class="type">(G)</span></span></dt><dd><p>Trackerを使うためにdbusインスタンスを開始するかどうか。</p></dd><dt><span class="term">start tracker =
          <em class="replaceable"><code>BOOLEAN</code></em> (デフォルト:
          <span class="emphasis"><em>yes</em></span>) <span class="type">(G)</span></span></dt><dd><p>"<span class="command"><strong>tracker daemon -s</strong></span>"によってTrackerを開始するかどうか。古いTrackerの場合、"<span class="command"><strong>tracker-control -s</strong></span>"が代わりに使われる。</p></dd><dt><span class="term">veto message = <em class="replaceable"><code>BOOLEAN</code></em> (デフォルト:
          <span class="emphasis"><em>no</em></span>) <span class="type">(G)</span></span></dt><dd><p>禁止ファイルに関するオプションのAFPメッセージを送る。クライアントが禁止名を持つファイルやディレクトリにアクセスを試みたとき、名前とディレクトリを示したAFPメッセージを送る。</p></dd><dt><span class="term">vol dbpath = <em class="replaceable"><code>path</code></em>
          <span class="type">(G)/(V)</span></span></dt><dd><p>データベース情報をpathに格納するように設定する。ボリュームが読み込み専用だったとしても、書き込み可能な場所を設定しなければならない。デフォルトは<code class="filename">/var/local/netatalk/CNID/$v/</code>である。</p></dd><dt><span class="term">vol dbnest = <em class="replaceable"><code>BOOLEAN</code></em> (デフォルト:
          <span class="emphasis"><em>no</em></span>) <span class="type">(G)</span></span></dt><dd><p>このオプションをtrueに設定するとNetatalk 2の動作に立ち返る。つまり、それぞれの共有のボリュームルートの下にある.AppleDBというフォルダにCNIDデータベースを格納する。</p></dd><dt><span class="term">volnamelen = <em class="replaceable"><code>number</code></em>
          <span class="type">(G)</span></span></dt><dd><p>Mac OS XのためのUTF8-MACボリューム名の最大長。ハングルはこれに特に敏感なので注意してください。</p><pre class="programlisting">73: Mac OS X 10.1の制限
80: Mac OS X 10.4/10.5の制限 (デフォルト)
255: 最近のMac OS Xの制限</pre><p>
            Mac OS 9以前はこれに影響されない。なぜならMac文字セットのボリューム名は常に27バイト制限がある。</p></dd><dt><span class="term">vol preset = <em class="replaceable"><code>name</code></em>
          <span class="type">(G)/(V)</span></span></dt><dd><p>([Global]セクションで設定したときは) 全ボリューム、(ボリュームセクションで設定したときは)そのボリュームのオプション初期設定となるセクションの<code class="option">name</code>を使う。</p></dd><dt><span class="term">zeroconf name = <em class="replaceable"><code>name</code></em>
          <span class="type">(G)</span></span></dt><dd><p>登録サービスをユニークに表した、人間が読めるnameを設定する。このzeroconf nameは最大長63オクテット（バイト）のUTF-8で宣伝される。netatalkがZeroconfをサポートしなければならないことに注意してください。</p></dd></dl></div></div><div class="refsect2"><a id="id-1.8.4.9.7"></a><h3>ログのオプション</h3><div class="variablelist"><dl class="variablelist"><dt><span class="term">log file = <em class="replaceable"><code>logfile</code></em>
          <span class="type">(G)</span></span></dt><dd><p>指定しない場合、Netatalkはsyslogデーモン機能にログを出力する。そうでない場合は<code class="option">logfile</code>に出力する。</p></dd><dt><span class="term">log level = <em class="replaceable"><code>type:level [type:level
          ...]</code></em> <span class="type">(G)</span>, </span><span class="term">log level = <em class="replaceable"><code>type:level,[type:level,
          ...]</code></em> <span class="type">(G)</span></span></dt><dd><p>与えられた<code class="option">log level</code>までのログレベルのメッセージを出力するように設定する。</p><p>デフォルトではafpdは<code class="option">default:note</code>に相当する設定でsyslogに出力する。</p><p>ログタイプ: default, afpdaemon, logger, uamsdaemon</p><p>ログレベル: severe, error, warn, note, info, debug, debug6,
            debug7, debug8, debug9, maxdebug</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">注記</h3><p>ログタイプとログレベルはどちらも大文字小文字を区別しない。</p></div></dd></dl></div></div><div class="refsect2"><a id="fceconf"></a><h3>ファイルシステム変更イベント (FCE<a id="id-1.8.4.9.8.1.1" class="indexterm"></a>)</h3><p>Netatalk には素敵なファイルシステム変更イベント機構が含まれている．ここで， afpd プロセスは，なにがしかのファイルシステムイベントについて，関心を寄せているリスナーに， UDP ネットワークデータグラムで通知する．</p><p>以下の FCE イベントが定義されている:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>ファイル変更 (<code class="option">fmod</code>)</p></li><li class="listitem"><p>ファイル削除 (<code class="option">fdel</code>)</p></li><li class="listitem"><p>ディレクトリ削除 (<code class="option">ddel</code>)</p></li><li class="listitem"><p>ファイル作成 (<code class="option">fcre</code>)</p></li><li class="listitem"><p>ディレクトリ作成 (<code class="option">dcre</code>)</p></li><li class="listitem"><p>ファイル移動または名前変更 (<code class="option">fmov</code>)</p></li><li class="listitem"><p>ディレクトリ移動または名前変更 (<code class="option">dmov</code>)</p></li><li class="listitem"><p>ログイン (<code class="option">login</code>)</p></li><li class="listitem"><p>ログアウト (<code class="option">logout</code>)</p></li></ul></div><div class="variablelist"><dl class="variablelist"><dt><span class="term">fce listener = <em class="replaceable"><code>host[:port]</code></em>
          <span class="type">(G)</span></span></dt><dd><p>FCE イベントを指定された <em class="parameter"><code>host</code></em> に送ることができるようにする．もし指定されていなければデフォルトの <em class="parameter"><code>port</code></em> は 12250 である．複数のリスナーを指定するにはそれぞれのリスナーに対するオプションを一度に指定することである．</p></dd><dt><span class="term">fce version = <em class="replaceable"><code>1|2</code></em>
          <span class="type">(G)</span></span></dt><dd><p>FCE プロトコルのヴァージョンで，デフォルトでは 1 である．fmov，dmov，login あるいは logout イベントのためにはバージョン 2 が必要である．</p></dd><dt><span class="term">fce events =
          <em class="replaceable"><code>fmod,fdel,ddel,fcre,dcre,fmov,dmov,login,logout</code></em>
          <span class="type">(G)</span></span></dt><dd><p>どの FCE イベントがアクティブかを指定する．デフォルトでは <em class="parameter"><code>fmod,fdel,ddel,fcre,dcre</code></em> である．</p></dd><dt><span class="term">fce coalesce = <em class="replaceable"><code>all|delete|create</code></em>
          <span class="type">(G)</span></span></dt><dd><p>FCE イベントを結合する．</p></dd><dt><span class="term">fce holdfmod = <em class="replaceable"><code>seconds</code></em>
          <span class="type">(G)</span></span></dt><dd><p>これは，もしクライアントによって FCE ファイル変更イベント (fmod) を送信する前に同じファイルに対する別の変更が同時に行われる場合，常に待機する遅延時間を秒単位で決定する．例えば，フォトショップでファイルを保存することでそのファイル自体の複数のイベントを引き起こす．なぜなら，アプリケーションはその“保存する”たびにファイルを複数回，開き，変更しそして閉じるからである．デフォルトでは 60 秒である．</p></dd><dt><span class="term">fce ignore names = <em class="replaceable"><code>NAME[/NAME2/...]</code></em>
          <span class="type">(G)</span></span></dt><dd><p>FCE イベントを生成すべきでないファイル名をスラッシュで区切ったリスト．デフォルトでは .DS_Store．</p></dd><dt><span class="term">fce ignore directories = <em class="replaceable"><code>NAME[,NAME2,...]</code></em>
          <span class="type">(G)</span></span></dt><dd><p>FCE イベントが生成されないディレクトリのカンマ区切りのリスト。デフォルトは無し。</p></dd><dt><span class="term">fce notify script = <em class="replaceable"><code>PATH</code></em>
          <span class="type">(G)</span></span></dt><dd><p>各々の FCE イベントに対して実行されるスクリプト．スクリプト例については，Netatalk のソースの contrib/shell_utils/fce_ev_script.sh を参照のこと．</p></dd></dl></div></div><div class="refsect2"><a id="id-1.8.4.9.9"></a><h3>デバッグパラメータ</h3><p>これらのオプションはデバッグのみに有用である。</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">tickleval = <em class="replaceable"><code>number</code></em>
          <span class="type">(G)</span></span></dt><dd><p>tickleタイムアウトの間隔を(秒単位で)設定する。デフォルトは30。</p></dd><dt><span class="term">timeout = <em class="replaceable"><code>number</code></em>
          <span class="type">(G)</span></span></dt><dd><p>接続がタイムアウトする前に送るtickleの数を指定する。デフォルトは4なので、2分後に接続がタイムアウトする。</p></dd><dt><span class="term">client polling = <em class="replaceable"><code>BOOLEAN</code></em> (デフォルト:
          <span class="emphasis"><em>no</em></span>) <span class="type">(G)</span></span></dt><dd><p>このオプションを有効にすると、afpdはserver notificationの機能があることを宣伝しない。これは、接続中のクライアントが開いているサーバのウインドウの変更を検出するために10秒毎にポーリングするのを目的としている。<span class="emphasis"><em>注記</em></span>: 同時接続クライアント数とネットワークスピード次第でネットワークの負荷が相当に高くなる!</p><p>現在のNetatalkはserver notificationを正確にサポートしており、接続中のクライアントは他のクライアントが内容を変更したときにフォルダ内の一覧を更新できるので、もはやこのオプションは使わないでください。</p></dd></dl></div></div><div class="refsect2"><a id="acl_options"></a><h3>ACL処理のためのオプション</h3><p>デフォルトでは、認証済ユーザの有効な権限は記載済UARights権限構造にだけマップされる。UNIXモードではない。この挙動は設定オプション<code class="option">map acls</code>で調整できる:</p><div class="variablelist"><a id="map_acls"></a><dl class="variablelist"><dt><span class="term">map acls = <em class="parameter"><code>none|rights|mode</code></em>
          <span class="type">(G)</span></span></dt><dd><div class="variablelist"><dl class="variablelist"><dt><span class="term">none</span></dt><dd><p>ACLのマッピングをしない</p></dd><dt><span class="term">rights</span></dt><dd><p>有効な権限がUARights構造にマップされる。これがデフォルトである。</p></dd><dt><span class="term">mode</span></dt><dd><p>ACLはファイルシステムオブジェクトのUNIXモードにもマップされる。</p></dd></dl></div></dd></dl></div><p>もしクライアント上で ACL を表示できるようにしたければ， クライアントもサーバーも認証ドメイン（ディレクトリサービス，例えば，LDAP，Open Directory， Active Directory）の一部としてセットアップしなければならない．その理由は，OS X の ACL は単に uid ないしは gid と結合しているのではなく，UUID と結合しているからである．それ故，Netatalk は，OS X の UUID と紐付けした UNIX uid と gid に結合したサーバー側の ACL を返せるように，ファイルシステム全ての uid と gid を UUID と紐付けできるようにしなければならない．</p><p>Netatalk は LDAP 検索を用いてディレクトリサーバーを検索をすることができる．ディレクトリサーバーが既にユーザーとグループの UUID 属性を提供している（Active Directory，Open Directory）か，ディレクトリサーバー（例えばOpenLDAP）の未使用の属性を再使用（あるいは新しい属性を追加）するか，のいずれかである．</p><p>Netatalk では以下の LDAP オプションが設定されなければならない:</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">ldap auth method = <em class="parameter"><code>none|simple|sasl</code></em>
          <span class="type">(G)</span></span></dt><dd><p>認証方式: <code class="option">none | simple |
            sasl</code></p><div class="variablelist"><dl class="variablelist"><dt><span class="term">none</span></dt><dd><p>匿名 LDAP 認証</p></dd><dt><span class="term">simple</span></dt><dd><p>簡易 LDAP 認証</p></dd><dt><span class="term">sasl</span></dt><dd><p>SASL. まだサポートされていない!</p></dd></dl></div></dd><dt><span class="term">ldap auth dn = <em class="parameter"><code>dn</code></em>
          <span class="type">(G)</span></span></dt><dd><p>簡易認証でのユーザーの識別名．</p></dd><dt><span class="term">ldap auth pw = <em class="parameter"><code>password</code></em>
          <span class="type">(G)</span></span></dt><dd><p>簡易認証でのパスワード．</p></dd><dt><span class="term">ldap server = <em class="parameter"><code>host</code></em>
          <span class="type">(G)</span></span></dt><dd><p>LDAP サーバーの名前か IP アドレス．これは，LDAP に UUID の問い合わせをできるようにするために，明示的な ACL サポートを必要とする時のみ必要．</p><p>設定の構文的なチェックのために <span class="citerefentry"><span class="refentrytitle">afpldaptest</span>(1)</span>
            を使うこともできる．</p></dd><dt><span class="term">ldap userbase = <em class="parameter"><code>base dn</code></em>
          <span class="type">(G)</span></span></dt><dd><p>LDAP 内のユーザーコンテナの DN．</p></dd><dt><span class="term">ldap userscope = <em class="parameter"><code>scope</code></em>
          <span class="type">(G)</span></span></dt><dd><p>ユーザー検索での検索スコープ: <code class="option">base | one | sub</code></p></dd><dt><span class="term">ldap groupbase = <em class="parameter"><code>base dn</code></em>
          <span class="type">(G)</span></span></dt><dd><p>LDAP 内のグループコンテナの DN．</p></dd><dt><span class="term">ldap groupscope = <em class="parameter"><code>scope</code></em>
          <span class="type">(G)</span></span></dt><dd><p>グループ検索での検索スコープ: <code class="option">base | one | sub</code></p></dd><dt><span class="term">ldap uuid attr = <em class="parameter"><code>dn</code></em>
          <span class="type">(G)</span></span></dt><dd><p>UUID のある LDAP 属性の名前．</p><p>注記: これはユーザーでもグループでも双方で用いられる．</p></dd><dt><span class="term">ldap name attr = <em class="parameter"><code>dn</code></em>
          <span class="type">(G)</span></span></dt><dd><p>ユーザーの短縮名のある LDAP 属性の名前．</p></dd><dt><span class="term">ldap group attr = <em class="parameter"><code>dn</code></em>
          <span class="type">(G)</span></span></dt><dd><p>グループの短縮名のある LDAP 属性の名前．</p></dd><dt><span class="term">ldap uuid string = <em class="parameter"><code>STRING</code></em>
          <span class="type">(G)</span></span></dt><dd><p>ディレクトリでの UUID 文字列のフォーマット．'x' と '-'を続けたもので，それぞれの 'x' は 0-9a-f の値を示し，'-' はそれぞれ区切り文字である．</p><p>デフォルト: xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx</p></dd><dt><span class="term">ldap uuid encoding = <em class="parameter"><code>string | ms-guid (デフォルト:
          string)</code></em> <span class="type">(G)</span></span></dt><dd><p>LDAP 属性の UUID のフォーマットは Active Directory からの obhectGUID バイナリーフィールドの使用を許す．もし未指定のままだと string がデフォルトとなる．これはほとんどの LDAP ストアによって ASCII UUID を通して渡される．もし ms-guid が設定されると，サーバーと相互に動作する時 Active Directory 内にあるオブジェクトの objectGUID 属性で用いられる内部 UUID 表記とバイナリー形式が相互に変換される．</p><p>オプション <code class="option">ldap user filter</code> 及び <code class="option">ldap group filter</code> も参照のこと．</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">string</span></dt><dd><p>UUID は文字列．例えば OpenDirectory とで使用する．</p></dd><dt><span class="term">ms-guid</span></dt><dd><p>Active Directory からの objectGUID バイナリー．</p></dd></dl></div></dd><dt><span class="term">ldap user filter = <em class="parameter"><code>STRING (デフォルト: 未使用)</code></em>
          <span class="type">(G)</span></span></dt><dd><p>ユーザーオブジェクトにマッチする任意の LDAP フィルター．これは，ユーザーとグループが同じディレクトリのサブツリーに保存されている Active Directory 環境で必要．</p><p>Active Directory での推奨設定: <em class="parameter"><code>objectClass=user</code></em></p></dd><dt><span class="term">ldap group filter = <em class="parameter"><code>STRING (デフォルト: 未使用)</code></em>
          <span class="type">(G)</span></span></dt><dd><p>グループオブジェクトにマッチする任意の LDAP フィルター．これは，ユーザーとグループが同じディレクトリのサブツリーに保存されている Active Directory 環境で必要．</p><p>Active Directory での推奨設定: <em class="parameter"><code>objectClass=group</code></em></p></dd></dl></div></div></div><div class="refsect1"><a id="id-1.8.4.10"></a><h2>ボリュームパラメータの説明</h2><div class="refsect2"><a id="id-1.8.4.10.2"></a><h3>パラメータ</h3><p>セクション名ボリューム名を定義する．同じ名前の二つのボリュームというのは無いであろう．ボリューム名が文字 <span class="keycode">':'</span> を含むことはできない． ボリューム名がとても長ければマングルされる．Mac キャラクターセットのボリューム名は27 文字までに制限される．UTF8-MAC ボリューム名は volnamelen パラメータで制限される．</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">path = <em class="replaceable"><code>PATH</code></em> <span class="type">(V)</span></span></dt><dd><p>パス名は完全修飾パス名でなければならない．</p></dd><dt><span class="term">appledouble = <em class="replaceable"><code>ea|v2</code></em>
          <span class="type">(V)</span></span></dt><dd><p>メタデータファイルのフォーマットを指定する．これは Mac のリソースフォークの保存にも用いられる．初期のバージョンでは AppleDouble v2 が用いられ，新しいデフォルトのフォーマットは <span class="bold"><strong>ea</strong></span> である．</p></dd><dt><span class="term">vol size limit = <em class="replaceable"><code>MiB 単位でのサイズ</code></em>
          <span class="type">(V)</span></span></dt><dd><p>Time Machine に有用：報告されるボリュームサイズを制限する．故に Time Machine がバックアップのために実ディスク領域全体を使うことを防止する．例えば "vol size limit = 1000" は報告されるディスク領域を 1 GB に制限する． <span class="bold"><strong>重要:</strong></span> これは Time Machine sparsebundle イメージの中身を考慮した概算である．それ故このオプションを使用した時，このボリュームを他のコンテンツを保管するのに使用 “してはならない”．なぜなら勘定に入っていないからである．計算は: sparsebundle の Info.plist XML ファイルからバンドサイズを読む，バンドファイルの数を数えて バンド／ディレクトリ を読む，そしてお互いの乗算をする．ことによって行われる．</p></dd><dt><span class="term">valid users = <em class="replaceable"><code>user @group</code></em>
          <span class="type">(V)</span></span></dt><dd><p>この許可オプションは指定された共有にそのユーザーとグループのアクセスを許可する．ユーザーとグループはスペースかコンマで区切って指定する．グループは @ プレフィックスで明示する．例:
            </p><pre class="programlisting">valid users = user @group</pre></dd><dt><span class="term">invalid users = <em class="replaceable"><code>users/groups</code></em>
          <span class="type">(V)</span></span></dt><dd><p>この拒否オプションはその共有にアクセスを許可しないユーザーとグループを指定する．それ以外は "valid users" オプションと同じフォーマットである．</p></dd><dt><span class="term">hosts allow = <em class="replaceable"><code>IPホストアドレス/IPマスクビット [
          ... ]</code></em> <span class="type">(V)</span></span></dt><dd><p>列挙されたホストとネットワークのみが許可され，ほかの全ては拒否される．ネットワークアドレスは IPv4 のドット区切りフォーマット， IPv6の16進数フォーマットのどちらでもよい．</p><p>例: hosts allow = 10.1.0.0/16 10.2.1.100
            2001:0db8:1234::/48</p></dd><dt><span class="term">hosts deny = <em class="replaceable"><code>IPホストアドレス/IPマスクビット [
          ... ]</code></em> <span class="type">(V)</span></span></dt><dd><p>列挙されたホストとネットのみが拒否され，ほかの全ては許可される．</p><p>例: hosts deny = 192.168.100/24 10.1.1.1
            2001:db8::1428:57ab</p></dd><dt><span class="term">cnid scheme = <em class="replaceable"><code>backend</code></em>
          <span class="type">(V)</span></span></dt><dd><p>そのボリュームに使う CNID バックエンドをセットする．デフォルトのバックエンドは ["dbd"] で，有効なバックエンドは [" dbd last mysql"] である．</p></dd><dt><span class="term">ea = <em class="replaceable"><code>none|auto|sys|ad|samba</code></em>
          <span class="type">(V)</span></span></dt><dd><p>拡張属性<a id="id-1.8.4.10.2.3.9.2.1.1" class="indexterm"></a>をどのように保存するか指定する． <code class="option">auto</code> がデフォルトである．</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">auto</span></dt><dd><p>（共有ディレクトリ自体に EA を設定することにより） <code class="option">sys</code> を試行して，フォールバックすると <code class="option">ad</code> になる．試行を実行するためにはボリュームが書き込み可能であることが必要である． "<code class="option">read only = yes</code>" ならば <code class="option">auto</code> は <code class="option">none</code> で上書きされる．書き込み専用のボリュームには必要に応じて明確に "<code class="option">ea = sys|ad</code>" を使ってください．</p></dd><dt><span class="term">sys</span></dt><dd><p>ファイルシステムの拡張属性を使う．</p></dd><dt><span class="term">samba</span></dt><dd><p>ファイルシステムの拡張属性を使うが，Sambaのvfs_streams_xattrとの互換性の目的で，それぞれの拡張属性に値がゼロの1バイトを追加する．</p></dd><dt><span class="term">ad</span></dt><dd><p><span class="emphasis"><em>.AppleDouble</em></span> ディレクトリ内のファイルを使う．</p></dd><dt><span class="term">none</span></dt><dd><p>拡張属性をサポートしない．</p></dd></dl></div></dd><dt><span class="term">mac charset = <em class="replaceable"><code>CHARSET</code></em>
          <span class="type">(V)</span></span></dt><dd><p>もしグローバル設定を適用する指定がなければ，そのボリュームに対しての Mac クライアントのキャラクターセット，例えば <span class="emphasis"><em>MAC_ROMAN</em></span>，<span class="emphasis"><em>MAC_CYRILLIC</em></span> 等を指定する．この設定は Mac キャラクターセットが [Global] セクションで全体的にセットしたキャラクターセットと異なるというボリュームを必要とする時のみ必須である．</p></dd><dt><span class="term">casefold = <code class="option">option</code> <span class="type">(V)</span></span></dt><dd><p>ファイル名の大文字小文字を変更すべき場合，casefold オプションが処理する．有効なオプションは:</p><p><code class="option">tolower</code> - 双方向で名前を小文字に変換する。</p><p><code class="option">toupper</code> - 双方向で名前を大文字に変換する。</p><p><code class="option">xlatelower</code> - クライアントでは小文字に見えて、サーバでは大文字に見える。</p><p><code class="option">xlateupper</code> - クライアントでは大文字に見えて、サーバでは小文字にみえる。</p></dd><dt><span class="term">password = <em class="replaceable"><code>password</code></em>
          <span class="type">(V)</span></span></dt><dd><p>このオプションはボリュームパスワードの設定を許可する．パスワードは最大で 8 文字の長さ（これを記入するときには ASCII を強く推奨）</p></dd><dt><span class="term">file perm = <em class="replaceable"><code>mode</code></em>
          <span class="type">(V)</span>, </span><span class="term">directory perm = <em class="replaceable"><code>mode</code></em>
          <span class="type">(V)</span></span></dt><dd><p>クライアントが要求した権限との論理和(or)をとる． <code class="option">file perm</code> はファイルにのみ， <code class="option">directory perm</code> はディレクトリにのみ用いる． "<code class="option">unix priv = no</code>" と共に用いてはならない．</p><div class="example"><a id="id-1.8.4.10.2.3.13.3.2"></a><p class="title"><strong>例5.1 共同ワークグループ用ボリューム</strong></p><div class="example-contents"><pre class="programlisting">file perm = 0660
directory perm = 0770</pre></div></div><br class="example-break" /></dd><dt><span class="term">umask = <em class="replaceable"><code>mode</code></em>
          <span class="type">(V)</span></span></dt><dd><p>権限のマスクを設定する． "<code class="option">unix priv = no</code>" と共に用いてはならない．</p></dd><dt><span class="term">preexec = <em class="replaceable"><code>command</code></em>
          <span class="type">(V)</span></span></dt><dd><p>ボリュームがマウントされる時に実行されるコマンド</p></dd><dt><span class="term">postexec = <em class="replaceable"><code>command</code></em>
          <span class="type">(V)</span></span></dt><dd><p>ボリュームが閉じられる時に実行されるコマンド</p></dd><dt><span class="term">root preexec = <em class="replaceable"><code>command</code></em>
          <span class="type">(V)</span></span></dt><dd><p>ボリュームがマウントされる時にルート権限で実行されるコマンド</p></dd><dt><span class="term">root postexec = <em class="replaceable"><code>command</code></em>
          <span class="type">(V)</span></span></dt><dd><p>ボリュームが閉じられる時にルート権限で実行されるコマンド</p></dd><dt><span class="term">rolist = <code class="option">users/groups</code> <span class="type">(V)</span></span></dt><dd><p>信頼するユーザー及びグループの共有に対する読み込み専用アクセスを許可する．フォーマットは allow オプションに準ずる．</p></dd><dt><span class="term">rwlist = <em class="replaceable"><code>users/groups</code></em>
          <span class="type">(V)</span></span></dt><dd><p>信頼するユーザー及びグループの共有に対する読み込み／書き込みアクセスを許可する．フォーマットは allow オプションに準ずる．</p></dd><dt><span class="term">veto files = <em class="replaceable"><code>vetoed names</code></em>
          <span class="type">(V)</span></span></dt><dd><p>'/' で区切られた 禁止名のどれかに一致するパスのファイルとディレクトリを隠す．禁止文字列は常に '/' で終わらなければならない．例えば，"veto files = veto1/"，"veto files = veto1/veto2/"．</p></dd></dl></div></div><div class="refsect2"><a id="id-1.8.4.10.3"></a><h3>ボリュームオプション</h3><p>ブーリアン型のボリュームオプション．</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">acls = <em class="replaceable"><code>BOOLEAN</code></em> (デフォルト:
          <span class="emphasis"><em>yes</em></span>) <span class="type">(V)</span></span></dt><dd><p>ボリュームが ACL をサポートしてるというフラグを立てるかどうか． もし ACL サポートでコンパイルしていれば，これはデフォルトで yes．</p></dd><dt><span class="term">case sensitive = <em class="replaceable"><code>BOOLEAN</code></em> (デフォルト:
          <span class="emphasis"><em>yes</em></span>) <span class="type">(V)</span></span></dt><dd><p>ボリュームが大文字小文字を区別したファイル名をサポートしてるというフラグを立てるかどうか． もしファイルシステムが大文字小文字を区別しなければ no を設定せよ．しかしながらこれは完全には確かめられていない．</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">注記</h3><p>実際には大文字小文字を区別しているにもかかわらず，netatalk 3.1.3 とそれ以前のものはクライアントに kCaseSensitive フラグを通知しなかった．バージョン 3.1.4 からはデフォルトで正しく通知される．</p></div></dd><dt><span class="term">cnid dev = <em class="replaceable"><code>BOOLEAN</code></em> (デフォルト:
          <span class="emphasis"><em>yes</em></span>) <span class="type">(V)</span></span></dt><dd><p>CNID バックエンド内でデバイス番号を使うかどうか． 例えばクラスターなどでリブートを経るとデバイス番号が固定ではない時有用．</p></dd><dt><span class="term">convert appledouble = <em class="replaceable"><code>BOOLEAN</code></em>
          (デフォルト: <span class="emphasis"><em>yes</em></span>) <span class="type">(V)</span></span></dt><dd><p>クライアントからのファイルシステムへのアクセス時， <code class="option">appledouble = v2</code> から <code class="option">appledouble = ea</code> への自動的な変換を行うかどうか．これは概して有用であるがいくらかパフォーマンスが犠牲となる．ボリューム上で <span class="command"><strong>dbd</strong></span> を実行しそれで変換をするのが推奨される．その後このオプションを no に設定することもできる．</p></dd><dt><span class="term">delete veto files = <em class="replaceable"><code>BOOLEAN</code></em>
          (デフォルト: <span class="emphasis"><em>no</em></span>) <span class="type">(V)</span></span></dt><dd><p>このオプションは Netatalk が一つあるいはそれ以上の veto されたファイルあるいはディレクトリ（veto files オプションを見よ）を削除しようとした時用いられる．もしこのオプションを no に設定し（デフォルト），そしてもしあるディレクトリが何か非 veto ファイルないしはディレクトリを含んでいたら，ディレクトリの削除は失敗するであろう．これは通常あなたの望むところの動作である．</p><p>もしこのオプションが yes に設定されていたら，Netatalk は veto 化ディレクトリ・ディレクトリ内も含めあらゆるファイル，ディレクトリを再帰的に削除しようとするであろう．</p></dd><dt><span class="term">follow symlinks = <em class="replaceable"><code>BOOLEAN</code></em> (デフォルト:
          <span class="emphasis"><em>no</em></span>) <span class="type">(V)</span></span></dt><dd><p>デフォルトの設定では偽なのでサーバー上でシンボリックリンクは辿られない．これは OS X の AFP サーバーと同じ挙動である．オプションを真に設定すると afpd がサーバー上でシンボリックリンクを辿るようにさせる．今のところ afpd は "wide symlinks" を全く検査しないので，シンボリックリンクは AFP ボリューム以外を指しているかもしれない．</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">注記</h3><p>シンボリックリンクがファイルシステムの境界をまたいで張られている時，このオプションは巧妙に断ち切る．</p></div></dd><dt><span class="term">invisible dots = <em class="replaceable"><code>BOOLEAN</code></em> (デフォルト:
          <span class="emphasis"><em>no</em></span>) <span class="type">(V)</span></span></dt><dd><p>ドットファイルを不可視にする． 警告：このオプションを有効にすると，望まない副作用を OS X アプリケーションに引き起こす．つまり， 先頭がドットではじまる一時ファイルにファイルをセーブし，それから一時ファイルを最終的なファイル名にリネームした時， 結果としてセーブしたファイルが見えなくなる．唯一このオプションが有用なのは，Mac OS 9 でドットからはじまるファイルを見えなくさせるためである．Mac OS X では，Finder でもターミナルでもドットではじまるファイルはいずれにしても隠しファイルなので，完全に無駄である．</p></dd><dt><span class="term">network ids = <em class="replaceable"><code>BOOLEAN</code></em> (デフォルト:
          <span class="emphasis"><em>yes</em></span>) <span class="type">(V)</span></span></dt><dd><p>サーバーがネットワーク id をサポートするかどうか．これを <span class="emphasis"><em>no</em></span> に設定すると結果としてクライアントは ACL AFP 機能を使わなくなる．</p></dd><dt><span class="term">preexec close = <em class="replaceable"><code>BOOLEAN</code></em> (デフォルト:
          <span class="emphasis"><em>no</em></span>) <span class="type">(V)</span></span></dt><dd><p>preexec からの 0 以外のリターンコードで，クライアントがボリュームをマウントする／見ることを防ぐために当該ボリュームを即座に閉じる．</p></dd><dt><span class="term">read only = <em class="replaceable"><code>BOOLEAN</code></em> (デフォルト:
          <span class="emphasis"><em>no</em></span>) <span class="type">(V)</span></span></dt><dd><p>その共有を全てのユーザーに対して読み込み専用と指定する．<code class="option">ea = auto</code> は <code class="option">ea = none</code> で上書きされる．</p></dd><dt><span class="term">root preexec close= <em class="replaceable"><code>BOOLEAN</code></em>
          (デフォルト: <span class="emphasis"><em>no</em></span>) <span class="type">(V)</span></span></dt><dd><p>root_preexec からの 0 以外のリターンコードで，クライアントがボリュームをマウントする／見ることを防ぐために当該ボリュームを即座に閉じる．</p></dd><dt><span class="term">search db = <em class="replaceable"><code>BOOLEAN</code></em> (デフォルト:
          <span class="emphasis"><em>no</em></span>) <span class="type">(V)</span></span></dt><dd><p>低速な再帰的ファイルシステム検索の代わりに高速な CNID データベースの名前検索を用いる．矛盾のない CNID データベースを信頼する，すなわち Samba やローカルのファイルシステムのアクセスが不正確さらには誤った結果を招く．"dbd" CNID db のボリュームのみで動作する．</p></dd><dt><span class="term">stat vol = <em class="replaceable"><code>BOOLEAN</code></em> (デフォルト:
          <span class="emphasis"><em>yes</em></span>) <span class="type">(V)</span></span></dt><dd><p>ボリュームリストを列挙するときにボリュームパスを stat するかどうか．オートマウントや preexec スクリプトで作成されたボリュームに有用である．</p></dd><dt><span class="term">time machine = <em class="replaceable"><code>BOOLEAN</code></em> (デフォルト:
          <span class="emphasis"><em>no</em></span>) <span class="type">(V)</span></span></dt><dd><p>このボリュームの Time Machine サポートを有効にするかどうか．</p></dd><dt><span class="term">unix priv = <em class="replaceable"><code>BOOLEAN</code></em> (デフォルト:
          <span class="emphasis"><em>yes</em></span>) <span class="type">(V)</span></span></dt><dd><p>AFP3 UNIX 権限を使うかどうか．これは OS X クライアントに対しては設定すべきである．<code class="option">file perm</code>， <code class="option">directory perm</code> 及び <code class="option">umask</code> も参照．</p></dd></dl></div></div></div><div class="refsect1"><a id="id-1.8.4.11"></a><h2>CNID バックエンド</h2><p>AFP プロトコルはたいていはファイルとディレクトリを名前ではなく ID で参照する．Netatalk はこの ID を永続的な方法で保管する方法を必要とする．これを達成するためにいくつかの異なる CNID バックエンドが用意されている．CNID データベースはデフォルトで <code class="filename">/var/local/netatalk/CNID/(volumename)/.AppleDB/</code> ディレクトリに置かれている．</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">cdb</span></dt><dd><p>"Concurrent database" バックエンドは Oracle Berkeley DB を基礎としている．このバックエンドだと，いくつかの <span class="command"><strong>afpd</strong></span> デーモンが直接 CNID データベースにアクセスする．もし一つのボリュームあたり，一つ以上の <span class="command"><strong>afpd</strong></span> プロセスがアクティブならば，Berkeley DB ロッキングがアクセスを同期するために用いられる．欠点は単一の <span class="command"><strong>afpd</strong></span> プロセスのクラッシュがデータベースを壊すかもしれないということである．</p></dd><dt><span class="term">dbd</span></dt><dd><p>CNID データベースへのアクセスは <span class="command"><strong>cnid_metad</strong></span> デーモンプロセスによって制限されている．<span class="command"><strong>afpd</strong></span> プロセスはこのデーモンとデータベースの読み込みと更新のために通信する．もし Berkeley DB トランザクションとでビルドすれば，データベースの壊れる可能性は経験的にはゼロである． しかし，パフォーマンスは <code class="option">cdb</code> とによるものより遅いかもしれない．</p></dd><dt><span class="term">last</span></dt><dd><p>このバックエンドは，ID の持続性の点では，例外である．ID はカレントセッションでしか有効ではない．これは基本的には <span class="command"><strong>afpd</strong></span> がバージョン 1.5（と1.6）で行ったことである．このバックエンドは，例えば共有 CD-ROM などで有用なので未だに有効である．Netatalk 3.0 からは，これは自動的に<span class="emphasis"><em>読み込み専用モード</em></span>になる．</p><p><span class="bold"><strong>警告</strong></span>: 今や <span class="command"><strong>afpd</strong></span> が持続性のある ID データベースに重く依存しているので，このバックエンドをボリュームに使用するのはもはや推奨<span class="emphasis"><em>されていない</em></span>．エイリアスはおそらく機能しないだろうし，ファイル名のマングリングもサポートされていない．</p></dd></dl></div><p><span class="command"><strong>./configure --help</strong></span> で他の有効なバックエンドがあると表示するかもしれない．にも関わらずそれらは壊れていることもありえるし，あるいは主にテストのために使われていることを注意すべきである． あなたが何をしているのかわかっている場合以外はそれらを使用してはならない．それらは将来のバージョンでそれ以上の通告なく除去されるかもしれない．</p></div><div class="refsect1"><a id="id-1.8.4.12"></a><h2>文字セットオプション</h2><p>OS XでAppleはAFP3プロトコルを導入した。最も重要な変更の一つは、AFP3は分解済UTF-8 としてエンコードされたUnicode名を用いることである。以前のAFP及びOSバージョンはMacRomanやMacCentralEuropeといったコードページを用いた。</p><p><span class="command"><strong>afpd</strong></span>がunixファイルシステム上にファイルを保存するとき、拡張されたMacintosh文字やunixファイル名としては不正な文字を維持する方法が必要である。現在のバージョンは今、名前のためのデフォルトエンコーディングとしてUTF-8を用いる。「<span class="keycode">/</span>」は「<span class="keycode">:</span>」に変換される。</p><p>初期のバージョンはいわゆるCAPエンコーディングを用いた。一つの拡張文字(&gt;0x7F)は一つの :xx シーケンスに変換された。例えば、Appleロゴ (MacRoman: 0xF0)は<code class="literal">:f0</code>として保存された。幾つかの特殊な文字も :xx表記として変換された。「<span class="keycode">/</span>」は<code class="literal">:2f</code>にエンコードされ、先頭のドット「<span class="keycode">.</span>」は<code class="literal">:2e</code>にエンコードされた。</p><p><code class="option">vol charset</code>オプションは他のボリュームエンコーディングを選べるようにする。<span class="command"><strong>afpd</strong></span>は
    <span class="citerefentry"><span class="refentrytitle"><span class="command"><strong>iconv</strong></span></span>(1)</span>
    が提供する如何なる文字セットも受け入れる。デフォルトのUTF-8を使うことをを強く推奨する。</p></div><div class="refsect1"><a id="id-1.8.4.13"></a><h2>参照</h2><p><span class="citerefentry"><span class="refentrytitle">afpd</span>(8)</span>, <span class="citerefentry"><span class="refentrytitle">afppasswd</span>(5)</span>, <span class="citerefentry"><span class="refentrytitle">afp_signature.conf</span>(5)</span>, <span class="citerefentry"><span class="refentrytitle">extmap.conf</span>(5)</span>, <span class="citerefentry"><span class="refentrytitle">cnid_metad</span>(8)</span></p></div><div class="refsect1"><a id="id-1.8.4.14"></a><h2>著作者</h2><p><a class="ulink" href="https://github.com/Netatalk/netatalk/blob/main/CONTRIBUTORS" target="_top">CONTRIBUTORS</a>を参照</p></div></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="ad.1.html">戻る</a> </td><td width="20%" align="center"><a accesskey="u" href="man-pages.html">上に戻る</a></td><td width="40%" align="right"> <a accesskey="n" href="afp_signature.conf.5.html">次へ</a></td></tr><tr><td width="40%" align="left" valign="top">ad </td><td width="20%" align="center"><a accesskey="h" href="index.html">ホーム</a></td><td width="40%" align="right" valign="top"> afp_signature.conf</td></tr></table></div></body>
</html>
