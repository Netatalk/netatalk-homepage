<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>Netatalk Wiki - FAQ</title>
    <meta name="description" content="Netatalk Wiki">
    <link rel="canonical" href="https://netatalk.io/docs/FAQ">
    <link rel="stylesheet" type="text/css" href="https://netatalk.io/css/site.css" />
    <link rel="icon" type="image/x-icon" href="https://netatalk.io/gfx/favicon.ico" />
</head>
<body>
<div id="header">
    <div id="logo"></div>
    <div id="menlinks">
        <a href="/" title="Return to Netatalk home">[main]</a>
        <a href="/docs" title="Netatalk Wiki">[wiki]</a>
        <a href="/documentation.html" title="Netatalk Manual">[documentation]</a>
        <a href="/download.html" title="Download Netatalk">[downloads]</a>
        <a href="/support.html" title="Support">[support]</a>
        <a href="/links.html" title="Netatalk related links">[links]</a>
        <img src="/gfx/end.gif" alt="" width="125" height="7" />
    </div>
</div>

<div id="header-print">
    <h1>netatalk.io</h1>
</div>

<div class="search">
    <h2>search netatalk.io</h2>
    <form method="get" action="https://www.google.com/search">
        <p>
            <input type="text" name="q" size="10" maxlength="255" value="" title="enter search text" />
            <input type="hidden" name="sitesearch" value="netatalk.io" />
            <input type="submit" name="btnG" value="Go" title="search netatalk.io" />
        </p>
    </form>
    <span class="italic">powered by Google</span>
</div>

<div id="navbars">
<div class="navbar">
<h2>Table of contents</h2>
<p>Resources</p>
<ul>
<li><a class="wikilink" href="/docs/FAQ.html">FAQ</a></li>
<li><a class="wikilink" href="/docs/Troubleshooting.html">Troubleshooting</a></li>
<li><a class="wikilink" href="/docs/Connect-to-AFP-Server.html">Connect to AFP Server</a></li>
<li><a class="wikilink" href="/docs/Webmin-Module.html">Webmin Module</a></li>
<li><a class="wikilink" href="/docs/Benchmarks.html">Benchmarks</a></li>
</ul>
<p>OS Specific Guides</p>
<ul>
<li><a class="wikilink" href="/docs/Installing-Netatalk-on-Alpine-Linux.html">Installing Netatalk on Alpine Linux</a></li>
<li><a class="wikilink" href="/docs/Installing-Netatalk-on-Debian-Linux.html">Installing Netatalk on Debian Linux</a></li>
<li><a class="wikilink" href="/docs/Installing-Netatalk-on-Fedora-Linux.html">Installing Netatalk on Fedora Linux</a></li>
<li><a class="wikilink" href="/docs/Installing-Netatalk-on-FreeBSD.html">Installing Netatalk on FreeBSD</a></li>
<li><a class="wikilink" href="/docs/Installing-Netatalk-on-macOS.html">Installing Netatalk on macOS</a></li>
<li><a class="wikilink" href="/docs/Installing-Netatalk-on-NetBSD.html">Installing Netatalk on NetBSD</a></li>
<li><a class="wikilink" href="/docs/Installing-Netatalk-on-OmniOS.html">Installing Netatalk on OmniOS</a></li>
<li><a class="wikilink" href="/docs/Installing-Netatalk-on-OpenBSD.html">Installing Netatalk on OpenBSD</a></li>
<li><a class="wikilink" href="/docs/Installing-Netatalk-on-OpenIndiana.html">Installing Netatalk on OpenIndiana</a></li>
<li><a class="wikilink" href="/docs/Installing-Netatalk-on-openSUSE.html">Installing Netatalk on openSUSE</a></li>
<li><a class="wikilink" href="/docs/Installing-Netatalk-on-Solaris.html">Installing Netatalk on Solaris</a></li>
<li><a class="wikilink" href="/docs/Installing-Netatalk-on-Ubuntu.html">Installing Netatalk on Ubuntu</a></li>
</ul>
<p>Technical Docs</p>
<ul>
<li><a class="wikilink" href="/docs/CatalogSearch.html">CatalogSearch</a></li>
<li><a class="wikilink" href="/docs/Kerberos.html">Kerberos</a></li>
<li><a class="wikilink" href="/docs/Special-Files-and-Folders.html">Special Files and Folders</a></li>
<li><a class="wikilink" href="/docs/Spotlight.html">Spotlight</a></li>
<li><a class="wikilink" href="/docs/AppleTalk-Kernel-Module.html">AppleTalk Kernel Module</a></li>
<li><a class="wikilink" href="/docs/Print-Server.html">Print Server</a></li>
<li><a class="wikilink" href="/docs/MacIP-Gateway.html">MacIP Gateway</a></li>
</ul>
<p>Development</p>
<ul>
<li><a class="wikilink" href="/docs/Developer-Notes.html">Developer Notes</a></li>
<li><a class="wikilink" href="/docs/Developer-FAQ.html">Developer FAQ</a></li>
<li><a class="wikilink" href="/docs/Work-with-Documentation.html">Work with Documentation</a></li>
<li><a class="wikilink" href="/docs/Release-Process.html">Release Process</a></li>
<li><a class="wikilink" href="/docs/Using-GDB-to-Analyze-a-Crash.html">Using GDB to Analyze a Crash</a></li>
</ul>
</div></div>
<div id="content">
<h1 id="FAQ">FAQ</h1><hr/>
<h2>What is Netatalk for? What can I do with it?</h2>
<p>Netatalk is an Open Source software package, that can be used to turn an
inexpensive *NIX machine into an extremely performant and reliable file
and print server for Macintosh computers.</p>
<p>Using Netatalk&rsquo;s AFP 3 compliant file-server leads to significantly
higher transmissions speeds for older Macs compared with accessing a
server via Samba/NFS while providing clients with the best user
experience (full support for Macintosh metadata, flawlessly supporting
mixed environments of classic Mac OS and Mac OS X / macOS clients).</p>
<h2>What changed between Netatalk 3.x and 4.x?</h2>
<p>Netatalk v4 brings back AFP-over-AppleTalk support, as well as essential AppleTalk networking and PAP printing utilities.</p>
<p>It also bundles Stefan Bethke&rsquo;s <code>macipgw</code> MacIP Gateway daemon, which enables networking for Macs without direct access to a TCP/IP network.</p>
<p>See the <a href="https://netatalk.io/4.0/ReleaseNotes-4.0.0">release notes for Netatalk 4.0.0</a>.</p>
<h2>What changed between Netatalk 2.x and 3.x?</h2>
<p>Netatalk v3 supports Mac OS X / macOS style filesystem metadata, while providing seamless
interoperability with Samba. It is compliant with AFP 3.4, which was the final revision of the
protocol, and supports Spotlight in version 3.1 and later.</p>
<p>However, it is less useful for Classic Mac OS or Apple II clients,
because AppleTalk support was removed, and with it the ability to connect with
AFP 2.1 clients or earlier.</p>
<p>See the <a href="https://netatalk.io/3.0/ReleaseNotes-3.0">release notes for Netatalk 3.0.0</a>.</p>
<h2>What changed between Netatalk 1.x and 2.x?</h2>
<p>Let&rsquo;s have a look at what has changed compared to 1.6.4:</p>
<ol>
<li>Netatalk&rsquo;s file server, afpd, now speaking AFP 3.1 allows long
    filenames, UTF-8 names, large file support and full Mac OS X
    compatibility</li>
<li>The print server task, papd, can directly interact with CUPS,
    automagically sharing all CUPS queues</li>
<li>Kerberos V support, allowing true &ldquo;Single Sign On&rdquo;</li>
<li>Whole rework of the CNID subsystem, providing reliable and
    persistent storage of file and directory IDs</li>
<li>Huge improvements regarding product documentation making Netatalk&rsquo;s
    features accessible more easily</li>
<li>Tons of bugs fixed compared to all previous versions</li>
</ol>
<p>To make a long story short, everyone not using symlinks inside Netatalk
shares (this violation of AFP specs is not supported any longer) and
willing to complete the sometimes extensive upgrade process should
switch to 2.0. But be sure to read carefully the chapter about upgrading
in the docs first.</p>
<p>See the <a href="https://netatalk.io/2.0/ReleaseNotes2.0.0">release notes for Netatalk 2.0.0</a>.</p>
<h2>I think I found a bug in Netatalk. Where should I report it?</h2>
<p>First of all, try to isolate the problem and see whether it&rsquo;s not a
feature instead (some of the underlying Mac-related basics like
file/folder IDs and the like, look irritating for people newly entering
the world of cross-platform networking)</p>
<p>Then have a look in the <a href="https://github.com/Netatalk/netatalk/issues">Netatalk issue tracker</a>
whether it&rsquo;s a known bug that is already being worked on.</p>
<p>If that doesn&rsquo;t help, consider asking at the Netatalk mailing lists or an online forum whether others
might have an idea what&rsquo;s going on.</p>
<p>Before asking, try to understand and accept the basic
principles for reporting bugs and asking for help. If you&rsquo;re finally sure
you found a bug, then please report it at the issue tracker.</p>
<p>In case, the developers want you to provide more details about crashing
processes, have a look at <a class="wikilink" href="/docs/Using-GDB-to-Analyze-a-Crash.html">Using GDB to Analyze a Crash</a>.</p>
<h2>Which CNID scheme should I choose for my volumes?</h2>
<p>In the vast majority of scenarios, use <code>dbd</code>.</p>
<p>The <code>last</code> backend is only suitable for sharing HFS CD-ROMs directly
with Netatalk. Avoid if at all possible as this backend can lead to
duplicate IDs which can cause data loss!</p>
<p>The <code>mysql</code> backend is useful for very large deployments with hundreds of
thousands or millions of files shared, where performance and reliability
is of utmost importance. The drawback is that you have to configure
and operate a separate MySQL database instance by yourself.</p>
<h2>I want to create a new volume to share via Netatalk. How should I start?</h2>
<p>Always follow these steps unless you know exactly what you do:</p>
<ul>
<li>Create the sharepoint on the Unix side with appropriate permissions.
    This means setting the SGID bit as well, so the old AppleShare
    semantics (always treating files/folders with the permissions that
    apply to the surrounding folder) will work flawlessly. So do not use
    chmod 775 but chmod 2775 instead.</li>
<li>Then decide which volume charset to use (it is strongly recommended
    to use the default UTF8 volcharset but in some special cases it
    might make sense to use another encoding like ISO-8859-15, instead.)</li>
<li>Choose a CNID backend, in general this means &ldquo;dbd&rdquo; (see the chapter
    about CNID backends in the manual)</li>
<li>Finally add an entry in your configuration file and connect from a
    Mac to the volume, to see if things work.</li>
</ul>
<h2>How does Netatalk integrate with Samba?</h2>
<p>It depends. While Netatalk 3.x integrates almost flawlessly with Samba, there are a couple of problems when using Netatalk 2.x and earlier:</p>
<ul>
<li>Filename/foldername encoding: By default both Netatalk 2.x and Samba
    3.0 use UTF-8 precomposed on the server side. So at a first look,
    this problem is solved.</li>
<li>&ldquo;Illegal&rdquo; names, that make Windows choke, are still a problem. There
    exists an
    <a href="http://netatalk.sourceforge.net/oldstable/htmldocs/AppleVolumes.default.5.html">AppleVolumes</a>
    option called <code>mswindows</code>, which will prevent Mac clients from
    saving such names (Netatalk v2 only.) But this leads to Netatalk&rsquo;s afpd breaking the
    AFP specifications and is no real solution (like a working Samba VFS
    module, that mangles such names on demand in a sane way, would be).
    Additionally, this option breaks saving to Netatalk volumes for
    several applications, i.e. OfficeX.</li>
<li>Hiding the metadata stuff from the other platform: You might want to
    hide all the directories and files described in the <a class="wikilink" href="/docs/Special-Files-and-Folders.html">Special Files and Folders</a> entry by using
    Samba&rsquo;s veto option. You can do the same for Mac clients too using
    Netatalk&rsquo;s veto option. For samba:</li>
</ul>
<pre><code>veto files = /:2eFBCLockFolder/.FBCLockFolder/:2eFBCIndex/.FBCIndex/TheVolumeSettingsFolder/TheFindByContentFolder/Temporary Items/\
             Network Trash Folder/.AppleDB/:2eVolumeIcon.icns/.VolumeIcon.icns/Icon/.AppleDouble/.AppleDesktop/desktop.ini/RECYCLER/
delete veto files = Yes
</code></pre>
<ul>
<li>File locking: partially working as Netatalk is using POSIX locks and SAMBA uses them too. But SAMBA usually also uses oplocks which should be disabled for interoperating with Netatalk. More importantly, open modes are not synchronized. Thus Samba will now nothing of a deny read/write open <a href="http://developer.apple.com/library/mac/#documentation/Networking/Conceptual/AFP/FileSharingModes/FileSharingModes.html%23//apple_ref/doc/uid/TP40000854-CH233-CHBDEIJE">AFP mode</a> from an AFP client and vice versa.</li>
</ul>
<h2>What are the .AppleDouble and .AppleDB? directories and .Parent files which are created in the Netatalk Shares?</h2>
<p>These are described at the <a class="wikilink" href="/docs/Special-Files-and-Folders.html">Special Files and Folders</a> page.</p>
<h2>Why can&rsquo;t I mount more than one server?</h2>
<p>When trying to mount multiple independent servers running Netatalk, you
might run into a problem where the workstation thinks that the second
server is the same as the first one that was mounted. This problem is
often due to what the /etc/hosts file looks like.</p>
<p>&ldquo;Out of the box&rdquo; /etc/hosts often looks like:</p>
<pre><code>127.0.0.1 localhost.localdomain localhost
&lt;some ip addr&gt; hostname.domainname hostname
</code></pre>
<p>Netatalk will look at the first line to find out what server it&rsquo;s
running on. If both servers you&rsquo;re trying to mount have identical first
lines in /etc/hosts, Netatalk will think it&rsquo;s trying to access the first
server you mounted.</p>
<p>The solution, in my hands and as suggested by several members of the
Netatalk mailing list, is to change the order of entries in /etc/hosts.
In the example given above, this could be done simply by changing it to:</p>
<pre><code>&lt;some ip addr&gt; hostname.domainname hostname
127.0.0.1 localhost.localdomain localhost
</code></pre>
<p>That is, reversing the order.</p>
<h2>How can I check the consistency of the CNID databases?</h2>
<p>Starting with Netatalk 2.1 there&rsquo;s a dedicated and versatile utility
exactly for this purpose:
<a href="https://netatalk.io/stable/htmldocs/dbd.1.html">dbd</a>.</p>
<h2>How do I pronouce netatalk?</h2>
<p>Ah, good question! The unenlightened often mispronounce this word 'net-&lsquo;a-to.k. The correct pronunciation is 'ned-*-to.k\ (the &lsquo;t&rsquo; is soft, like d, and the first &lsquo;a&rsquo; is a schwa).</p>
<p><img alt="Netatalk pronunciation guide" src="https://netatalk.io/gfx/nedetok.gif" /></p>
<h2>What is the Netatalk logo?</h2>
<p>The Netatalk logo depicts a stylized <a href="https://en.wikipedia.org/wiki/BSD_Daemon">BSD Daemon</a> on top of an <a href="https://en.wikipedia.org/wiki/AppleShare">AppleShare</a> serving tray, hooked up to a daisy-chained <a href="https://en.wikipedia.org/wiki/LocalTalk">LocalTalk</a> network.</p>
<table>
<thead>
<tr>
<th>Logo</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><img src="https://netatalk.io/gfx/afpd-icon.gif" alt="Netatalk Logo" width="128px" height="auto"></td>
<td>Its first appearance was as a custom AppleShare volume icon, <a href="https://github.com/Netatalk/netatalk/blob/main/etc/afpd/icon.h">encoded in the project&rsquo;s source code</a> since at least 1994 (version 1.3).</td>
</tr>
<tr>
<td><img src="https://netatalk.io/gfx/daemon.gif" alt="Netatalk Logo"></td>
<td>In the early 2000s, a colorized version of the Netatalk Daemon was featured on the <a href="http://web.archive.org/web/20030207075049/http://rsug.itd.umich.edu/software/netatalk.html">UMich project website</a>.</td>
</tr>
<tr>
<td><img src="https://netatalk.io/gfx/logo-new.png" alt="Netatalk Logo" width="128px" height="auto"></td>
<td>The present design was <a href="https://netatalk.io/2.0/Netatalk-Manual.pdf">introduced in 2005</a> in the documentation for Netatalk 2.0, where the Daemon has been reduced to a silhouette, overlaid with twisted network cables.</td>
</tr>
</tbody>
</table><hr />
    <p>
        This is a mirror of the Netatalk GitHub Wiki.
        Please <a href="https://github.com/Netatalk/netatalk/wiki/FAQ">visit the original page</a>
        if you want to correct an error or contribute new contents.
    </p>
    <p>Last updated 2024-10-02</p>
    <hr />
    </div>
<div class="footer">
    <a href="https://validator.w3.org/check?uri=referer">
      <img src="https://www.w3.org/Icons/valid-xhtml10" alt="Valid XHTML 1.0 Strict" height="31" width="88" />
    </a>
    <a href="https://jigsaw.w3.org/css-validator/check?uri=referer">
      <img style="border:0;width:88px;height:31px"
      src="https://jigsaw.w3.org/css-validator/images/vcss" alt="Valid CSS!" />
    </a>
</div>
</body>
</html>

