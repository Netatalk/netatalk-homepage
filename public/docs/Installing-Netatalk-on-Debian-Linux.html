<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>Netatalk Wiki - Installing Netatalk on Debian Linux</title>
    <meta name="description" content="Netatalk Wiki">
    <link rel="canonical" href="https://netatalk.io/docs/Installing-Netatalk-on-Debian-Linux">
    <link rel="stylesheet" type="text/css" href="https://netatalk.io/css/site.css" />
    <link rel="icon" type="image/x-icon" href="https://netatalk.io/gfx/favicon.ico" />
</head>
<body>
<div id="header">
    <div id="logo"></div>
    <div id="menlinks">
        <a href="/" title="Return to Netatalk home">[main]</a>
        <a href="/docs" title="Netatalk Wiki">[wiki]</a>
        <a href="/documentation.html" title="Netatalk Manual">[documentation]</a>
        <a href="/download.html" title="Download Netatalk">[downloads]</a>
        <a href="/support.html" title="Support">[support]</a>
        <a href="/links.html" title="Netatalk related links">[links]</a>
        <img src="/gfx/end.gif" alt="" width="125" height="7" />
    </div>
</div>

<div id="header-print">
    <h1>netatalk.io</h1>
</div>

<div class="search">
    <h2>search netatalk.io</h2>
    <form method="get" action="https://www.google.com/search">
        <p>
            <input type="text" name="q" size="10" maxlength="255" value="" title="enter search text" />
            <input type="hidden" name="sitesearch" value="netatalk.io" />
            <input type="submit" name="btnG" value="Go" title="search netatalk.io" />
        </p>
    </form>
    <span class="italic">powered by Google</span>
</div>

<div id="navbars">
<div class="navbar">
<h2>Table of contents</h2>
<p>Resources</p>
<ul>
<li><a class="wikilink" href="/docs/FAQ.html">FAQ</a></li>
<li><a class="wikilink" href="/docs/Troubleshooting.html">Troubleshooting</a></li>
<li><a class="wikilink" href="/docs/Connect-to-AFP-Server.html">Connect to AFP Server</a></li>
<li><a class="wikilink" href="/docs/Webmin-Module.html">Webmin Module</a></li>
<li><a class="wikilink" href="/docs/Benchmarks.html">Benchmarks</a></li>
</ul>
<p>OS Specific Guides</p>
<ul>
<li><a class="wikilink" href="/docs/Installing-Netatalk-on-Alpine-Linux.html">Installing Netatalk on Alpine Linux</a></li>
<li><a class="wikilink" href="/docs/Installing-Netatalk-on-Debian-Linux.html">Installing Netatalk on Debian Linux</a></li>
<li><a class="wikilink" href="/docs/Installing-Netatalk-on-Fedora-Linux.html">Installing Netatalk on Fedora Linux</a></li>
<li><a class="wikilink" href="/docs/Installing-Netatalk-on-FreeBSD.html">Installing Netatalk on FreeBSD</a></li>
<li><a class="wikilink" href="/docs/Installing-Netatalk-on-macOS.html">Installing Netatalk on macOS</a></li>
<li><a class="wikilink" href="/docs/Installing-Netatalk-on-NetBSD.html">Installing Netatalk on NetBSD</a></li>
<li><a class="wikilink" href="/docs/Installing-Netatalk-on-OmniOS.html">Installing Netatalk on OmniOS</a></li>
<li><a class="wikilink" href="/docs/Installing-Netatalk-on-OpenBSD.html">Installing Netatalk on OpenBSD</a></li>
<li><a class="wikilink" href="/docs/Installing-Netatalk-on-OpenIndiana.html">Installing Netatalk on OpenIndiana</a></li>
<li><a class="wikilink" href="/docs/Installing-Netatalk-on-openSUSE.html">Installing Netatalk on openSUSE</a></li>
<li><a class="wikilink" href="/docs/Installing-Netatalk-on-Solaris.html">Installing Netatalk on Solaris</a></li>
<li><a class="wikilink" href="/docs/Installing-Netatalk-on-Ubuntu.html">Installing Netatalk on Ubuntu</a></li>
</ul>
<p>Technical Docs</p>
<ul>
<li><a class="wikilink" href="/docs/CatalogSearch.html">CatalogSearch</a></li>
<li><a class="wikilink" href="/docs/Kerberos.html">Kerberos</a></li>
<li><a class="wikilink" href="/docs/Special-Files-and-Folders.html">Special Files and Folders</a></li>
<li><a class="wikilink" href="/docs/Spotlight.html">Spotlight</a></li>
<li><a class="wikilink" href="/docs/AppleTalk-Kernel-Module.html">AppleTalk Kernel Module</a></li>
<li><a class="wikilink" href="/docs/Print-Server.html">Print Server</a></li>
<li><a class="wikilink" href="/docs/MacIP-Gateway.html">MacIP Gateway</a></li>
</ul>
<p>Development</p>
<ul>
<li><a class="wikilink" href="/docs/Developer-Notes.html">Developer Notes</a></li>
<li><a class="wikilink" href="/docs/Developer-FAQ.html">Developer FAQ</a></li>
<li><a class="wikilink" href="/docs/Work-with-Documentation.html">Work with Documentation</a></li>
<li><a class="wikilink" href="/docs/Release-Process.html">Release Process</a></li>
<li><a class="wikilink" href="/docs/Using-GDB-to-Analyze-a-Crash.html">Using GDB to Analyze a Crash</a></li>
</ul>
</div></div>
<div id="content">
<h1 id="Installing-Netatalk-on-Debian-Linux">Installing Netatalk on Debian Linux</h1><hr/>
<h1>Install the latest Netatalk</h1>
<p><a href="https://tracker.debian.org/pkg/netatalk">Netatalk</a> is distributed as a deb package in all Debian releases except Debian 12 Bookworm. You can install it with <code>apt</code> and other package managers.</p>
<p>The recent release series at the time of writing, we distribute Debian deb packages built for Bookworm amd64 together with Debian releases. See the assets attached with releases on GitHub.</p>
<p>For building and installing from source yourself, find links to the official documentation below.</p>
<ul>
<li><strong><a href="https://netatalk.io/stable/htmldocs/compile#build-debian">Compile Netatalk from Source: Debian</a></strong> in the Manual</li>
<li><strong><a href="https://github.com/Netatalk/netatalk/blob/main/INSTALL.md">INSTALL.md</a></strong> in the source tree</li>
</ul>
<h1>Installation</h1>
<p>This guide was written for Netatalk 2.4.x for the legacy Autotools build system. In most cases, you want to follow the instructions in the links at the top of this page to install a later version instead.</p>
<p>Install dependent packages with the package manager of your choice.
Some of these are mandatory to build and run netatalk; others are optional and provide additional functionality.</p>
<pre><code>$ sudo apt install \
    autoconf \
    automake \
    docbook-xsl \
    libacl1-dev \
    libavahi-client-dev \
    libcrack2-dev \
    libcups2-dev \
    libdb-dev \
    libgcrypt-dev \
    libkrb5-dev \
    libldap2-dev \
    libltdl-dev \
    libpam0g-dev \
    libssl-dev \
    libtirpc-dev \
    libtool \
    libtool-bin \
    libwrap0-dev \
    quota \
    tcpd \
    xsltproc
</code></pre>
<h2>Mandatory packages</h2>
<ul>
<li><code>libdb-dev</code> (BerkeleyDB) is used for the default CNID backend, which stores a database of the shared volumes.</li>
<li><code>libgcrypt20-dev</code> is used for the DHX2 UAM, which is required to authenticate with macOS (Mac OS X) clients.</li>
</ul>
<p>Depending on your Debian version, if you don&rsquo;t already have a C compiler and make installed, you may also need <code>build-essential</code>.</p>
<h2>Optional packages (generally useful)</h2>
<ul>
<li><code>libssl-dev</code> is used for the DHX and RandNum UAMs, which provide encrypted authentication with Classic Mac OS clients. <strong>NOTE</strong> OpenSSL 1.1 is the only supported version. OpenSSL 3.0 removed support for DHX cryptography.</li>
<li><code>libcups2-dev</code> is required for CUPS printing support (papd).</li>
<li><code>libavahi-client-dev</code> is required for zeroconf support, which macOS (Mac OS X) uses for service discovery.</li>
<li><code>libpam0g-dev</code> may be required to build with PAM authentication support.</li>
</ul>
<h2>Optional packages (specialized use cases)</h2>
<ul>
<li><code>autoconf automake libtool libtool-bin libltdl-dev</code> are used to bootstrap the source code for building with GNU Autotools. If you are using code from a release tarball, you don&rsquo;t need them.</li>
<li><code>libacl1-dev libldap2-dev</code> are for ACL/LDAP identity and access management.</li>
<li><code>libkrb5-dev</code> will enable the Kerberos UAM for single sign-on support.</li>
<li><code>libtirpc-dev quota</code> are for file system quota support.</li>
<li><code>libwrap0-dev tcpd</code> are for TCP wrapper support.</li>
<li><code>libcrack2-dev</code> enables password checking for the RandNum UAM.</li>
<li><code>docbook-xsl xsltproc</code> are needed to build the html manual.</li>
</ul>
<p>Description of all dependencies can be found in the <a href="https://netatalk.io/oldstable/htmldocs/installation#idm103">Installation chapter of the Netatalk manual</a></p>
<h2>Build the code</h2>
<p>Get the latest release tarball of Netatalk 2, or clone the netatalk git
repository and check out the latest bleeding-edge Netatalk 2 branch.</p>
<p>If you chose the latter option, you need to first bootstrap the build
system with autoconf to generate the configure script.</p>
<pre><code>$ git clone https://github.com/Netatalk/netatalk.git -b branch-netatalk-2-4 netatalk2
$ ./bootstrap
</code></pre>
<p>Run the configure script with the following parameters, then compile and
install the software:</p>
<pre><code>$ ./configure --enable-systemd --sysconfdir=/etc --with-uams-path=/usr/lib/netatalk
$ make all
$ sudo make install
</code></pre>
<p>If this process finishes without errors, you should now have the
Netatalk software installed on your system. The next step is to tweak
the configuration.</p>
<p>First off, decide on the directory(ies) that you want to share, as well
as the user that you want sharing them. You will need the Linux username
and password of the user to access the shared directories, and due to
limitations of classic Mac OS the password cannot be longer than 8
characters.</p>
<p>The following example uses the a user called &ldquo;pi&rdquo;, a single shared
directory, and a single routerless AppleTalk network without Zones.</p>
<pre><code>$ mkdir ~/afpshare $ chmod 2775 ~/afpshare
</code></pre>
<p>Edit the following configuration files:</p>
<pre><code>$ sudo pico /etc/netatalk/AppleVolumes.default
</code></pre>
<p>At the bottom of the file, add this line:</p>
<pre><code>/home/pi/afpshare &quot;File Server&quot;
</code></pre>
<p>Tip: You can append <code>adouble:v1 volcharset:ASCII</code> if you are having
issues with very old versions of Mac OS.</p>
<p>Next file to edit:</p>
<pre><code>$ sudo pico /etc/netatalk/afpd.conf
</code></pre>
<p>Add this to the bottom of the file:</p>
<pre><code>- -transall -uamlist uams_guest.so,uams_clrtxt.so,uams_dhx2.so -nosavepassword
</code></pre>
<p>You may customize the <code>-uamlist</code> option to disable and enable various
authentication methods. For instance, remove uams_guest.so if you want
to disallow guest access.</p>
<p>Note that the <code>-nosavepassword</code> is for additional security, and you may
opt omit this if you&rsquo;re on a private network.</p>
<p>If your Mac OS system is using a codepage different from MAC_ROMAN, e.g.
MAC_CYRILLIC, you can specify this in <code>-maccodepage</code>. See the afpd.conf
documentation for more info. Similarly, if your host system uses a
different codepage than UTF-8, you can specify that with
<code>-unixcodepage</code>.</p>
<p>For troubleshooting, append something like this:</p>
<pre><code>-setuplog &quot;default log_maxdebug /var/log/afpd.log&quot;
</code></pre>
<p>See the man page for &lsquo;afpd.conf&rsquo; for a breakdown of all of the options
available.</p>
<p>(Optional - Netatalk will autodetect the network in most cases) Finally,
edit this file:</p>
<pre><code>$ sudo pico /etc/netatalk/atalkd.conf
</code></pre>
<p>Specify the interface you want Netatalk to use by adding this to the
bottom of the file using eth0 as an example:</p>
<pre><code>eth0
</code></pre>
<p>If you are running into issues connecting to your File Server, you can
try to change this line to:</p>
<pre><code>eth0 -phase 2 -net 0-65534 -addr 65280.163
</code></pre>
<h2>AppleTalk Support in Kernel</h2>
<p>In order to use AppleShare / AFP over AppleTalk (DDP) the Linux system
must have an AppleTalk networking stack. Luckily, Debian&rsquo;s Linux kernel
comes with a module called &ldquo;appletalk&rdquo;, which provides this
functionality. Without an AppleTalk networking stack, you will only be
able to use Netatalk with TCP.</p>
<p>To check if your kernel has AppleTalk support, issue this command and
inspect the output:</p>
<pre><code>$ lsmod | grep appletalk
</code></pre>
<p>If the module isn&rsquo;t detected, try launching <strong>atalkd</strong> first and try
again. If <strong>atalkd</strong> errors out complaining about &ldquo;Address family not
supported by protocol&rdquo;, you may have to try another version of Linux, or
compile the Linux kernel yourself. There are guides elsewhere on this
topic that you can follow.</p>
<h1>Using Netatalk</h1>
<p>At this point, you should be able to run the Netatalk daemons on your
system.</p>
<pre><code>$ sudo systemctl enable atalkd.service afpd.service cnid.service
$ sudo systemctl start atalkd.service afpd.service cnid.service
</code></pre>
<p>Optional services:</p>
<pre><code>$ sudo systemctl enable papd.service timelord.service a2boot.service
$ sudo systemctl start papd.service timelord.service a2boot.service
</code></pre><hr />
    <p>
        This is a mirror of the Netatalk GitHub Wiki.
        Please <a href="https://github.com/Netatalk/netatalk/wiki/Installing-Netatalk-on-Debian-Linux">visit the original page</a>
        if you want to correct an error or contribute new contents.
    </p>
    <p>Last updated 2024-10-02</p>
    <hr />
    </div>
<div class="footer">
    <a href="https://validator.w3.org/check?uri=referer">
      <img src="https://www.w3.org/Icons/valid-xhtml10" alt="Valid XHTML 1.0 Strict" height="31" width="88" />
    </a>
    <a href="https://jigsaw.w3.org/css-validator/check?uri=referer">
      <img style="border:0;width:88px;height:31px"
      src="https://jigsaw.w3.org/css-validator/images/vcss" alt="Valid CSS!" />
    </a>
</div>
</body>
</html>

