<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>Netatalk Wiki - Installing Netatalk 3 on OpenIndiana</title>
    <meta name="description" content="Netatalk Wiki">
    <link rel="canonical" href="https://netatalk.io/docs/Installing-Netatalk-3-on-OpenIndiana">
    <link rel="stylesheet" type="text/css" href="https://netatalk.io/css/site.css" />
    <link rel="icon" type="image/x-icon" href="https://netatalk.io/gfx/favicon.ico" />
</head>
<body>
    <div id="header">
      <!-- header -->
      <div id="logo"></div>
      <div id="menlinks">
      <a href="/" title="Return to Netatalk home">[main]</a>
      <a href="/docs" title="Netatalk Wiki">[wiki]</a>
      <a href="/documentation.html" title="Netatalk Manual">[documentation]</a>
      <a href="/download.html" title="Download Netatalk">[downloads]</a>
      <a href="/support.html" title="Support">[support]</a>
      <a href="/links.html" title="Netatalk related links">[links]</a>
      <img src="/gfx/end.gif" alt="" width="125" height="7" />
      </div>
    </div>

    <div id="header-print">
      <h1>netatalk.io</h1>
    </div>

    <div class="search"> 
      <!-- search box -->
      <h2>search netatalk.io</h2>
      <form method="get" action="https://www.google.com/search">
        <p> 
          <input type="text" name="q" size="10" maxlength="255" value="" title="enter search text" />
          <input type="hidden" name="sitesearch" value="netatalk.io" />
          <input type="submit" name="btnG" value="Go" title="search netatalk.io" />
        </p>
      </form>
      <span class="italic">powered by Google</span>
    </div>
    <div id="navbars">
      <!-- the left navigation/search bar -->
      <div class="navbar">
        <h2>Table of contents</h2>
            <p><a class="wikilink" href="/docs/index.html">Home</a></p>
            <p><b>Resources</b></p>
            <ul>
            <li><a class="wikilink" href="/docs/FAQ.html">FAQ</a></li>
            <li><a class="wikilink" href="/docs/Troubleshooting.html">Troubleshooting</a></li>
            <li><a class="wikilink" href="/docs/Connect-to-AFP-Server-from-Mac-clients.html">Connect to AFP Server from Mac clients</a></li>
            <li><a class="wikilink" href="/docs/Installation-Notes.html">Installation Notes</a></li>
            </ul>
            <p><b>Netatalk v3 Installation</b></p>
            <ul>
            <li><a class="wikilink" href="/docs/Installing-Netatalk-3-on-Fedora.html">Installing Netatalk 3 on Fedora</a></li>
            <li><a class="wikilink" href="/docs/Installing-Netatalk-3-on-macOS.html">Installing Netatalk 3 on macOS</a></li>
            <li><a class="wikilink" href="/docs/Installing-Netatalk-3-on-Solaris-10.html">Installing Netatalk 3 on Solaris 10</a></li>
            <li><a class="wikilink" href="/docs/Installing-Netatalk-3-on-OpenIndiana.html">Installing Netatalk 3 on OpenIndiana</a></li>
            <li><a class="wikilink" href="/docs/Installing-Netatalk-3-on-OpenSUSE.html">Installing Netatalk 3 on OpenSUSE</a></li>
            <li><a class="wikilink" href="/docs/Installing-Netatalk-3-on-Ubuntu.html">Installing Netatalk 3 on Ubuntu</a></li>
            </ul>
            <p><b>Netatalk v2 Installation</b></p>
            <ul>
            <li><a class="wikilink" href="/docs/Installing-Netatalk-2-on-Debian.html">Installing Netatalk 2 on Debian</a></li>
            <li><a class="wikilink" href="/docs/Installing-Netatalk-2-on-Fedora.html">Installing Netatalk 2 on Fedora</a></li>
            <li><a class="wikilink" href="/docs/Installing-Netatalk-2-on-macOS.html">Installing Netatalk 2 on macOS</a></li>
            <li><a class="wikilink" href="/docs/Installing-Netatalk-2-on-OmniOS.html">Installing Netatalk 2 on OmniOS</a></li>
            </ul>
            <p><b>Technical Docs</b></p>
            <ul>
            <li><a class="wikilink" href="/docs/CatalogSearch.html">CatalogSearch</a></li>
            <li><a class="wikilink" href="/docs/Kerberos.html">Kerberos</a></li>
            <li><a class="wikilink" href="/docs/Special-Files-and-Folders.html">Special Files and Folders</a></li>
            <li><a class="wikilink" href="/docs/Spotlight.html">Spotlight</a></li>
            <li><a class="wikilink" href="/docs/AppleTalk-Kernel-Module.html">AppleTalk Kernel Module</a></li>
            <li><a class="wikilink" href="/docs/Print-Server.html">Print Server</a></li>
            </ul>
            <p><b>Development</b></p>
            <ul>
            <li><a class="wikilink" href="/docs/Developer-Notes.html">Developer Notes</a></li>
            <li><a class="wikilink" href="/docs/Using-GDB-to-Analyze-a-Crash.html">Using GDB to Analyze a Crash</a></li>
            </ul>
            </div>
        </div> <!-- /the left navigation/search bar -->
<div id="content"><!-- content -->
<h1 id="Installing-Netatalk-3-on-OpenIndiana">Installing Netatalk 3 on OpenIndiana</h1><hr/>
<p>This article describes how to install Netatalk 3.1 on OpenIndiana
Hipster</p>
<h2>Update system and install compiler toolchain</h2>
<pre><code>$ sudo pfexec pkg image-update
$ sudo pkg install build-essential crackle
</code></pre>
<h2>Build and install libtalloc</h2>
<pre><code>$ wget https://www.samba.org/ftp/talloc/talloc-2.4.1.tar.gz
$ tar xvzf talloc-2.4.1.tar.gz
$ cd talloc-2.4.1
$ ./configure CC=gcc
$ make
$ sudo make install
</code></pre>
<h2>Build</h2>
<p>Extract a tarball.</p>
<pre><code>$ tar xvf netatalk-3.1.8.tar.bz2
$ cd netatalk-3.1.8
</code></pre>
<p>You should read the help message, in order to know configure options.</p>
<p>If the applicable libraries are installed, many options will be detected
automatically.</p>
<pre><code>$ ./configure --help
</code></pre>
<p>Do configure! The following options are not auto-detected.</p>
<pre><code>$ ./configure \
   PKG_CONFIG_PATH=/usr/local/lib/pkgconfig \
   CFLAGS=-I/usr/include/gssapi \
   --with-init-style=solaris \
   --enable-krbV-uam \
   --with-dbus-sysconf-dir=/etc/dbus-1/system.d \
   --with-pam-confdir=/etc/pam.d \
   --with-tracker-plgconfig-version=1.0 \
   --with-cracklib
</code></pre>
<p>On successful completion, you will see a report similar to the
following:</p>
<pre><code>Compilation summary:

   CPPFLAGS       = -I$(top_srcdir)/include -I$(top_builddir)/include -I$(top_srcdir)
   CFLAGS         = -D_U_=&quot;__attribute__((unused))&quot; -g -O2
   LIBS           = -lsendfile -lsocket -lnsl
   PTHREADS:
       LIBS   =
       CFLAGS = -D_REENTRANT -pthreads
   TRACKER:
       LIBS   =  -ltracker-sparql-1.0 -lgio-2.0 -lgobject-2.0 -lgmodule-2.0 -lglib-2.0
       CFLAGS =  -DFFI_NO_RAW_API -pthread -I/usr/include/tracker-1.0
                 -I/usr/include/tracker-1.0/libtracker-sparql
                 -I/usr/lib/amd64/libffi-3.2.1/include -I/usr/include/glib-2.0
                 -I/usr/lib/amd64/glib-2.0/include -I/usr/include/pcre
   SSL:
       LIBS   =  -lcrypto -R/usr/lib -R/usr
       CFLAGS =  -I/usr/include/openssl
   LIBGCRYPT:
       LIBS   = -lgcrypt -lgpg-error
       CFLAGS =
   PAM:
       LIBS   =  -lpam
       CFLAGS =
   WRAP:
       LIBS   = -lwrap
       CFLAGS =
   BDB:
       LIBS   =  -ldb-5.1 -R/usr/lib
       CFLAGS =
   GSSAPI:
       LIBS   =  -L/usr/lib -lgss -lkrb5
       CFLAGS =  -I/usr/include/kerberosv5
   ZEROCONF:
       LIBS   =  -lavahi-common -lavahi-client
       CFLAGS =  -D_REENTRANT
   LDAP:
       LIBS   =  -lldap
       CFLAGS =
   LIBEVENT:
       LIBS.  =  -levent-2.1
       CFLAGS =  -I/usr/include/libevent2
   TALLOC:
       LIBS   =  -L/usr/local/lib -Wl, -rpath,/usr/local/lib -ltalloc
       CFLAGS =  -I/usr/local/include`

Configure summary:

   INIT STYLE:
        solaris
   AFP:
        Extended Attributes: ad | sys
        ACL support: yes
        Spotlight: yes
   CNID:
        backends:  dbd last tdb
   UAMS:
        DHX     (PAM SHADOW)
        DHX2    (PAM SHADOW)
        RANDNUM (afppasswd)
        Kerberos V
        clrtxt  (PAM SHADOW)
        guest
   Options:
        Zeroconf support:        yes
        tcp wrapper support:     yes
        quota support:           yes
        admin group support:     yes
        valid shell check:       yes
        cracklib support:        yes
        ACL support:             auto
        Kerberos support:        yes
        LDAP support:            yes
        AFP stats via dbus:      yes
        dtrace probes:           yes
   Paths:
        Netatalk lockfile:       /var/spool/locks/netatalk
        init directory:          /lib/svc/manifest/network/
        dbus system directory:   /etc/dbus-1/system.d
        dubs daemon path:        /bin/dbus-daemon
        tracker prefix:          /usr
        tracker install prefix:  /usr
        tracker manager:         /usr/bin/tracker daemon
        pam config directory:    /etc/pam.d
   Documentation:
        Docbook:                 no
</code></pre>
<p>Docbook is only needed if you want to regenerate the manual from XML sources.</p>
<p>The mysql CNID backend cannot be used. See <a href="http://marc.info/?l=netatalk&amp;m=139496475903793&amp;w=2">Netatalk-admins
ML</a>.</p>
<p>Make and install.</p>
<pre><code>$ make
$ sudo make install
</code></pre>
<h2>Check</h2>
<p>Check features and paths, using <code>afpd -V</code>.</p>
<pre><code>$ /usr/local/sbin/afpd -V
afpd 3.1.6 - Apple Filing Protocol (AFP) daemon of Netatalk

This program is free software; you can redistribute it and/or modify it
under the terms of the GNU General Public License as published by the
Free Software Foundation; either version 2 of the License, or (at your
option) any later version. Please see the file COPYING for further
information and details.

afpd has been compiled with support for these features:

         AFP versions: 2.2 3.0 3.1 3.2 3.3 3.4
        CNID backends: dbd last tdb
     Zeroconf support: mDNSResponder
 TCP wrappers support: Yes
        Quota support: Yes
  Admin group support: Yes
   Valid shell checks: Yes
     cracklib support: Yes
           EA support: ad | sys
          ACL support: Yes
         LDAP support: Yes
        D-Bus support: Yes
    Spotlight support: Yes
        DTrace probes: Yes`

             afp.conf: /usr/local/etc/afp.conf
          extmap.conf: /usr/local/etc/extmap.conf
      state directory: /usr/local/var/netatalk/
   afp_signature.conf: /usr/local/var/netatalk/afp_signature.conf
     afp_voluuid.conf: /usr/local/var/netatalk/afp_voluuid.conf
      UAM search path: /usr/local/lib/netatalk//
 Server messages path: /usr/local/var/netatalk/msg/
</code></pre>
<h2>Setting Up</h2>
<p>Edit <code>/usr/local/etc/afp.conf</code>.</p>
<p>Ex:</p>
<pre><code>[Global]

[Homes]

   basedir regex = /home

[Test Volume]

   path = /export/test1

[My Time Machine Volume]

   path = /export/timemachine
   time machine = yes
   vol size limit = 512000
</code></pre>
<p>You should check firewall. AFP&rsquo;s port number is <code>548</code>. Zeroconf&rsquo;s port
number is <code>5353</code>.</p>
<h2>Starting</h2>
<p>Start mDNSResponder.</p>
<pre><code># svcadm enable svc:/network/dns/multicast:default
</code></pre>
<p>Start Netatalk.</p>
<pre><code># svcadm enable svc:/network/netatalk:default
</code></pre>
<h2>See also</h2>
<ul>
<li><a href="http://wiki.openindiana.org/oi/Netatalk">OpenIndiana Wiki</a></li>
<li><a href="http://pkg.openindiana.org/sfe/en/search.shtml?token=netatalk">Package Search -
    netatalk</a></li>
<li><a href="http://www.opencsw.org/packages/netatalk/">netatalk - Solaris
    package</a></li>
</ul><hr /><p>Last updated 2024-01-21</p>
<p>
    This is a mirror of the <a href="https://github.com/Netatalk/netatalk/wiki">Netatalk GitHub Wiki</a> -
    if you find an error or would like to contribute, please head over there.
</p>
<hr />
</div>
<!-- end content -->
<div class="footer">
    <a href="https://validator.w3.org/check?uri=referer">
      <img src="https://www.w3.org/Icons/valid-xhtml10" alt="Valid XHTML 1.0 Strict" height="31" width="88" />
    </a> 
    <a href="https://jigsaw.w3.org/css-validator/check?uri=referer">
      <img style="border:0;width:88px;height:31px"
      src="https://jigsaw.w3.org/css-validator/images/vcss" alt="Valid CSS!" />
    </a>
  </div>
  </body>
  </html>
