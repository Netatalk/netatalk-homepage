<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>Netatalk Wiki - Developer FAQ</title>
    <meta name="description" content="Netatalk Wiki">
    <link rel="canonical" href="https://netatalk.io/docs/Developer-FAQ">
    <link rel="stylesheet" type="text/css" href="https://netatalk.io/css/site.css" />
    <link rel="icon" type="image/x-icon" href="https://netatalk.io/gfx/favicon.ico" />
</head>
<body>
<div id="header">
    <div id="logo"></div>
    <div id="menlinks">
        <a href="/" title="Return to Netatalk home">[main]</a>
        <a href="/docs" title="Netatalk Wiki">[wiki]</a>
        <a href="/documentation.html" title="Netatalk Manual">[documentation]</a>
        <a href="/download.html" title="Download Netatalk">[downloads]</a>
        <a href="/support.html" title="Support">[support]</a>
        <a href="/links.html" title="Netatalk related links">[links]</a>
        <img src="/gfx/end.gif" alt="" width="125" height="7" />
    </div>
</div>

<div id="header-print">
    <h1>netatalk.io</h1>
</div>

<div class="search">
    <h2>search netatalk.io</h2>
    <form method="get" action="https://www.google.com/search">
        <p>
            <input type="text" name="q" size="10" maxlength="255" value="" title="enter search text" />
            <input type="hidden" name="sitesearch" value="netatalk.io" />
            <input type="submit" name="btnG" value="Go" title="search netatalk.io" />
        </p>
    </form>
    <span class="italic">powered by Google</span>
</div>

<div id="navbars">
<div class="navbar">
<h2>Table of contents</h2>
<p>Resources</p>
<ul>
<li><a class="wikilink" href="/docs/FAQ.html">FAQ</a></li>
<li><a class="wikilink" href="/docs/Troubleshooting.html">Troubleshooting</a></li>
<li><a class="wikilink" href="/docs/Connect-to-AFP-Server.html">Connect to AFP Server</a></li>
<li><a class="wikilink" href="/docs/Webmin-Module.html">Webmin Module</a></li>
<li><a class="wikilink" href="/docs/Benchmarks.html">Benchmarks</a></li>
</ul>
<p>Netatalk v3 Installation</p>
<ul>
<li><a class="wikilink" href="/docs/Installing-Netatalk-3-on-Fedora-Linux.html">Installing Netatalk 3 on Fedora Linux</a></li>
<li><a class="wikilink" href="/docs/Installing-Netatalk-3-on-FreeBSD.html">Installing Netatalk 3 on FreeBSD</a></li>
<li><a class="wikilink" href="/docs/Installing-Netatalk-3-on-macOS.html">Installing Netatalk 3 on macOS</a></li>
<li><a class="wikilink" href="/docs/Installing-Netatalk-3-on-OpenBSD.html">Installing Netatalk 3 on OpenBSD</a></li>
<li><a class="wikilink" href="/docs/Installing-Netatalk-3-on-OpenIndiana.html">Installing Netatalk 3 on OpenIndiana</a></li>
<li><a class="wikilink" href="/docs/Installing-Netatalk-3-on-openSUSE.html">Installing Netatalk 3 on openSUSE</a></li>
<li><a class="wikilink" href="/docs/Installing-Netatalk-3-on-Solaris.html">Installing Netatalk 3 on Solaris</a></li>
<li><a class="wikilink" href="/docs/Installing-Netatalk-3-on-Ubuntu.html">Installing Netatalk 3 on Ubuntu</a></li>
</ul>
<p>Netatalk v2 Installation</p>
<ul>
<li><a class="wikilink" href="/docs/Installing-Netatalk-2-on-Alpine-Linux.html">Installing Netatalk 2 on Alpine Linux</a></li>
<li><a class="wikilink" href="/docs/Installing-Netatalk-2-on-Debian-Linux.html">Installing Netatalk 2 on Debian Linux</a></li>
<li><a class="wikilink" href="/docs/Installing-Netatalk-2-on-Fedora-Linux.html">Installing Netatalk 2 on Fedora Linux</a></li>
<li><a class="wikilink" href="/docs/Installing-Netatalk-2-on-macOS.html">Installing Netatalk 2 on macOS</a></li>
<li><a class="wikilink" href="/docs/Installing-Netatalk-2-on-NetBSD.html">Installing Netatalk 2 on NetBSD</a></li>
<li><a class="wikilink" href="/docs/Installing-Netatalk-2-on-OmniOS.html">Installing Netatalk 2 on OmniOS</a></li>
</ul>
<p>Technical Docs</p>
<ul>
<li><a class="wikilink" href="/docs/CatalogSearch.html">CatalogSearch</a></li>
<li><a class="wikilink" href="/docs/Kerberos.html">Kerberos</a></li>
<li><a class="wikilink" href="/docs/Special-Files-and-Folders.html">Special Files and Folders</a></li>
<li><a class="wikilink" href="/docs/Spotlight.html">Spotlight</a></li>
<li><a class="wikilink" href="/docs/AppleTalk-Kernel-Module.html">AppleTalk Kernel Module</a></li>
<li><a class="wikilink" href="/docs/Print-Server.html">Print Server</a></li>
</ul>
<p>Development</p>
<ul>
<li><a class="wikilink" href="/docs/Developer-Notes.html">Developer Notes</a></li>
<li><a class="wikilink" href="/docs/Developer-FAQ.html">Developer FAQ</a></li>
<li><a class="wikilink" href="/docs/Work-with-Documentation.html">Work with Documentation</a></li>
<li><a class="wikilink" href="/docs/Release-Process.html">Release Process</a></li>
<li><a class="wikilink" href="/docs/Using-GDB-to-Analyze-a-Crash.html">Using GDB to Analyze a Crash</a></li>
</ul>
</div></div>
<div id="content">
<h1 id="Developer-FAQ">Developer FAQ</h1><hr/>
<p><strong>Q.</strong> How can I create stand-alone patch files?</p>
<p><strong>A.</strong>
This describes the traditional method of creating plain text patch
files. It can be useful when requesting feedback for your code on the
mailing lists, or when contributing patches to downstream distros.</p>
<p><strong>Note:</strong> We do not use this workflow (anymore) for contributing patches to Netatalk.
Please use the GitHub PR workflow instead.</p>
<p>Assuming your patches are the last three commits on your current local
git branch, this is the easiest way to create patches from them:</p>
<pre><code>$ git format-patch -3
</code></pre>
<p>This will create three patch files in your current directory that you
can then send to the netatalk-devel mailing list.</p>
<p>Note that if you have a number of patches against a specific branch and
don&rsquo;t feel like counting them, the following works as well (e.g. against
the main branch):</p>
<pre><code>$ git format-patch origin/main
</code></pre>
<p>This will create one patch file for every patch that is in your local
branch but not in origin/main.</p>
<p>If you have more patches which belong together it&rsquo;s sometimes useful to
export them into one file:</p>
<pre><code>$ git format-patch --stdout origin/main &gt; develop-featureX-01.patches.txt
</code></pre>
<hr />
<p><strong>Q.</strong> How can I debug process crashes?</p>
<p><strong>A.</strong> We need a stack-backtrace (SBT) from a corefile with debugging symbols.</p>
<ul>
<li>Compile Netatalk with debugging symbols and without optimizations,
    e.g. for gcc</li>
</ul>
<pre><code>CFLAGS=&quot;-g -O0&quot; ./configure ... &amp;&amp; make &amp;&amp; make install
</code></pre>
<ul>
<li>Enable global corefile generation
    (<a href="http://www.google.com/search?q=linux+enable+core+dump">Linux</a>,
    <a href="http://www.google.com/search?q=man+coreadm">Solaris</a>)</li>
<li>Enable corefile generation for Netatalk by adding</li>
</ul>
<pre><code>ulimit -c unlimited
</code></pre>
<p>&hellip; at the beginning of the Netatalk start script and restart
Netatalk.</p>
<ul>
<li>Reproduce issue</li>
<li>Get SBT (example for a crash of afpd and gdb):</li>
</ul>
<pre><code>$ gdb path/to/afpd path/to/corefile
(gdb) bt full
...
(gdb) exit
</code></pre>
<hr />
<p><strong>Q.</strong> How can I run the netatalk integration tests?</p>
<p><strong>A.</strong> In order to run the integration tests located in test/ run make with the
<code>check</code> target:</p>
<pre><code>$ make -j
$ make check
</code></pre>
<hr />
<p><strong>Q.</strong> How do I revert a commit?</p>
<p><strong>A.</strong> The &ldquo;git reset&rdquo; command allows you to reset the HEAD of the
branch to any given point in history. To go back one commit, run</p>
<pre><code>$ git reset HEAD^
</code></pre>
<p>This will keep your local changes and you can make any additional
changes before re-committing the new work. Also see the &ldquo;git commit
&ndash;amend&rdquo; command and the &ldquo;git reset&rdquo; man page for other examples.</p>
<p>If the branch has already been pushed to remote, you can force-push the
amended branch. Please be careful with force pushing, since it can be a
destructive action.</p>
<pre><code>$ git push origin my-work-branch --force
</code></pre>
<hr />
<p><strong>Q.</strong> How can I maintain a feature branch against the upstream Netatalk
branches?</p>
<p><strong>A.</strong> You clone the Netatalk repository as per the instructions above.
Then you make a new feature branch: </p>
<pre><code>$ git checkout -b feature_foo main
</code></pre>
<p>Now you do your development in your feature branch. Any time the main
branch gets too different to the code in your feature branch you should
rebase your feature branch. The rebase rewinds your feature branch to
the point there it was branched. Then it updates your feature branch to
the HEAD of the main branch and re-applies your changes.</p>
<pre><code>$ git rebase main
First, rewinding head to replay your work on top of it...
HEAD is now at 357f003... Add WERR_SERVICE_ALREADY_RUNNING.
...
Wrote tree 02299ef7c1cfa093248bfd9c6e3812805718845e
Committed: e20a8c521d7860d9b7bd724ed5ea19c7306530ab
</code></pre>
<p>Rebase works best when you use it for local branches that are never
pushed to a public repository, see <a href="https://archive.kernel.org/oldwiki/git.wiki.kernel.org/index.php/GitFaq.html#Why_won.27t_.22git_push.22_work_after_I_rebase_a_branch.3F">Why won&rsquo;t &ldquo;git push&rdquo; work after I
rebased a
branch?</a>.</p><hr />
    <p>
        This is a mirror of the Netatalk GitHub Wiki.
        Please <a href="https://github.com/Netatalk/netatalk/wiki/Developer-FAQ">visit the original page</a>
        if you want to correct an error or contribute new contents.
    </p>
    <p>Last updated 2024-06-29</p>
    <hr />
    </div>
<div class="footer">
    <a href="https://validator.w3.org/check?uri=referer">
      <img src="https://www.w3.org/Icons/valid-xhtml10" alt="Valid XHTML 1.0 Strict" height="31" width="88" />
    </a>
    <a href="https://jigsaw.w3.org/css-validator/check?uri=referer">
      <img style="border:0;width:88px;height:31px"
      src="https://jigsaw.w3.org/css-validator/images/vcss" alt="Valid CSS!" />
    </a>
</div>
</body>
</html>

