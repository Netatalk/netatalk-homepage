<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <title>第2章 インストール</title>
    <link rel="stylesheet" type="text/css" href="../netatalk.css" />
    <meta name="generator" content="DocBook XSL Stylesheets Vsnapshot" />
    <link rel="home" href="index.html" title="Netatalk マニュアル" />
    <link rel="up" href="index.html" title="Netatalk マニュアル" />
    <link rel="prev" href="intro.html" title="第1章 序説" />
    <link rel="next" href="configuration.html" title="第3章 Netatalk のセットアップ" />
  </head>
  <body>
    <div class="navheader">
      <table width="100%" summary="Navigation header">
        <tr>
          <th colspan="3" align="center">第2章 インストール</th>
        </tr>
        <tr>
          <td width="20%" align="left"><a accesskey="p" href="intro.html">戻る</a> </td>
          <th width="60%" align="center"> </th>
          <td width="20%" align="right"> <a accesskey="n" href="configuration.html">次へ</a></td>
        </tr>
      </table>
      <hr />
    </div>
    <div class="chapter">
      <div class="titlepage">
        <div>
          <div>
            <h1 class="title"><a id="installation"></a>第2章 インストール</h1>
          </div>
          <div>
            <div class="author">
              <h3 class="author"><span class="firstname">Eiichirou</span> <span class="surname">UDA（日本語訳）</span></h3>
            </div>
          </div>
        </div>
      </div>
      <div class="toc">
        <p>
          <strong>目次</strong>
        </p>
        <dl class="toc">
          <dt>
            <span class="sect1">
              <a href="installation.html#id-1.5.4">Netatalk の入手の仕方</a>
            </span>
          </dt>
          <dd>
            <dl>
              <dt>
                <span class="sect2">
                  <a href="installation.html#id-1.5.4.4">バイナリーパッケージ</a>
                </span>
              </dt>
              <dt>
                <span class="sect2">
                  <a href="installation.html#id-1.5.4.5">ソースパッケージ</a>
                </span>
              </dt>
            </dl>
          </dd>
          <dt>
            <span class="sect1">
              <a href="installation.html#id-1.5.5">Netatalk のコンパイル</a>
            </span>
          </dt>
          <dd>
            <dl>
              <dt>
                <span class="sect2">
                  <a href="installation.html#id-1.5.5.2">前提条件</a>
                </span>
              </dt>
              <dt>
                <span class="sect2">
                  <a href="installation.html#compiling-netatalk">Netatalk のコンパイル</a>
                </span>
              </dt>
            </dl>
          </dd>
          <dt>
            <span class="sect1">
              <a href="installation.html#id-1.5.6">Netatalk の起動と停止</a>
            </span>
          </dt>
        </dl>
      </div>
      <div class="warning" style="margin-left: 0.5in; margin-right: 0.5in;">
        <h3 class="title">警告</h3>
        <p>Netatalk 2 または 3 から Netatalk 4 にアップグレードする前に、このマニュアルの <a class="link" href="upgrade.html" title="第5章 以前の Netatalk バージョンからのアップグレード">アップグレード</a> の章を必ずお読みください。</p>
      </div>
      <div class="sect1">
        <div class="titlepage">
          <div>
            <div>
              <h2 class="title" style="clear: both"><a id="id-1.5.4"></a>Netatalk の入手の仕方</h2>
            </div>
          </div>
        </div>
        <p>この件の最新の情報は GitHub の netatalk のページを一読いただきたい。</p>
        <p>
          <a class="ulink" href="https://github.com/Netatalk/netatalk" target="_top">https://github.com/Netatalk/netatalk</a>
        </p>
        <div class="sect2">
          <div class="titlepage">
            <div>
              <div>
                <h3 class="title"><a id="id-1.5.4.4"></a>バイナリーパッケージ</h3>
              </div>
            </div>
          </div>
          <p>Netatalk のバイナリーパッケージは、いくつかの Linux、BSD、Solaris
      ディストリビューションに含まれている。通常の配布元も見たいだろうと思う。</p>
          <p>第三者が提供しているパッケージ リポジトリも参照する手もある。例えば、Red Hat 派生 Linux
      ディストリビューションの為の<a class="ulink" href="https://rpmfind.net/" target="_top">rpmfind</a> Solaris
      系 OS の為の <a class="ulink" href="https://www.opencsw.org/" target="_top">OpenCSW</a> 又は macOS
      の為の <a class="ulink" href="https://brew.sh/" target="_top"> Homebrew</a> か <a class="ulink" href="https://www.macports.org/" target="_top">MacPorts </a>。</p>
        </div>
        <div class="sect2">
          <div class="titlepage">
            <div>
              <div>
                <h3 class="title"><a id="id-1.5.4.5"></a>ソースパッケージ</h3>
              </div>
            </div>
          </div>
          <div class="sect3">
            <div class="titlepage">
              <div>
                <div>
                  <h4 class="title"><a id="id-1.5.4.5.2"></a>Tarball</h4>
                </div>
              </div>
            </div>
            <p>tar で固めた Netatalk 安定版ソースコードは <a class="ulink" href="https://github.com/Netatalk/netatalk/releases" target="_top">GitHub の Netatalk
        リリースページ</a>にある。</p>
          </div>
          <div class="sect3">
            <div class="titlepage">
              <div>
                <div>
                  <h4 class="title"><a id="id-1.5.4.5.3"></a>Git</h4>
                </div>
              </div>
            </div>
            <p>Git レポジトリ のダウンロードは迅速で容易である：</p>
            <div class="orderedlist">
              <ol class="orderedlist" type="1">
                <li class="listitem">
                  <p>Git がインストールしてあることを確認する。<span class="command"><strong>which git</strong></span> は git
            のパスを示してくれるはずである。</p>
                  <pre class="screen"><code class="prompt">$</code> <strong class="userinput"><code>which git</code></strong>
<code class="computeroutput">/usr/bin/git</code></pre>
                </li>
                <li class="listitem">
                  <p>ソースを取得してみよう。</p>
                  <pre class="screen"><code class="prompt">$</code> <strong class="userinput"><code>git clone https://github.com/Netatalk/netatalk.git netatalk-code
</code></strong><code class="computeroutput">Cloning into 'netatalk-code'...
remote: Enumerating objects: 41592, done.
...
Resolving deltas: 100% (32227/32227), done.
</code></pre>
                  <p>上記で Git リポジトリから、Netatalk のソース全体の完全でまっさらのコピーを含む
            <code class="filename">netatalk-code</code> という名前のローカルディレクトリが作成される。</p>
                </li>
                <li class="listitem">
                  <p>ブランチやタグを指定しない場合は、最先端の開発コードが取得さる。例えば、最新の安定した Netatalk 3.1
            コードを入手するには、「branch-netatalk-3-1」という名前のブランチをチェックアウトする：</p>
                  <pre class="screen"><code class="prompt">$</code> <strong class="userinput"><code>git checkout branch-netatalk-3-1</code></strong></pre>
                </li>
                <li class="listitem">
                  <p>レポジトリのコピーを最新の状態にしておきたい場合、適宜以下を実行する。</p>
                  <pre class="screen"><code class="prompt">$</code> <strong class="userinput"><code>git pull</code></strong></pre>
                </li>
              </ol>
            </div>
          </div>
        </div>
      </div>
      <div class="sect1">
        <div class="titlepage">
          <div>
            <div>
              <h2 class="title" style="clear: both"><a id="id-1.5.5"></a>Netatalk のコンパイル</h2>
            </div>
          </div>
        </div>
        <div class="sect2">
          <div class="titlepage">
            <div>
              <div>
                <h3 class="title"><a id="id-1.5.5.2"></a>前提条件</h3>
              </div>
            </div>
          </div>
          <div class="sect3">
            <div class="titlepage">
              <div>
                <div>
                  <h4 class="title"><a id="id-1.5.5.2.2"></a>必要なサードパーティソフトウェア</h4>
                </div>
              </div>
            </div>
            <div class="itemizedlist">
              <ul class="itemizedlist" style="list-style-type: disc; ">
                <li class="listitem">
                  <p>Berkeley DB<a id="id-1.5.5.2.2.2.1.1.1" class="indexterm"></a>.</p>
                  <p>書き込みの時に最低でもバージョン 4.6 が必要となる。</p>
                  <p>推奨バージョンは 5.3 である Sleepycat ライセンスで提供された最終リリースである。</p>
                </li>
                <li class="listitem">
                  <p>libevent</p>
                  <p>netatalk サービス コントローラー デーモンの内部イベント コールバックは、 libevent バージョン 2
            に基づいて構築されている。</p>
                </li>
                <li class="listitem">
                  <p>Libgcrypt</p>
                  <p>OS X 10.7 とそれ以降で必須となった DHX2 のために <a class="ulink" href="http://directory.fsf.org/wiki/Libgcrypt" target="_top"> Libgcrypt</a>
            が必要である。</p>
                </li>
                <li class="listitem">
                  <p>Perl と UnicodeData.txt</p>
                  <p>ビルド システムは、Perl と Unicode 文字データベースを使用して、Netatalk の Unicode
            文字変換ソースを生成します。</p>
                  <p>さらに、Netatalk の管理ユーティリティ スクリプトは、Perl ランタイム バージョン 5.8
            以降に依存します。必須 Perl モジュールは以下： <span class="emphasis"><em>IO::Socket::IP</em></span>
            (asip-status) 又は <span class="emphasis"><em>Net::DBus</em></span> (afpstats)。</p>
                </li>
              </ul>
            </div>
          </div>
          <div class="sect3">
            <div class="titlepage">
              <div>
                <div>
                  <h4 class="title"><a id="id-1.5.5.2.3"></a>任意のサードパーティソフトウェア</h4>
                </div>
              </div>
            </div>
            <p>Netatalk はその機能性を拡充するために以下のサードパーティソフトウェアを使用することができる。</p>
            <div class="itemizedlist">
              <ul class="itemizedlist" style="list-style-type: disc; ">
                <li class="listitem">
                  <p>ACL と LDAP</p>
                  <p>LDAP は、ACL の高度な権限スキームと連携して動作するオープンで業界標準のユーザー ディレクトリ
            プロトコルです。一部のオペレーティング システムでは ACL と LDAP
            ライブラリがシステムに組み込まれていますが、他のオペレーティング システムではこの機能を有効にするためにサポート
            パッケージをインストールする必要があります。</p>
                </li>
                <li class="listitem">
                  <p>Bonjour 用の Avahi または mDNSresponder</p>
                  <p>Mac OS X 10.2 以降では、自動サービス検出に Bonjour (別名 Zeroconf) を使用します。
            Netatalk は、Avahi または mDNSResponder を使用して AFP ファイル共有と Time Machine
            ボリュームをアドバタイズできます。</p>
                  <p>Avahi ライブラリ自体は、D-Bus サポートを使用してビルドされている必要があります。</p>
                </li>
                <li class="listitem">
                  <p>CrackLib</p>
                  <p>Random Number UAM と netatalk 独自の
            <strong class="userinput"><code>afppasswd</code></strong> パスワード マネージャを使用する場合、CrackLib は
            netatalk での認証に弱いパスワードを設定するのを防ぐのに役立ちます。</p>
                </li>
                <li class="listitem">
                  <p>D-Bus および GLib バインディング</p>
                  <p>afpd にファイル サーバーの使用統計を問い合わせるために
            <strong class="userinput"><code>afpstats</code></strong> ツールによって使用されます。</p>
                </li>
                <li class="listitem">
                  <p>DocBook XSL およびxsltproc</p>
                  <p>このマニュアルを含む Netatalk ドキュメントは、XML 形式で作成されています。次に、DocBook XSL
            スタイルシートと xsltproc を使用して、XML を troff (マニュアル ページ用)、html、pdf
            などの人間が読める形式に変換します。</p>
                </li>
                <li class="listitem">
                  <p>iconv</p>
                  <p>iconv は、多くの文字エンコードの変換ルーチンを提供します。Netatalk は、ISO-8859-1
            など、組み込みの変換がない文字セットを提供するためにこれを使用します。glibc システムでは、Netatalk は glibc
            が提供する iconv 実装を使用できます。それ以外の場合は、GNU libiconv 実装を使用できます。</p>
                </li>
                <li class="listitem">
                  <p>Kerberos V</p>
                  <p>Kerberos v5 は、マサチューセッツ工科大学で発明されたクライアント サーバー
            ベースの認証プロトコルです。Kerberos ライブラリを使用すると、netatalk は既存の Kerberos
            インフラストラクチャでの認証用に GSS UAM ライブラリを作成できます。</p>
                </li>
                <li class="listitem">
                  <p>MySQL または MariaDB</p>
                  <p>MySQL 互換のクライアント ライブラリを活用することで、netatalk は、スケーラビリティと信頼性に優れた
            MySQL CNID バックエンドを使用して構築できます。管理者は、このバックエンドで使用するために別のデータベース
            インスタンスを用意する必要があります。</p>
                </li>
                <li class="listitem">
                  <p>Nettle と WolfSSL</p>
                  <p>Nettle と WolfSSL は、Classic Mac OS に最も強力なパスワード暗号化を提供する
            DHCAST128 (別名 DHX) UAM に必要です。古い Random Number UAM
            もこれらのライブラリに依存しています。</p>
                  <p>注: 現在、フル機能の WolfSSL ライブラリが OS に配布されていない場合に備えて、WolfSSL を
            Netatalk にバンドルしています。</p>
                </li>
                <li class="listitem">
                  <p>PAM<a id="id-1.5.5.2.3.3.10.1.1" class="indexterm"></a></p>
                  <p>PAM は、ユーザーを認証するための柔軟なメカニズムを提供します。 PAM は SUN<a id="id-1.5.5.2.3.3.10.2.1" class="indexterm"></a> Microsystems によって発明されました。Linux-PAM は、ローカル
            システム管理者がアプリケーションによるユーザー認証方法を選択できるようにする共有ライブラリ スイートです。</p>
                </li>
                <li class="listitem">
                  <p>TCP ラッパー</p>
                  <p>Wietse Venema のネットワーク ロガー。TCPD または LOG_TCP とも呼ばれます。</p>
                  <p>セキュリティ
            オプションは次のとおりです。ホスト、ドメイン、および/またはサービスごとのアクセス制御、ホスト名のスプーフィングまたはホスト
            アドレスのスプーフィングの検出。ブービートラップを使用して早期警告システムを実装します。</p>
                </li>
                <li class="listitem">
                  <p>Tracker / talloc / bison / flex</p>
                  <p>Netatalk は、Spotlight<a id="id-1.5.5.2.3.3.12.2.1" class="indexterm"></a> 検索インデックスのメタデータ バックエンドとして <a class="ulink" href="https://tracker.gnome.org" target="_top">Tracker</a>
            を使用します。必要な最小限のバージョンは 0.7 です。これは <a class="ulink" href="https://gnome.pages.gitlab.gnome.org/tracker/" target="_top">SPARQL</a>
            をサポートする最初のバージョンだからです。</p>
                  <p>Spotlight には、Samba の talloc ライブラリ、bison などの Yacc パーサー、flex
            などのレキサーも必要です。</p>
                </li>
              </ul>
            </div>
          </div>
        </div>
        <div class="sect2">
          <div class="titlepage">
            <div>
              <div>
                <h3 class="title"><a id="compiling-netatalk"></a>Netatalk のコンパイル<a id="id-1.5.5.3.1.1" class="indexterm"></a></h3>
              </div>
            </div>
          </div>
          <p>ビルドシステムの使い方、コードのコンフィグ又はビルドの手順書は <a class="ulink" href="https://github.com/Netatalk/netatalk/blob/main/INSTALL" target="_top">INSTALL</a>
      ファイルを参考してください。</p>
          <p>特定の OS に対しての具体的なビルド事例は <a class="link" href="compile.html" title="付録A Netatalk をソースコードからコンパイルする"> Netatalk
      をソースコードからコンパイルする</a> 付録を参考してください。</p>
        </div>
      </div>
      <div class="sect1">
        <div class="titlepage">
          <div>
            <div>
              <h2 class="title" style="clear: both"><a id="id-1.5.6"></a>Netatalk の起動と停止</h2>
            </div>
          </div>
        </div>
        <p>Netatalk ディストリビューションには、コンパイル前にビルド システムに指定されたオプションに応じて調整される、オペレーティング
    システム固有の起動スクリプト テンプレートがいくつか付属しています。現在、テンプレートは、一般的な Linux ディストリビューション、BSD
    バリアント、Solaris 派生、および macOS 用のプラットフォーム固有のスクリプトに加えて、systemd、openrc
    用に提供されています。</p>
        <p>ソースからビルドする場合、Netatalk ビルド システムは、どの init
    スタイルがプラットフォームに適しているかを検出しようとします。また、<code class="option">with-init-style</code>
    オプションを指定して、必要な特定のタイプの起動スクリプト <a id="id-1.5.6.3.2" class="indexterm"></a> をインストールするようにビルド システムを構成することもできます。構文については、ビルド システムのヘルプ
    テキストを参照してください。</p>
        <p>新しい Linux、*BSD、および Solaris
    のようなディストリビューションが定期的に登場し、上記の他のシステムの起動手順も変更される可能性があるため、起動スクリプトを盲目的にインストールするのではなく、まずシステムで機能することを確認することをお勧めします。</p>
        <p>Linux ディストリビューション、RPM、または BSD パッケージなどの固定セットアップの一部として Netatalk
    を使用する場合は、おそらく適切に準備されているでしょう。したがって、前の段落は、Netatalk
    を自分でコンパイルした人にほとんど当てはまります。</p>
        <p>次のデーモンは、使用するスタートアップ スクリプト メカニズムによって起動する必要があります:</p>
        <div class="itemizedlist">
          <ul class="itemizedlist" style="list-style-type: disc; ">
            <li class="listitem">
              <p>netatalk<a id="id-1.5.6.7.1.1.1" class="indexterm"></a></p>
            </li>
          </ul>
        </div>
        <p>スタートアップ スクリプトがない場合は、このデーモンを直接 (root として) 起動し、使い終わったら SIGTERM
    で終了することもできます。</p>
        <p>さらに、構成ファイル <code class="filename">afp.conf</code> が適切な場所にあることを確認してください。
    <strong class="userinput"><code>netatalk -V</code></strong> コマンドを実行すると、netatalk
    がファイルの場所を予測しているかどうかを問い合わせることができます。</p>
        <p>AppleTalk サービスを実行する場合は、<span class="command"><strong>atalkd</strong></span> デーモンに加えて、オプションの
    <span class="command"><strong>papd</strong></span>、<span class="command"><strong>timelord</strong></span>、<span class="command"><strong>a2boot</strong></span>
    デーモンも起動する必要があります。詳細については、このマニュアルの <a class="link" href="appletalk.html" title="第4章 AppleTalk">AppleTalk</a> の章を参照してください。</p>
      </div>
    </div>
    <div class="navfooter">
      <hr />
      <table width="100%" summary="Navigation footer">
        <tr>
          <td width="40%" align="left"><a accesskey="p" href="intro.html">戻る</a> </td>
          <td width="20%" align="center"> </td>
          <td width="40%" align="right"> <a accesskey="n" href="configuration.html">次へ</a></td>
        </tr>
        <tr>
          <td width="40%" align="left" valign="top">第1章 序説 </td>
          <td width="20%" align="center">
            <a accesskey="h" href="index.html">ホーム</a>
          </td>
          <td width="40%" align="right" valign="top"> 第3章 Netatalk のセットアップ</td>
        </tr>
      </table>
    </div>
  </body>
</html>
