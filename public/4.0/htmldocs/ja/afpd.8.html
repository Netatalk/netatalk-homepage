<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <title>afpd</title>
    <link rel="stylesheet" type="text/css" href="/css/netatalk.css" />
    <meta name="generator" content="DocBook XSL Stylesheets Vsnapshot" />
    <link rel="home" href="index.html" title="Netatalk マニュアル" />
    <link rel="up" href="man-pages.html" title="第6章 マニュアルページ" />
    <link rel="prev" href="afp_voluuid.conf.5.html" title="afp_voluuid.conf" />
    <link rel="next" href="afpldaptest.1.html" title="afpldaptest" />
  </head>
  <body>
    <div xmlns="" id="header">
        <div id="logo"></div>
        <div id="menlinks">
          <a href="/" title="Netatalk ホームに戻る">[main]</a>
          <a href="/docs" title="Netatalk Wiki">[wiki]</a>
          <a href="/documentation.html" title="Netatalk マニュアル">[documentation]</a>
          <a href="/download.html" title="Netatalk をダウンロード">[downloads]</a>
          <a href="/support.html" title="お問い合わせ">[support]</a>
          <a href="/links.html" title="Netatalk 関連リンク">[links]</a>
          <img src="/gfx/end.gif" alt="" width="125" height="7" />
        </div>
    </div>
    <div xmlns="" class="navheader" align="center">Netatalk 4.0.8</div>
<div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">afpd</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="afp_voluuid.conf.5.html">戻る</a> </td><th width="60%" align="center">第6章 マニュアルページ</th><td width="20%" align="right"> <a accesskey="n" href="afpldaptest.1.html">次へ</a></td></tr></table><hr /></div><div class="refentry"><a id="afpd.8"></a><div class="titlepage"></div><div class="refnamediv"><h2>名前</h2><p>afpd — Apple Filing Protocol デーモン</p></div><div class="refsynopsisdiv"><h2>概要</h2><div class="cmdsynopsis"><p><code class="command">afpd</code>  [-d] [-F <em class="replaceable"><code>configfile</code></em>]</p></div><div class="cmdsynopsis"><p><code class="command">afpd</code>  [ -v  |   -V  |   -h ]</p></div></div><div class="refsect1"><a id="id-1.9.9.4"></a><h2>説明</h2><p><span class="command"><strong>afpd</strong></span>はUnixファイルシステムにApple Filing Protocol
    (AFP)インターフェースを提供する。これは通常、<span class="command"><strong>netatalk</strong></span>(8)によってブート時に起動される。</p><p><span class="command"><strong>afpd</strong></span>はファイルサーバの挙動と設定を決めるために<code class="filename">afp.conf</code>を利用する。</p></div><div class="refsect1"><a id="id-1.9.9.5"></a><h2>オプション</h2><div class="variablelist"><dl class="variablelist"><dt><span class="term">-d</span></dt><dd><p>デーモンがフォークしないことを指定する。</p></dd><dt><span class="term">-v</span></dt><dd><p>バージョン情報を表示してから終了する。</p></dd><dt><span class="term">-V</span></dt><dd><p>詳細情報を表示してから終了する。</p></dd><dt><span class="term">-h</span></dt><dd><p>ヘルプを表示してから終了する。</p></dd><dt><span class="term">-F <em class="replaceable"><code>configfile</code></em></span></dt><dd><p>利用する設定ファイルを指定する。 (デフォルトは<code class="filename">afp.conf</code> )</p></dd></dl></div></div><div class="refsect1"><a id="id-1.9.9.6"></a><h2>シグナル</h2><p>最終手段を除いて、ユーザの<span class="command"><strong>afpd</strong></span>をシャットダウンするために<span class="command"><strong>SIGKILL
    (-9)</strong></span>を使うのは推奨しない。なぜなら、CNIDデータベースが矛盾したままになるかもしれないからである。<span class="command"><strong>afpd</strong></span>を終了する安全な方法は、<span class="command"><strong>SIGTERM
    (-15)</strong></span>シグナルを送ってそれ自身が停止するのを待つことである。</p><p>メインの<span class="command"><strong>afpd</strong></span>プロセスにSIGTERMやSIGUSR1を送れば子プロセスに伝わるので、全部に作用するだろう。</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">SIGTERM</span></dt><dd><p>きれいに終了する。マスタプロセスから子プロセスに伝わる。</p></dd><dt><span class="term">SIGQUIT</span></dt><dd><p>マスタ<span class="command"><strong>afpd</strong></span>にこれを送ると全ての子プロセスを終了する。休止時間なしでAFPサービスを実施するのに使われる。</p></dd><dt><span class="term">SIGHUP</span></dt><dd><p>afpdに<span class="command"><strong>SIGHUP</strong></span>を送ると設定ファイルを再読み込みする。</p></dd><dt><span class="term">SIGINT</span></dt><dd><p>子プロセスの<span class="command"><strong>afpd</strong></span>に<span class="command"><strong>SIGINT</strong></span>を送ると、このプロセスの<span class="emphasis"><em>max_debug</em></span>ログを有効にします。ログは<code class="filename">/tmp/afpd.PID.XXXXXX</code>に送られます。更に<span class="command"><strong>SIGINT</strong></span>を送ると元のログ設定に戻ります。</p></dd><dt><span class="term">SIGUSR1</span></dt><dd><p><span class="command"><strong>afpd</strong></span>プロセスはクライアントに「The server is going down
          for
          maintenance.」というメッセージを送り、5分後に自身を終了します。新規接続を許しません。子プロセスのafpdにこれを送った場合、他の子プロセスには影響しません。それでもメインプロセスは終了するだろうし、全ての新規接続は無効になります。</p></dd><dt><span class="term">SIGUSR2</span></dt><dd><p><span class="command"><strong>afpd</strong></span>プロセスはビルド時に設定したメッセージディレクトリの下のmessage.pidという名前のファイルを探します。発見したプロセスについて、その内容をメッセージとして対応するAFPクライアントに送ります。メッセージを送った後にファイルは削除されます。このシグナルは子プロセスの<span class="command"><strong>afpd</strong></span>にのみ送るべきです。</p></dd></dl></div></div><div class="refsect1"><a id="id-1.9.9.7"></a><h2>ファイル</h2><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="filename">afp.conf</code></span></dt><dd><p>afpdが使う設定ファイル</p></dd><dt><span class="term"><code class="filename">afp_signature.conf</code></span></dt><dd><p>サーバシグネチャのリスト</p></dd><dt><span class="term"><code class="filename">afp_voluuid.conf</code></span></dt><dd><p>Time MachineボリュームのUUIDのリスト</p></dd><dt><span class="term"><code class="filename">extmap.conf</code></span></dt><dd><p>ファイル名拡張子マッピング</p></dd><dt><span class="term"><code class="filename">message.pid</code></span></dt><dd><p>ユーザへ送るメッセージの内容。</p></dd></dl></div></div><div class="refsect1"><a id="id-1.9.9.8"></a><h2>参照</h2><p><span class="citerefentry"><span class="refentrytitle">netatalk</span>(8)</span>, <span class="citerefentry"><span class="refentrytitle">hosts_access</span>(5)</span>, <span class="citerefentry"><span class="refentrytitle">afp.conf</span>(5)</span>, <span class="citerefentry"><span class="refentrytitle">afp_signature.conf</span>(5)</span>, <span class="citerefentry"><span class="refentrytitle">afp_voluuid.conf</span>(5)</span>, <span class="citerefentry"><span class="refentrytitle">extmap.conf</span>(5)</span>, <span class="citerefentry"><span class="refentrytitle">dbd</span>(1)</span>.</p></div><div class="refsect1"><a id="id-1.9.9.9"></a><h2>著作者</h2><p><a class="ulink" href="https://netatalk.io/contributors" target="_top">CONTRIBUTORS</a> を参照</p></div></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="afp_voluuid.conf.5.html">戻る</a> </td><td width="20%" align="center"><a accesskey="u" href="man-pages.html">上に戻る</a></td><td width="40%" align="right"> <a accesskey="n" href="afpldaptest.1.html">次へ</a></td></tr><tr><td width="40%" align="left" valign="top">afp_voluuid.conf </td><td width="20%" align="center"><a accesskey="h" href="index.html">ホーム</a></td><td width="40%" align="right" valign="top"> afpldaptest</td></tr></table></div></body>
</html>
