<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <title>第2章 インストール</title>
    <link rel="stylesheet" type="text/css" href="https://netatalk.io/css/netatalk.css" />
    <meta name="generator" content="DocBook XSL Stylesheets Vsnapshot" />
    <link rel="home" href="index.html" title="Netatalk マニュアル" />
    <link rel="up" href="index.html" title="Netatalk マニュアル" />
    <link rel="prev" href="intro.html" title="第1章 序説" />
    <link rel="next" href="configuration.html" title="第3章 Netatalk のセットアップ" />
  </head>
  <body>
    <div xmlns="" id="header">
        <div id="logo"></div>
        <div id="menlinks">
          <a href="/" title="Netatalk ホームに戻る">[main]</a>
          <a href="/docs" title="Netatalk Wiki">[wiki]</a>
          <a href="/documentation.html" title="Netatalk マニュアル">[documentation]</a>
          <a href="/download.html" title="Netatalk をダウンロード">[downloads]</a>
          <a href="/support.html" title="お問い合わせ">[support]</a>
          <a href="/links.html" title="Netatalk 関連リンク">[links]</a>
          <img src="/gfx/end.gif" alt="" width="125" height="7" />
        </div>
    </div>
    <div xmlns="" class="navheader" align="center">Netatalk 3.2.1</div>
<div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">第2章 インストール</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="intro.html">戻る</a> </td><th width="60%" align="center"> </th><td width="20%" align="right"> <a accesskey="n" href="configuration.html">次へ</a></td></tr></table><hr /></div><div class="chapter"><div class="titlepage"><div><div><h1 class="title"><a id="installation"></a>第2章 インストール</h1></div><div><div class="author"><h3 class="author"><span class="firstname">Eiichirou</span> <span class="surname">UDA（日本語訳）</span></h3></div></div><div><p class="pubdate">2016 年 7 月 26 日（訳）</p></div></div></div><div class="toc"><p><strong>目次</strong></p><dl class="toc"><dt><span class="sect1"><a href="installation.html#id-1.5.4">Netatalk の入手の仕方</a></span></dt><dd><dl><dt><span class="sect2"><a href="installation.html#id-1.5.4.4">バイナリーパッケージ</a></span></dt><dt><span class="sect2"><a href="installation.html#id-1.5.4.5">ソースパッケージ</a></span></dt></dl></dd><dt><span class="sect1"><a href="installation.html#id-1.5.5">Netatalk のコンパイル</a></span></dt><dd><dl><dt><span class="sect2"><a href="installation.html#id-1.5.5.2">前提条件</a></span></dt><dt><span class="sect2"><a href="installation.html#compiling-netatalk">Netatalk のコンパイル</a></span></dt></dl></dd><dt><span class="sect1"><a href="installation.html#id-1.5.6">Netatalk の起動と停止</a></span></dt></dl></div><div class="warning" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">警告</h3><p>Netatalk 3 は他バージョンと共存できないので、以前に Netatalk の古いバージョンを使ったことがあるなら、
    “<a class="link" href="upgrade.html" title="第4章 Netatalk 2 からのアップグレード">Netatalk 2 からのアップグレード</a>”の章をまず読んでいただきたい！！！</p></div><div class="sect1"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="id-1.5.4"></a>Netatalk の入手の仕方</h2></div></div></div><p>この件の最新の情報は GitHub の netatalk のページを一読いただきたい。</p><p><a class="ulink" href="https://github.com/Netatalk/netatalk" target="_top">https://github.com/Netatalk/netatalk</a></p><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a id="id-1.5.4.4"></a>バイナリーパッケージ</h3></div></div></div><p>Netatalk のバイナリーパッケージは、いくつかの Linux、Unix
      ディストリビューションに含まれている。通常の配布元も見たいだろうと思う。</p><p>第三者が提供しているパッケージ リポジトリも参照する手もある。例えば、Red Hat 派生 Linux ディストリビューションの為の<a class="ulink" href="https://rpmfind.net/" target="_top">rpmfind</a> Solaris 系 OS の為の
      <a class="ulink" href="https://www.opencsw.org/" target="_top">OpenCSW</a>
      又は macOS の為の <a class="ulink" href="https://brew.sh/" target="_top">
      Homebrew</a> か <a class="ulink" href="https://www.macports.org/" target="_top">MacPorts
      </a>。</p></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a id="id-1.5.4.5"></a>ソースパッケージ</h3></div></div></div><div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a id="id-1.5.4.5.2"></a>Tarball</h4></div></div></div><p>tar で固めた Netatalk 安定版ソースコードは <a class="ulink" href="https://github.com/Netatalk/netatalk/releases" target="_top">GitHub の Netatalk リリースページ</a>にある。</p></div><div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a id="id-1.5.4.5.3"></a>Git</h4></div></div></div><p>Git レポジトリ のダウンロードは迅速で容易である：</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>Git がインストールしてあることを確認する。<span class="command"><strong>which
            git</strong></span> は git のパスを示してくれるはずである。</p><pre class="screen"><code class="prompt">$</code> <strong class="userinput"><code>which git</code></strong>
<code class="computeroutput">/usr/bin/git</code></pre></li><li class="listitem"><p>ソースを取得してみよう。</p><pre class="screen"><code class="prompt">$</code> <strong class="userinput"><code>git clone https://github.com/Netatalk/netatalk.git netatalk-code
</code></strong><code class="computeroutput">Cloning into 'netatalk-code'...
remote: Enumerating objects: 41592, done.
...
Resolving deltas: 100% (32227/32227), done.
</code></pre><p>上記で Git リポジトリから、Netatalk のソース全体の完全でまっさらのコピーを含む
            <code class="filename">netatalk-code</code> という名前のローカルディレクトリが作成される。</p></li><li class="listitem"><p>ブランチやタグを指定しない場合は、最先端の開発コードが取得さる。例えば、最新の安定した
　　　　　　　Netatalk 3.1 コードを入手するには、「branch-netatalk-3-1」という名前のブランチをチェックアウトする：</p><pre class="screen"><code class="prompt">$</code> <strong class="userinput"><code>git checkout branch-netatalk-3-1</code></strong></pre></li><li class="listitem"><p>レポジトリのコピーを最新の状態にしておきたい場合、適宜以下を実行する。</p><pre class="screen"><code class="prompt">$</code> <strong class="userinput"><code>git pull</code></strong></pre></li></ol></div></div></div></div><div class="sect1"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="id-1.5.5"></a>Netatalk のコンパイル</h2></div></div></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a id="id-1.5.5.2"></a>前提条件</h3></div></div></div><div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a id="id-1.5.5.2.2"></a>必要なサードパーティソフトウェア</h4></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Berkeley DB<a id="id-1.5.5.2.2.2.1.1.1" class="indexterm"></a>.</p><p>書き込みの時に最低でもバージョン 4.6 が必要となる。</p><p>推奨バージョンは 5.3 である Sleepycat ライセンスで提供された最終リリースである。</p></li><li class="listitem"><p>Libgcrypt</p><p>OS X 10.7 とそれ以降で必須となった DHX2 のために <a class="ulink" href="http://directory.fsf.org/wiki/Libgcrypt" target="_top">
            Libgcrypt</a> が必要である。</p></li><li class="listitem"><p>libevent</p><p>netatalk サービス コントローラー デーモンの内部イベント コールバックは、
　　　　　　　libevent バージョン 2 に基づいて構築されている。</p></li></ul></div></div><div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a id="id-1.5.5.2.3"></a>任意のサードパーティソフトウェア</h4></div></div></div><p>Netatalk はその機能性を拡充するために以下のサードパーティソフトウェアを使用することができる。</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>OpenSSL / LibreSSL / WolfSSL</p><p>OpenSSL 1.1 又は LibreSSL は、Classic Mac OS に最も強力なパスワード暗号化を提供する DHCAST128 (別名 DHX) UAM に必要。Random Number UAM もこのライブラリを使用している。</p><p>netatalk 3.2.0 以降は、バンドルされている WolfSSL ライブラリがデフォルトの DHX プロバイダーとして netatalk とともに配布されている。</p></li><li class="listitem"><p>Spotlight<a id="id-1.5.5.2.3.3.2.1.1" class="indexterm"></a> サポートのための Tracker</p><p>Netatalk はメタデータのバックエンドとして
            <a class="ulink" href="https://tracker.gnome.org" target="_top">Tracker</a>
            を使用する。最近の Linux ディストリビューションには、Tracker のバージョン 0.7 以来使用可能な
            libtracker-sparql が提供されている。</p><p>Samba プロジェクトの talloc ライブラリと、bison の様な Yacc パーサ、
            そして flex の様な字句解析ツールも必要になる。</p></li><li class="listitem"><p>Bonjour（Zeroconf としても知られる）のための mDNSresponderPOSIX または Avahi</p><p>サービス探索のために Mac OS X 10.2 及び以降のバージョンは
            Bonjour（Zeroconf としても知られる）を使用する。AFP ファイルサーバー又は
            Time Machine サービスをクライアントに通知することができる。</p><p>Avahi は DBUS サポートのもとで (
            <strong class="userinput"><code>--enable-dbus</code></strong>) ビルドされなければならない。</p></li><li class="listitem"><p>TCP wrappers</p><p>TCPD または LOG_TCP としても知られる Wietse Venema のネットワークロガー。</p><p>セキュリティオプションは：
            ホストごとドメインごとかつ／ないしはサービスごとのアクセス制御；
            ホスト名のなりすましあるいはホストアドレスのなりすまし検出；
            早期警告システムを実装するブービートラップ；である。</p></li><li class="listitem"><p>PAM<a id="id-1.5.5.2.3.3.5.1.1" class="indexterm"></a></p><p>PAM はユーザー認証の柔軟な機構を実現する。PAM は SUN<a id="id-1.5.5.2.3.3.5.2.1" class="indexterm"></a> Microsystems によって作り出された。
            Linux-PAM はアプリケーションがどのようにユーザーを認証するのかを選択できるようなローカルシステム管理を実現する共有ライブラリーのセットである。</p></li><li class="listitem"><p>Kerberos V</p><p>Kerberos v5 は、マサチューセッツ工科大学で発明されたクライアント サーバー ベースの認証プロトコルである。
            Kerberos ライブラリを使用すると、netatalk は既存の Kerberos インフラストラクチャで認証するための GSS UAM ライブラリを生成できる。</p></li><li class="listitem"><p>ACL と LDAP</p><p>LDAP は ACL の高度な権限スキームと連携して動作する、オープンな業界標準のユーザー ディレクトリ プロトコルである。
            一部のオペレーティング システムでは、ACL および LDAP ライブラリがシステムに組み込まれているが、
            他のオペレーティング システムでは、この機能を有効にするためにサポート パッケージをインストールする必要がある。</p></li><li class="listitem"><p>MySQL</p><p>MySQL 互換のクライアント ライブラリを活用することで、拡張性と信頼性の高い MySQL CNID バックエンドを使用して netatalk を構築できる。
            管理者は、このバックエンドで使用する別のデータベース インスタンスを提供する必要がある。</p></li><li class="listitem"><p>D-Bus と GLib バインディング</p><p><strong class="userinput"><code>afpstats</code></strong> ツールに使われ、afpd サーバ状況を参照する子ができる。
            </p></li><li class="listitem"><p>iconv</p><p>iconv はたくさんの文字エンコーディングの変換ルーチンを提供する。Netatalk
            は iconv を使用して内蔵されていない ISO-8859-1 のようなキャラクターセット変換を実現する。
            glibc システムでは glibc の提供する iconv 実装を使うことができる。さもなくば GNU libiconv
            実装を使うことができる。</p></li><li class="listitem"><p>CrackLib</p><p>Random Number UAM と netatalk の固有パスワード管理ツール
            <strong class="userinput"><code>afppasswd</code></strong> を使用する際、CrackLib を使う事によって
            弱いパスワードの設定を防ぐことができる。</p></li><li class="listitem"><p>Perl</p><p><strong class="userinput"><code>afpstats</code></strong>、
            <strong class="userinput"><code>apple_dump</code></strong>、
            <strong class="userinput"><code>asip-status</code></strong> 又は
            <strong class="userinput"><code>macusers</code></strong> という管理者向けツールは Perl 5.8 以降の実行環境を
            使用している。下記 Perl モジュールは必須：
            <span class="emphasis"><em>IO::Socket::IP</em></span> (asip-status) 又は
            <span class="emphasis"><em>Net::DBus</em></span> (afpstats)。</p></li><li class="listitem"><p>DocBook XSL と xsltproc</p><p>本マニュアル含めての netatalk ドキュメンテーションは XML 様式に作成され
            DocBook XSL スタイルシートを適用し生成されている。フォーマット変換は xsltproc
            で実施している。</p></li></ul></div></div></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a id="compiling-netatalk"></a>Netatalk のコンパイル<a id="id-1.5.5.3.1.1" class="indexterm"></a></h3></div></div></div><p>ビルドシステムの使い方、コードのコンフィグ又はビルドの手順書は <a class="ulink" href="https://github.com/Netatalk/netatalk/blob/main/INSTALL" target="_top">INSTALL</a>
      ファイルを参考してください。</p><p>特定の OS に対しての具体的なビルド事例は <a class="link" href="compile.html" title="付録A Netatalk をソースコードからコンパイルする">
      Netatalk をソースコードからコンパイルする</a> 付録を参考してください。</p></div></div><div class="sect1"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="id-1.5.6"></a>Netatalk の起動と停止</h2></div></div></div><p>Netatalk の配布物は、
    いくつかのオペレーティングシステム固有のスタートアップ・スクリプト・テンプレートを備えている。
    これらテンプレートは、コンパイル前に指定できる。
    現時点で、systemd、openrc、Linux、BSD、Solaris、そして macOS 向けのテンプレートが用意されている。
    ビルドスクリプトにシステムタイプを指示することで、どのスタートアップスクリプト
      <a id="id-1.5.6.2.1" class="indexterm"></a>を生成してインストールするのか選ぶことができる。
    スタートアップスクリプトを自動でインストールさせるには、
    <code class="option">with-init-style</code> オプションで有効なものを加える。</p><p>Linux ディストリビューションの新しいリリースは頻繁に出てくるし、
    上記で触れたようなほかのシステムのスタートアップの手続きもまた変わりうる。
    それ故、盲目的にスタートアップスクリプトをインストールするのではなく、
    自分のシステムで動作するであろうかということをまず見てみる、というのがおそらくいい考えである。</p><p>Linux ディストリビューションの RPM あるいは BSD のパッケージのような所定のセットアップの一部として使用する場合、
    諸々の事は概ねよしなに取り計らわれるだろう。
    それ故、Netatalk そのものをコンパイルするユーザーには概ね下記のことが当てはまる。</p><p>いかなるスタートアップスクリプト機構を使っていても、下記のデーモンは必要である：</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>netatalk<a id="id-1.5.6.6.1.1.1" class="indexterm"></a></p></li></ul></div><p>スタートアップスクリプトは無くても、root ユーザとして netatalk デーモンを実行し、
    使い終わったら SIGTERM で終了させることができす。</p><p>加えて、設定ファイル <code class="filename">afp.conf</code> が正しい場所にあるか確認する。</p></div></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="intro.html">戻る</a> </td><td width="20%" align="center"> </td><td width="40%" align="right"> <a accesskey="n" href="configuration.html">次へ</a></td></tr><tr><td width="40%" align="left" valign="top">第1章 序説 </td><td width="20%" align="center"><a accesskey="h" href="index.html">ホーム</a></td><td width="40%" align="right" valign="top"> 第3章 Netatalk のセットアップ</td></tr></table></div></body>
</html>
