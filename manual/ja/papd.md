# 名前

papd — AppleTalk プリント サーバー デーモン

# 概要

`papd [-d] [-f configfile] [-p printcap] [-P pidfile]`

`papd [ -v | -V ]`

# 説明

`papd` は AppleTalk プリンタ デーモンである。このデーモンは、プリンタ アクセス プロトコル (PAP)
を使用して、AppleTalk クライアント (通常は Macintosh コンピュータ) からの印刷ジョブを受け入れる。 System V
印刷システムで使用する場合、`papd` はジョブを `lpd(8)` スプール ディレクトリに直接スプールし、ネットワークからジョブを受け入れた後に
`lpd` を起動して適切なスプール ディレクトリを再検査させる。実際の印刷とスプールは、すべて `lpd` によって処理される。

`papd` は、印刷ジョブを外部プログラムにパイプして処理することもできる。これは、CUPS
を使用していないシステムで推奨される方法である。これは、使用されているすべての種類の `lpd` との互換性の問題を回避するためである。

Netatalk 2.0 以降では、CUPS もサポートされている。 *cupsautoadd* を papd.conf
の最初のエントリとして使用するだけで、すべての CUPS
プリンタが自動的に共有される。プリンタ共有を個別に定義することで、これらのデフォルトを上書きすることも可能。設定ファイルの形式の詳細については、`papd.conf(5)`
を参照してください。

`papd` は通常、システムの init スクリプトまたはサービスからブート時に起動される。まず、設定ファイル `papd.conf` から読み取る。

設定ファイルが指定されていない場合は、マシンのホスト名が NBP 名として使用され、すべてのオプションはデフォルト値になる。

# オプション

-d

> ターミナルからフォークまたは切断しません。

-f <configfile\>

> 設定情報については、`papd.conf` ではなく、<configfile\>
を参照してください。

-p <printcap\>

> LPD 構成情報については、`/etc/printcap` ではなく、<printcap\>
を参照してください。

-P <pidfile\>

> `papd` がプロセス ID を保存するファイルを指定する。

-v | -V

> バージョン情報を出力して終了する。

# 認証

PSSP (プリント サーバー セキュリティプロトコル) は、プリント サーバーへの PostScript
プリンタクエリを通じて実行される認証プロトコルである。PSSP を使用するには、クライアント Mac に LaserWriter 8.6.1
以降が必要。ユーザーは、印刷する前にユーザー名とパスワードを入力するよう求められる。PSSPを初めて有効にしたときに、クライアントが印刷に認証が必要であることを認識できるように、各クライアントでプリンタを再設定する必要がある場合がある。PSSPはプリンタごとに有効にできる。PSSP
は、以下で説明する CAP スタイルの認証よりも堅牢であるため、プリンタを認証する方法として推奨される。

CAP スタイルの認証 geその名前は、CAP (Columbia AppleTalk Package) が Mac
クライアントの印刷を認証するために使用する方法に由来している。この方法では、印刷する前にユーザーがファイル共有にログインする必要がある。`afpd`
は、クライアントの AppleTalk
アドレスにちなんで名付けられた一時ファイルにユーザー名を記録し、ユーザーが切断すると一時ファイルを削除する。したがって、CAP
スタイルの認証は、TCP/IP 経由で `afpd` に接続されているクライアントでは機能しません。`papd` は、接続しているマシンと同じ
AppleTalk アドレスを持つファイルからユーザー名を取得する。CAP スタイルの認証は、どの Mac クライアントでも機能する。特定のプリンタで
CAP と PSSP の両方が有効になっている場合、最初に CAP が試され、次に `papd` が PSSP にフォールバックする。

認証に使用する UAM のリスト ('am' オプションで指定)
は、すべてのプリンタに適用される。プリンタごとに異なる認証方法を定義することはできません。UAMS
のリストは複数回指定できるが、最後の設定のみが使用される。現在、プリンタ認証方法として *uams_guest.so* と
*uams_clrtxt.so* がサポートされている。ゲスト メソッドでは、有効なユーザー名が必要だが、パスワードは必要ありません。
Cleartext UAM には、有効なユーザー名と正しいパスワードの両方が必要。

> **注記**

> 印刷認証は、Mac OS 9 以前でのみサポートされている。

# ファイル

`papd.conf`

> デフォルトの設定ファイル。

`/etc/printcap`

> プリンタ機能データベース。

`.ppd`

> PostScript プリンタ記述ファイル。 papd は、設定された PPD
ファイルを参照して、印刷クライアントからの設定およびフォントのクエリに応答する。このようなファイルは、Adobe,
Inc. またはプリンタの製造元から入手できる。PPD
ファイルが設定されていない場合、papd
はデフォルトの応答を返すため、クライアントが過度に大きなジョブを送信する可能性がある。

# 注意事項

`papd` は、クライアントから上位ビットが設定された文字 (完全な 8 ビット)  を受け入れるが、一部の PostScript プリンタ
(Apple の LaserWriter ファミリを含む) は、デフォルトでシリアル インターフェイスで 7 ビット文字のみを受け入れる。TCP/IP
メソッド (リモート LPR またはソケット)  経由でアクセスされる一部のプリンタにも同じことが当てはまる。プリンタを 8
ビット全体を受け入れるように設定するか、特別な予防措置を講じて印刷ジョブのエンコードを変換する必要がある (たとえば、CUPS 1.1.19
以降を使用している場合は、*co="protocol=BCP"* を使用する)。

印刷クライアントが Mac OS X 10.2 以降を実行している場合は、適切なフィルタがクライアント側にもインストールされていない限り、PPD が
*\*cupsFilter:* コメントを使用しないように注意してください。

# 参照

`lp(1)`, `lpr(1)`, `lprm(1)`, `printcap(5)`, `lpc(8)`, `lpd(8)`,
`papd.conf(8)`.

# 著者

[CONTRIBUTORS](https://netatalk.io/contributors) を参照
