<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>afpd</title><link rel="stylesheet" type="text/css" href="https://netatalk.sourceforge.io/css/netatalk.css" /><meta name="generator" content="DocBook XSL Stylesheets V1.79.1" /><link rel="home" href="index.html" title="Netatalk 2.2 Manual" /><link rel="up" href="man-pages.html" title="Chapter 5. Manual Pages" /><link rel="prev" href="afp_voluuid.conf.5.html" title="afp_voluuid.conf" /><link rel="next" href="afpd.conf.5.html" title="afpd.conf" /></head><body>
    <div xmlns="" id="header">
        <div id="logo"></div>
        <div id="menlinks">
          <a href="/" title="Return to Netatalk home">[main]</a>
          <a href="https://github.com/Netatalk/Netatalk/wiki" title="Netatalk Wiki">[wiki]</a>
          <a href="/2.2/htmldocs" title="Netatalk Manual">[documentation]</a>
          <a href="https://sourceforge.net/projects/netatalk/files/" title="Download Netatalk from SourceForge">[downloads]</a>
          <a href="/support.php" title="Support">[support]</a>
          <a href="/links.php" title="Netatalk related links">[links]</a>
          <img src="/gfx/end.gif" alt="" width="125" height="7" />
        </div>
    </div>
<div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">afpd</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="afp_voluuid.conf.5.html">Prev</a> </td><th width="60%" align="center">Chapter 5. Manual Pages</th><td width="20%" align="right"> <a accesskey="n" href="afpd.conf.5.html">Next</a></td></tr></table><hr /></div><div class="refentry"><a id="afpd.8"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>afpd — Apple Filing Protocol daemon</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="cmdsynopsis"><p><code class="command">afpd</code>  [-duptDTI] [-f <em class="replaceable"><code>defaultvolumes</code></em>] [-s <em class="replaceable"><code>systemvolumes</code></em>] [-n <em class="replaceable"><code>nbpname</code></em>] [-c <em class="replaceable"><code>maxconnections</code></em>] [-g <em class="replaceable"><code>guest</code></em>] [-P <em class="replaceable"><code>pidfile</code></em>] [-S <em class="replaceable"><code>port</code></em>] [-L <em class="replaceable"><code>message</code></em>] [-F <em class="replaceable"><code>configfile</code></em>] [-U <em class="replaceable"><code>uams</code></em>] [-m <em class="replaceable"><code>umask</code></em>]</p></div><div class="cmdsynopsis"><p><code class="command">afpd</code>    -v  |   -V  |   -h  </p></div></div><div class="refsect1"><a id="idm1970"></a><h2>Description</h2><p><span class="command"><strong>afpd</strong></span> provides an Apple Filing Protocol (AFP)
    interface to the Unix file system. It is normally started at boot time
    from system init scripts or services.</p><p><code class="filename">afpd.conf</code> is the configuration file
    used by <span class="command"><strong>afpd</strong></span> to determine the behavior and
    configuration of the different virtual file servers that it
    provides.</p><p>The list of volumes offered to the user is generated from
    <code class="filename">AppleVolumes.system</code> and one of
    <code class="filename">AppleVolumes.default</code>,
    <code class="filename">~/AppleVolumes</code>,
    <code class="filename">~/.AppleVolumes</code>,
    <code class="filename">~/applevolumes</code>, or
    <code class="filename">~/.applevolumes</code>. The
    <code class="filename">AppleVolumes</code> files is used to specify volumes to
    mount and file name extension mappings.</p><p></p></div><div class="refsect1"><a id="idm1986"></a><h2>Options</h2><div class="variablelist"><dl class="variablelist"><dt><span class="term">-d</span></dt><dd><p>Specifies that the daemon should not fork. If netatalk has
          been configured with <span class="emphasis"><em>--enable-debug1</em></span>, a trace
          of all AFP commands will be written to stdout.</p></dd><dt><span class="term">-p</span></dt><dd><p>Prevents clients from saving their passwords. (Equivalent to
          -<code class="option">nosavepasswd</code> in
          <code class="filename">afpd.conf</code>.)</p></dd><dt><span class="term">-t</span></dt><dd><p>Allows clients to change their passwords. (Equivalent to
          <code class="option">-setpasswd</code> in
          <code class="filename">afpd.conf</code>.)</p></dd><dt><span class="term">-D</span></dt><dd><p>Use DDP (AppleTalk) as transport protocol. (Equivalent to
          <code class="option">-ddp</code> in <code class="filename">afpd.cond</code>.)</p></dd><dt><span class="term">-T</span></dt><dd><p>Use TCP/IP as transport protocol. (Equivalent to
          <code class="option">-tcp</code> in <code class="filename">afpd.conf</code>.)</p></dd><dt><span class="term">-v</span></dt><dd><p>Print version information and exit.</p></dd><dt><span class="term">-V</span></dt><dd><p>Print verbose information and exit.</p></dd><dt><span class="term">-h</span></dt><dd><p>Print help and exit.</p></dd><dt><span class="term">-I</span></dt><dd><p>Use the Netatalk icon for mounted volumes. (Equivalent to
          <code class="option">-icon</code> in <code class="filename">afpd.conf</code>.)
          (Later versions of Mac OS ignores this.)</p></dd><dt><span class="term">-f <em class="replaceable"><code>defaultvolumes</code></em></span></dt><dd><p>Specifies that <em class="replaceable"><code>defaultvolumes</code></em>
          should be read for a list of default volumes to offer, instead of
          <code class="filename">AppleVolumes.default</code>.</p></dd><dt><span class="term">-s <em class="replaceable"><code>systemvolumes</code></em></span></dt><dd><p>Specifies that <em class="replaceable"><code>systemvolumes</code></em> should
          be read for a list of volume that all users will be offered, instead
          of <code class="filename">AppleVolumes.system</code>.</p></dd><dt><span class="term">-u</span></dt><dd><p>Read the user's <code class="filename">AppleVolumes</code> file first.
          This option causes volume names in the user's
          <code class="filename">AppleVolumes</code> file to override volume names in
          the system's <code class="filename">AppleVolumes</code> file. The default is
          to read the system <code class="filename">AppleVolumes</code> file first.
          Note that this option doesn't effect the precedence of filename
          extension mappings: the user's <code class="filename">AppleVolumes</code>
          file always has precedence.</p></dd><dt><span class="term">-n <em class="replaceable"><code>nbpname</code></em></span></dt><dd><p>Specifies that <em class="replaceable"><code>nbpname</code></em> should be
          used for NBP registration, instead of the first component of the
          hostname in the local zone.</p></dd><dt><span class="term">-c <em class="replaceable"><code>maxconnections</code></em></span></dt><dd><p>Specifies the maximum number of connections to allow for this
          instance of <span class="command"><strong>afpd</strong></span>. The default is 20.</p></dd><dt><span class="term">-g <em class="replaceable"><code>guest</code></em></span></dt><dd><p>Specifies the name of the guest account. The default is
          '<span class="emphasis"><em>nobody</em></span>'.</p></dd><dt><span class="term">-P <em class="replaceable"><code>pidfile</code></em></span></dt><dd><p>Specifies the file in which <span class="command"><strong>afpd</strong></span> stores its
          process id.</p></dd><dt><span class="term">-S <em class="replaceable"><code>port</code></em></span></dt><dd><p>Specifies the port to register with when doing AFPoverTCP.
          Defaults to 548. (Equivalent to <code class="option">-port </code>in
          <code class="filename">afpd.conf</code>.)</p></dd><dt><span class="term">-L <em class="replaceable"><code>message</code></em></span></dt><dd><p>Specifies the login message that will be sent to clients.
          (Equivalent to <code class="option">-loginmsg</code> in
          <code class="filename">afpd.conf</code>.)</p></dd><dt><span class="term">-F <em class="replaceable"><code>configfile</code></em></span></dt><dd><p>Specifies the configuration file to use. (Defaults to
          <code class="filename">netatalk/afpd.conf</code>.)</p></dd><dt><span class="term">-U <em class="replaceable"><code>uams</code></em></span></dt><dd><p>Comma-separated list of UAMs to use for the authentication
          process. (Equivalent to <code class="option">-uamlist</code> in
          <code class="filename">afpd.conf</code>.)</p></dd><dt><span class="term">-m <em class="replaceable"><code>umask</code></em></span></dt><dd><p>Use this <em class="parameter"><code>umask</code></em> for the creation of
          folders in Netatalk.</p></dd></dl></div></div><div class="refsect1"><a id="idm2116"></a><h2>SIGNALS</h2><p>To shut down a user's <span class="command"><strong>afpd</strong></span> process it is
      recommended that <span class="command"><strong>SIGKILL (-9)</strong></span>
      <span class="emphasis"><em>NOT</em></span> be used, except as a last resort, as this
      may leave the CNID database in an inconsistent state. The safe way
      to terminate an <span class="command"><strong>afpd</strong></span> is to send it a
      <span class="command"><strong>SIGTERM (-15)</strong></span> signal and wait for it to die on
      its own.</p><p>SIGTERM and SIGUSR1 signals that are sent to the main <span class="command"><strong>afpd</strong></span> process
    are propagated to the children, so all will be affected.</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">SIGTERM</span></dt><dd><p>Clean exit. Propagates from master to childs.</p></dd><dt><span class="term">SIGQUIT</span></dt><dd><p>Send this to the master <span class="command"><strong>afpd</strong></span>, it will
          exit leaving all children running! Can be used to implement
          AFP service without downtime.</p></dd><dt><span class="term">SIGHUP</span></dt><dd><p>Sending a <span class="command"><strong>SIGHUP</strong></span> to afpd will cause it to
          reload its configuration files.</p></dd><dt><span class="term">SIGINT</span></dt><dd><p>Sending a <span class="command"><strong>SIGINT</strong></span> to a child
          <span class="command"><strong>afpd</strong></span> enables <span class="emphasis"><em>max_debug</em></span>
          logging for this process. The log is sent to fhe file
          <code class="filename">/tmp/afpd.PID.XXXXXX</code>. Sending another
          <span class="command"><strong>SIGINT</strong></span> will revert to the original log settings.</p></dd><dt><span class="term">SIGUSR1</span></dt><dd><p>The <span class="command"><strong>afpd</strong></span> process will send the message "The
          server is going down for maintenance." to the client and shut itself
          down in 5 minutes. New connections are not allowed. If this is sent
          to a child afpd, the other children are not affected. However, the
          main process will still exit, disabling all new connections.</p></dd><dt><span class="term">SIGUSR2</span></dt><dd><p>The <span class="command"><strong>afpd</strong></span> process will look in the message
          directory configured at build time for a file named message.pid. For
          each one found, a the contents will be sent as a message to the
          associated AFP client. The file is removed after the message is
          sent. This should only be sent to a child
          <span class="command"><strong>afpd</strong></span>.</p></dd></dl></div></div><div class="refsect1"><a id="idm2161"></a><h2>FILES</h2><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="filename">afpd.conf</code></span></dt><dd><p>configuration file used by afpd</p></dd><dt><span class="term"><code class="filename">AppleVolumes.default</code></span></dt><dd><p>list of default volumes to mount</p></dd><dt><span class="term"><code class="filename">AppleVolumes.system</code></span></dt><dd><p>list of volumes to offer all users</p></dd><dt><span class="term"><code class="filename">~/AppleVolumes</code>, </span><span class="term"><code class="filename">~/.AppleVolumes</code>, </span><span class="term"><code class="filename">~/applevolumes</code>, </span><span class="term"><code class="filename">~/.applevolumes</code></span></dt><dd><p>user's list of volumes to mount</p></dd><dt><span class="term"><code class="filename">afp_signature.conf</code></span></dt><dd><p>list of server signature</p></dd><dt><span class="term"><code class="filename">afp_voluuid.conf</code></span></dt><dd><p>list of UUID for Time Machine volume</p></dd><dt><span class="term"><code class="filename">afp_ldap.conf</code></span></dt><dd><p>configuration file for LDAP and ACL support</p></dd><dt><span class="term"><code class="filename">msg/message.pid</code></span></dt><dd><p>contains messages to be sent to users.</p></dd></dl></div></div><div class="refsect1"><a id="idm2210"></a><h2>BUGS</h2><p></p></div><div class="refsect1"><a id="idm2213"></a><h2>SEE ALSO</h2><p><span class="citerefentry"><span class="refentrytitle">hosts_access</span>(5)</span>, <span class="citerefentry"><span class="refentrytitle">afpd.conf</span>(5)</span>, <span class="citerefentry"><span class="refentrytitle">AppleVolumes.default</span>(5)</span>, <span class="citerefentry"><span class="refentrytitle">afp_signature.conf</span>(5)</span>, <span class="citerefentry"><span class="refentrytitle">afp_voluuid.conf</span>(5)</span>, <span class="citerefentry"><span class="refentrytitle">afp_ldap.conf</span>(5)</span>, <span class="citerefentry"><span class="refentrytitle">dbd</span>(1)</span>.</p></div></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="afp_voluuid.conf.5.html">Prev</a> </td><td width="20%" align="center"><a accesskey="u" href="man-pages.html">Up</a></td><td width="40%" align="right"> <a accesskey="n" href="afpd.conf.5.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top">afp_voluuid.conf </td><td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td><td width="40%" align="right" valign="top"> afpd.conf</td></tr></table></div></body></html>